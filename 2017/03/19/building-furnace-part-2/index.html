<!DOCTYPE html>
<html class="nojs" lang="en-GB" dir="ltr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 2 – Ramblings of a cloud engineer</title>
<meta name="description" content="Intro Hi folks. Previously on this blog: Part 1, Part 3, Part 4 In this part, I&amp;amp;rsquo;m going to talk about the AWS Go SDK and begin do dissect the intricacies of …">
<meta name="created" content="2017-03-19T12:03:00+0100">
<meta name="modified" content="2017-03-19T12:03:00+0100">
<meta name="author" content="hannibal">
<meta name="contact" content="skarslo777@gmail.com">
<meta property="og:site_name" content="Ramblings of a cloud engineer">
<meta property="og:title" content="Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 2">
<meta property="og:url" content="https://skarlso.github.io/2017/03/19/building-furnace-part-2/">
<meta property="og:type" content="article">
<meta property="og:image" content="https://skarlso.github.io/apple-touch-icon.png">
<meta name="generator" content="Hugo 0.83.1" />
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">


<link rel="canonical" href="https://skarlso.github.io/2017/03/19/building-furnace-part-2/">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

<link rel="stylesheet" href="/css/mobile.2ab74aa64785dcab8114959e76ca140cf76207cd85989bc6d4fc3b12f734a09e.css" media="screen">
<link rel="stylesheet" href="/css/styles.934ca64e1cd8b39bd18393dc4fa4788aab68ce041fa7830964c671eed3da2b40.css">
<link rel="stylesheet" href="/css/print.27fc184f8670f41a2690985390779e7b20335a8fadff8fa015cf9417ffe50c36.css" media="print">

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 2",
    "datePublished": "2017-03-19T12:03:00+01:00",
    "dateModified": "2017-03-19T12:03:00+01:00",
    "url" : "https://skarlso.github.io/2017/03/19/building-furnace-part-2/",
    "description": "Intro Hi folks. Previously on this blog: Part 1, Part 3, Part 4 In this part, I\u0026amp;rsquo;m going to talk about the AWS Go SDK and begin do dissect the intricacies of …",
    "image" : "https://skarlso.github.io/apple-touch-icon.png",
    "author": {
      "@type": "Person",
      "name": "hannibal"
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://skarlso.github.io"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Ramblings of a cloud engineer",
      "logo" : {
        "@type": "ImageObject",
        "url": "https://skarlso.github.io/apple-touch-icon.png"
      },
      "url": "https://skarlso.github.io"
    }
  }
</script>

<script src="/js/script-early.min.3b0e641814c87f6a1d6ffa5e7d597f29faa8ce11482541e8801dc34013817c91.js"></script>
<script defer src="/js/lib/umbrella.min.6e17830ccdded0a13b96d6993865b58202bc2ee750e5892a51858ab048b2bebb.js"></script>
<script defer src="/js/mobile.min.abb9438113cb72181ecda30b9375cc0771c7ce2e7354414a7c1296b45cf47135.js"></script>
<script defer src="/js/script.min.a71d161caff0970fa29a345da3bd9b444f629eccf1e4922585879b44f8f30160.js"></script>

<script src="/js/tracking.min.cab571d19167308ad205e765770573e4bae7f3dab20f07533ba563eea84c8202.js"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-69463020-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body class="single-page">
<div class="page layout__page layout__sidebar-second">
<header class="header layout__header">
<a href="/" title="Home" rel="home" class="header__logo"><img src="/images/logo.png" alt="Home" class="header__logo-image"></a>
<h1 class="header__site-name">
<a href="/" title="Home" class="header__site-link" rel="home"><span>Ramblings of a cloud engineer</span></a>
</h1>
<div class="region header__region">
</div>
</header>

<nav class="main-menu layout__navigation">
<h2 class="visually-hidden">Main menu</h2>
<ul class="navbar">
<li><a href="/">Home</a></li>
<li><a href="/blog/" class="active" aria-current="page">Blog</a></li>
</ul>
</nav>


<main class="main layout__main">
<article class="section-blog single-view">
<header>
<h1 class="title title-submitted">Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 2</h1>
<div class="submitted">
<span class="author" itemprop="author">hannibal</span> - <time class="created-date" datetime="2017-03-19T12:03:00&#43;01:00">19 March, 2017</time>
</div>
</header>
<div class="content">
<h1 id="intro">Intro</h1>
<p>Hi folks.</p>
<p>Previously on this blog: <a href="https://skarlso.github.io/2017/03/16/building-furnace-part-1/">Part 1</a>, <a href="https://skarlso.github.io/2017/03/22/building-furnace-part-3/">Part 3</a>, <a href="https://skarlso.github.io/2017/04/16/building-furnace-part-4/">Part 4</a></p>
<p>In this part, I&rsquo;m going to talk about the AWS Go SDK and begin do dissect the intricacies of Furnace.</p>
<h1 id="aws-sdk">AWS SDK</h1>
<p>Fortunately, the Go SDK for AWS is quiet verbose and littered with examples of all sorts. But that doesn&rsquo;t make it less complex
and less cryptic at times. I&rsquo;m here to lift some of the early confusions, in hopes that I can help someone to avoid wasting time.</p>
<h2 id="getting-started-and-developers-guide">Getting Started and Developers Guide</h2>
<p>As always, and common from AWS, the documentation is top notch. There is a 141 pages long developer&rsquo;s guide on the SDK containing
a getting started section and an API reference. Go check it out. I&rsquo;ll wait. <a href="http://docs.aws.amazon.com/sdk-for-go/v1/developer-guide/aws-sdk-go-dg.pdf">AWS Go SDK DG PDF</a>. I will only talk about some gotchas and things I encountered, not the basics of the SDK.</p>
<h2 id="awsstring-and-other-types">aws.String and other types</h2>
<p>Something which is immediately visible once we take a look at the API is that everything is a pointer. Now, there are a
tremendous amount of discussions about this, but I&rsquo;m with Amazon. There are various reasons for it, but to list the most prominent
ones:
- Type completion and compile time type safety.
- Values for AWS API calls have valid zero values, in addition to being optional, i.e. not being provided at all.
- Other option, like, empty interfaces with maps, or using zero values, or struct wrappers around every type, made life much
harder rather than easier or not possible at all.
- The AWS API is volatile. You never know when something gets to be optional, or required. Pointers made that decision easy.</p>
<p>There are good number of other discussions around this topic, for example: <a href="https://github.com/aws/aws-sdk-go/issues/363">AWS Go GitHub #363</a>.</p>
<p>In order to use primitives, AWS has helper functions like <code>aws.String</code>. Because &amp;&ldquo;asdf&rdquo; is not allowed, you would have to create a
variable and use its address in situations where a string pointer is needed, for example, name of the stack. These primitive helpers will
make in-lining possible. We&rsquo;ll see later that they are used to a great extent. Pointers, however, make life a bit difficult when
constructing Input structs and make for poor aesthetics.</p>
<p>This is something I&rsquo;m returning in a test for stubbing a client call:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">		<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cloudformation</span>.<span style="color:#a6e22e">ListStackResourcesOutput</span>{
			<span style="color:#a6e22e">StackResourceSummaries</span>: []<span style="color:#f92672">*</span><span style="color:#a6e22e">cloudformation</span>.<span style="color:#a6e22e">StackResourceSummary</span>{
				{
					<span style="color:#a6e22e">ResourceType</span>:       <span style="color:#a6e22e">aws</span>.<span style="color:#a6e22e">String</span>(<span style="color:#e6db74">&#34;NoASG&#34;</span>),
					<span style="color:#a6e22e">PhysicalResourceId</span>: <span style="color:#a6e22e">aws</span>.<span style="color:#a6e22e">String</span>(<span style="color:#e6db74">&#34;arn::whatever&#34;</span>),
				},
			},
		}
</code></pre></div><p>This doesn&rsquo;t look so appealing, but one gets used to it quickly.</p>
<h2 id="error-handling">Error handling</h2>
<p>Errors also have their own types. An AWS error looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">awsErr</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">err</span>.(<span style="color:#a6e22e">awserr</span>.<span style="color:#a6e22e">Error</span>); <span style="color:#a6e22e">ok</span> {
    }
}
</code></pre></div><p>First, we check if error is nil, than we type check if the error is an AWS error or something different. In the wild, this will
look something like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">awsErr</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">err</span>.(<span style="color:#a6e22e">awserr</span>.<span style="color:#a6e22e">Error</span>); <span style="color:#a6e22e">ok</span> {
			<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">awsErr</span>.<span style="color:#a6e22e">Code</span>() <span style="color:#f92672">!=</span> <span style="color:#a6e22e">codedeploy</span>.<span style="color:#a6e22e">ErrCodeDeploymentGroupAlreadyExistsException</span> {
				<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">awsErr</span>.<span style="color:#a6e22e">Code</span>())
				<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
			}
			<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;DeploymentGroup already exists. Nothing to do.&#34;</span>)
			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
		}
		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
	}
</code></pre></div><p>If it&rsquo;s an AWS error, we can check further for the error code that it returns in order to identify what to handle, or what to throw
on to the caller to a potential fatal. Here, I&rsquo;m ignoring the AlreadyExistsException because, if it does, we just go on to a next
action.</p>
<h2 id="examples">Examples</h2>
<p>Luckily the API doc is very mature. In most of the cases, they provide an example to an API call. These examples, however, from
time to time provide more confusion than clarity. Take CloudFormation. For me, when I first glanced upon the
description of the API it wasn&rsquo;t immediately clear that the <code>TemplateBody</code> was supposed to be the whole template, and that
the rest of the fields were almost all optional settings. Or provided overrides in special cases.</p>
<p>And since the template is not an ordinary JAML or JSON file, I was looking for something that parses it into that the Struct I
was going to use. After some time, and digging, I realized that I didn&rsquo;t need that, and that I just need to read in the template,
define some extra parameters, and give the TemplateBody the whole of the template. The parameters defined by the CloudFormation
template where extracted for me by <code>ValidateTemplate</code> API call which returned all of them in a convenient
<code>[]*cloudformation.Parameter</code> slice. These things are not described in the document or visible from the examples. I mainly found
them through playing with the API and focused experimentation.</p>
<h2 id="waiters">Waiters</h2>
<p>From other SDK implementations, we got used to Waiters. These handy methods wait for a service to become available or for certain
situations to take in effect, like a Stage being <code>CREATE_COMPLETE</code>. The Go waiters, however, don&rsquo;t allow for callback to be fired,
or for running blocks, like the ruby SDK does. For this, I wrote a handy little waiter for myself, which outputs a spinner to see
that we are currently waiting for something and not frozen in time. This waiter looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// WaitForFunctionWithStatusOutput waits for a function to complete its action.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">WaitForFunctionWithStatusOutput</span>(<span style="color:#a6e22e">state</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">freq</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">f</span> <span style="color:#66d9ef">func</span>()) {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">wg</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">1</span>)
	<span style="color:#a6e22e">done</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">bool</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
		<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
		<span style="color:#a6e22e">f</span>()
		<span style="color:#a6e22e">done</span> <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">true</span>
	}()
	<span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
		<span style="color:#a6e22e">counter</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
		<span style="color:#66d9ef">for</span> {
			<span style="color:#a6e22e">counter</span> = (<span style="color:#a6e22e">counter</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">%</span> len(<span style="color:#a6e22e">Spinners</span>[<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">SPINNER</span>])
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;\r[%s] Waiting for state: %s&#34;</span>, <span style="color:#a6e22e">yellow</span>(string(<span style="color:#a6e22e">Spinners</span>[<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">SPINNER</span>][<span style="color:#a6e22e">counter</span>])), <span style="color:#a6e22e">red</span>(<span style="color:#a6e22e">state</span>))
			<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>(<span style="color:#a6e22e">freq</span>) <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
			<span style="color:#66d9ef">select</span> {
			<span style="color:#66d9ef">case</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">done</span>:
				<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>()
				<span style="color:#66d9ef">break</span>
			<span style="color:#66d9ef">default</span>:
			}
		}
	}()

	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>()
}
</code></pre></div><p>And I&rsquo;m calling it with the following method:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	<span style="color:#a6e22e">utils</span>.<span style="color:#a6e22e">WaitForFunctionWithStatusOutput</span>(<span style="color:#e6db74">&#34;DELETE_COMPLETE&#34;</span>, <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">WAITFREQUENCY</span>, <span style="color:#66d9ef">func</span>() {
		<span style="color:#a6e22e">cfClient</span>.<span style="color:#a6e22e">Client</span>.<span style="color:#a6e22e">WaitUntilStackDeleteComplete</span>(<span style="color:#a6e22e">describeStackInput</span>)
	})
</code></pre></div><p>This would output these lines to the console:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span><span style="color:#ae81ff">\]</span> Waiting <span style="color:#66d9ef">for</span> state: DELETE_COMPLETE
</code></pre></div><p>The spinner can be configured to be one of the following types:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Spinners</span> = []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">`←↖↑↗→↘↓↙`</span>,
	<span style="color:#e6db74">`▁▃▄▅▆▇█▇▆▅▄▃`</span>,
	<span style="color:#e6db74">`┤┘┴└├┌┬┐`</span>,
	<span style="color:#e6db74">`◰◳◲◱`</span>,
	<span style="color:#e6db74">`◴◷◶◵`</span>,
	<span style="color:#e6db74">`◐◓◑◒`</span>,
	<span style="color:#e6db74">`⣾⣽⣻⢿⡿⣟⣯⣷`</span>,
	<span style="color:#e6db74">`|/-\`</span>}
</code></pre></div><p>Handy.</p>
<p>And with that, let&rsquo;s dive into the basics of Furnace.</p>
<h1 id="furnace">Furnace</h1>
<h2 id="directory-structure-and-packages">Directory Structure and Packages</h2>
<p>Furnace is divided into three main packages.</p>
<h3 id="commands">commands</h3>
<p>Commands package is where the gist of Furnace lies. These commands represent the commands which are used through the CLI. Each
file has the implementation for one command. The structure is devised by this library: <a href="https://github.com/Yitsushi/go-commander">Yitsushi&rsquo;s Command Library</a>.
As of the writing of this post, the following commands are available:</p>
<ul>
<li>create - Creates a stack using the CloudFormation template file under ~/.config/go-furnace</li>
<li>delete - Deletes the created Stack. Doesn&rsquo;t do anything if the stack doesn&rsquo;t exist</li>
<li>push - Pushes an application to a stack</li>
<li>status - Displays information about the stack</li>
<li>delete-application - Deletes the CodeDeploy application and deployment group created by <code>push</code></li>
</ul>
<p>These commands represent the heart of furnace. I would like to keep these to a minimum, but I do plan on adding more, like
<code>update</code> and <code>rollout</code>. Further details and help messages on these commands can be obtained by running: <code>./furnace help</code> or
<code>./furnace help create</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">❯ ./furnace help push
Usage: furnace push appName <span style="color:#f92672">[</span>-s3<span style="color:#f92672">]</span>

Push a version of the application to a stack

Examples:
  furnace push
  furnace push appName
  furnace push appName -s3
  furnace push -s3
</code></pre></div><h3 id="config">config</h3>
<p>Contains the configuration loader and some project wide defaults which are as follows:</p>
<ul>
<li>Events for the plugin system - <code>pre-create</code>, <code>post-create</code>, <code>pre-delete</code>, <code>post-delete</code>.</li>
<li>CodeDeploy role name - <code>CodeDeployServiceRole</code>. This is used if none is provided to locate the CodeDeploy IAM role.</li>
<li>Wait frequency - Is the setting which controls how long the waiter should sleep in between status updates. Default is <code>1s</code>.</li>
<li>Spinner - Is just the number of the spinner to use.</li>
<li>Plugin registry - Is a map of functions to run for the above events.</li>
</ul>
<p>Further more, config loads the CloudFormation template and checks if some necessary settings are present in the environment, exp:
the configuration folder under <code>~/.config/go-furnace</code>.</p>
<h3 id="utils">utils</h3>
<p>These are some helper functions which are used throughout the project. To list them:</p>
<ul>
<li>error_handler - Is a simple error handler. I&rsquo;m thinking of refactoring this one to some saner version.</li>
<li>spinner - Sets up which spinner to use in the waiter function.</li>
<li>waiter - Contains the verbose waiter introduced above under <a href="##Waiters">Waiters</a>.</li>
</ul>
<h2 id="configuration-and-environment-variables">Configuration and Environment variables</h2>
<p>Furnace is a Go application, thus it doesn&rsquo;t have the luxury of Ruby or Python where the configuration files are usually bundled
with the app. But, it does have a standard for it. Usually, configurations reside in either of these two locations. Environment
Properties or|and configuration files under a fixed location ( i.e. HOME/.config/app-name ). Furnace employs both.</p>
<p>Settings like, region, stack name, enable plugin system, are under environment properties ( though this can change ), while the
CloudFormation template lives under <code>~/.config/go-furnace/</code>. Lastly it assumes some things, like the Deployment IAM role just
exists under the used AWS account. All these are loaded and handled by the config package described above.</p>
<h2 id="usage">Usage</h2>
<p>A typical scenario for Furnace would be the following:</p>
<ul>
<li>Setup your CloudFormation template or use the one provided. The one provided sets up a highly available and self healing setting
using Auto-Scaling and Load-Balancing with a single application instance. Edit this template to your liking than copy it to
<code>~/.config/go-furnace</code>.</li>
<li>Create the configured stack with <code>./furnace create</code>.</li>
<li>Create will ask for the parameters defined in the template. If defaults are setup, simply hitting enter will use these defaults.
Take note, that the provided template sets up SSH access via a provided key. If that key is not present in CF, you won&rsquo;t be able
to SSH into the created instance.</li>
<li>Once the stack is completed, the application is ready to be pushed. To do this, run: <code>./furnace push</code>. This will locate the
appropriate version of the app from S3 or GitHub and push that version to the instances in the Auto-Scaling group. To all of
them.</li>
</ul>
<h2 id="general-practices-applied-to-the-project">General Practices Applied to the Project</h2>
<h3 id="commands-1">Commands</h3>
<p>For each command the main entry point is the <code>execute</code> function. These functions are usually calling out the small chunks of
distributed methods. Logic was kept to a bare minimum ( probably could be simplified even further ) in the execute functions
mostly for testability and the likes. We will see that in a followup post.</p>
<h3 id="errors">Errors</h3>
<p>Errors are handled immediately and usually through a fatal. If any error occurs than the application is halted. In followup
versions this might become more granular. I.e. don&rsquo;t immediately stop the world, maybe try to recover, or create a Poller or
Re-Tryer, which tries a call again for a configured amount of times.</p>
<h3 id="output-colors">Output colors</h3>
<p>Not that important, but still&hellip; Aesthetics. Displaying data to the console in a nice way gives it some extra flare.</p>
<h3 id="makefile">Makefile</h3>
<p>This project works with a Makefile for various reasons. Later on, once the project might become more complex, a Makefile makes it
really easy to handle different ways of packaging the application. Currently, for example, it provides a <code>linux</code> target which will
make Go build the project for Linux architecture on any other Architecture i.e. cross-compiling.</p>
<p>It also provides an easy way to run unit tests with <code>make test</code> and installing with <code>make &amp;&amp; make install</code>.</p>
<h1 id="closing-words">Closing Words</h1>
<p>That is all for Part 2. Join me in Part 3 where I will talk about the experimental Plugin system that Furnace employs.</p>
<p>Thank you for reading!
Gergely.</p>


</div>
</article>
</main>


<aside class="sidebar layout__second-sidebar">
<section>
<h4 class="menu"><a href="/blog/" class="active" aria-current="page">Blog</a></h4>
<ul class="menu">
<li><a href="/2021/05/25/blog-refactor/">Blog refactor</a></li>
<li><a href="/2021/04/21/readers-digest/">Reader&#39;s Digest 2021-04</a></li>
<li><a href="/2021/03/23/readers-digest/">Reader&#39;s Digest 2021-03</a></li>
<li><a href="/2021/02/01/readers-digest/">Reader&#39;s Digest 2021-01</a></li>
<li><a href="/2020/07/23/kubernetes-deploy-golang-react-apps-separately-part1/">How to deploy a Go (Golang) backend with a React frontend separately on Kubernetes - Part One</a></li>
<li><a href="/2020/05/11/good-code-reviews/">How to do a good code review</a></li>
<li><a href="/2020/02/17/making-spa-refresh-work-with-go-backend/">How to Make SPA refresh work with a Go backend</a></li>
<li><a href="/2019/10/15/kubernetes-cluster-part2/">Using a Kubernetes based Cluster for Various Services with auto HTTPS - Part 2</a></li>
<li><a href="/2019/10/10/practical-go-summary/">Summary of Practical Go workshop from Dave Cheney</a></li>
<li><a href="/2019/10/01/killing-kubernetes-cluster/">How I killed my entire Kubernetes cluster</a></li>
<li><a href="/2019/09/21/kubernetes-cluster/">Using a Kubernetes based Cluster for Various Services with auto HTTPS</a></li>
<li><a href="/2019/09/19/updated-face-recog-drawing/">Updated Face-recog architecture drawing</a></li>
<li><a href="/2019/04/21/efferent-and-afferent-metrics-in-go/">Efferent and Afferent metrics in Go</a></li>
<li><a href="/2019/04/12/living-with-a-parser/">Living with a new Parser for a year</a></li>
<li><a href="/2019/03/19/deploy-hugo-blog-github-actions/">Deploy a Hugo Blog Github Actions</a></li>
<li><a href="/2019/03/19/cronohub/">Cronohub: Archive from anywhere to anywhere</a></li>
<li><a href="/2019/03/18/hugo-blog-with-travis-deployment/">Deploy a Hugo Blog with Travis on Git Push</a></li>
<li><a href="/2019/02/17/go-ssh-with-host-key-verification/">Go SSH with Host Key Verification</a></li>
<li><a href="/2018/10/29/go-plugin-tutorial/">Extensive tutorial on go-plugin.</a></li>
<li><a href="/2018/09/17/furnace-plugin-update/">Furnace with a new Plugin System</a></li>
<li><a href="/2018/09/13/gotp/">TOTP generator with account handling for multiple tokens</a></li>
<li><a href="/2018/06/08/fork-updater/">Keep your git forks updated all the time</a></li>
<li><a href="/2018/03/15/kubernetes-distributed-application/">Kubernetes distributed application deployment with sample Face Recognition App</a></li>
<li><a href="/2018/02/06/go-budapest-meetup/">Go Budapest Meetup</a></li>
<li><a href="/2018/01/23/nginx-certbot-ansible/">Ansible &#43; Nginx &#43; LetsEncrypt &#43; Wiki &#43; Nagios</a></li>
<li><a href="/2018/01/13/furnace-massive-update/">Huge Furnace Update</a></li>
<li><a href="/2017/12/04/commit-build-deploy/">Commit-Build-Deploy With AWS CodeBuild and Lambda</a></li>
<li><a href="/2017/11/06/furnace-ikea-manual/">Furnace Ikea Manual</a></li>
<li><a href="/2017/09/03/furnace-binaries/">Furnace Binaries</a></li>
<li><a href="/2017/05/31/notetaking/">Notetaking</a></li>
<li><a href="/2017/05/28/replace-eval-with-object-send-and-a-parser/">Replacing Eval with Object.send and a self written Parser</a></li>
<li><a href="/2017/04/16/building-furnace-part-4/">Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 4</a></li>
<li><a href="/2017/03/22/building-furnace-part-3/">Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 3</a></li>
<li><a href="/2017/03/19/building-furnace-part-2/" class="active" aria-current="page">Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 2</a></li>
<li><a href="/2017/03/17/test-new-hugo/">Testing new Hugo if posts are generated properly</a></li>
<li><a href="/2017/03/16/building-furnace-part-1/">Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 1</a></li>
<li><a href="/2017/03/03/images-on-old-posts/">Images on older posts</a></li>
<li><a href="/2017/02/15/how-to-https-with-hugo-letsencrypt-haproxy/">How to HTTPS with Hugo LetsEncrypt and HAProxy</a></li>
<li><a href="/2016/11/02/google-signin-with-go-part2/">How to do Google Sign-In with Go - Part 2</a></li>
<li><a href="/2016/10/06/rscrap-ruby-scraping-with-cronjob-scripts/">RScrap scraper</a></li>
<li><a href="/2016/09/17/simple-hometheater-with-remote-and-flirc/">Budget Home Theather with a Headless Raspberry Pi and Flirc for Remote Controlling</a></li>
<li><a href="/2016/08/19/always-go-with-bytes/">Always Go with []byte</a></li>
<li><a href="/2016/08/16/never-changing-regex/">Global variable for never changing regex</a></li>
<li><a href="/2016/08/13/drupal-missing-toolbar-and-settings-not-saving/">Drupal missing ToolBar and settings not saving</a></li>
<li><a href="/2016/07/28/jenkins-best-practices/">Jenkins Best Practices Talk</a></li>
<li><a href="/2016/07/12/ruby-sieve/">Ruby Sieve</a></li>
<li><a href="/2016/07/12/simple-hook-to-rid-of-trouble/">Simple hook to rid of trouble</a></li>
<li><a href="/2016/06/12/google-signin-with-go/">How to do Google sign-in with Go</a></li>
<li><a href="/2016/04/17/minecraft-server-aws-s3-backup-part2/">Minecraft world automatic backup to AWS S3 bucket - Part 2 (Custom functions)</a></li>
<li><a href="/2016/04/16/minecraft-server-aws-s3-backup/">Minecraft world automatic backup to AWS S3 bucket</a></li>
<li><a href="/2016/03/29/minecraft-server-with-docker-and-osx/">Minecraft Server with Docker on OSX &#43; Mods</a></li>
<li><a href="/2016/03/09/wercker-fixed/">Wercker Fixed</a></li>
<li><a href="/2016/03/04/wercker-test-2/">Wercker Test</a></li>
<li><a href="/2016/02/10/hugo-autodeploy-with-wercker/">Hugo Autodeploy with Wercker and Github - Pages</a></li>
<li><a href="/2016/02/10/wercker-test/">Wercker Test</a></li>
<li><a href="/2016/02/02/doing-cors-in-go-with-gin-and-json/">Doing CORS in Go with Gin and JSON</a></li>
<li><a href="/2016/01/22/my-journey-in-advent-of-code/">My Journey in advent of code</a></li>
<li><a href="/2016/01/05/improving-performance-with-byte-slice-and-int-map/">Improving performance with byte slice and int map</a></li>
<li><a href="/2016/01/01/byte-arrays-and-channels/">Byte arrays and Channels</a></li>
<li><a href="/2015/12/29/use-byte-array-instead-of-strings/">Use Byte Array Instead of Strings</a></li>
<li><a href="/2015/12/29/use-byte-slice-instead-of-strings/">Use Byte Slice Instead of Strings</a></li>
<li><a href="/2015/12/23/recursive-freq-count/">Recursive Letter Frequency Count</a></li>
<li><a href="/2015/12/08/go-development-environment/">Go Development Environment</a></li>
<li><a href="/2015/12/07/welcome-to-my-new-blog/">Welcome To My New Blog</a></li>
<li><a href="/2015/11/20/go-jira-api-client/">Go JIRA API client</a></li>
<li><a href="/2015/11/15/the-one-hundred-day-github-challenge/">The One Hundred Day GitHub Challenge</a></li>
<li><a href="/2015/11/09/go-progress-quest/">Go Progress Quest</a></li>
<li><a href="/2015/10/26/kill-a-program-on-connecting-to-a-specific-wifi-osx/">Kill a Program on Connecting to a specific WiFi – OSX</a></li>
<li><a href="/2015/10/15/circular-buffer-in-go/">Circular buffer in Go</a></li>
<li><a href="/2015/10/15/jenkins-job-dsl-and-groovy-goodness/">Jenkins Job DSL and Groovy goodness</a></li>
<li><a href="/2015/10/04/datamunger-kata-with-go/">DataMunger Kata with Go</a></li>
<li><a href="/2015/10/02/how-to-aggregate-tests-with-jenkins-with-aggregate-plugin-on-non-relating-jobs/">How to Aggregate Tests with Jenkins with Aggregate Plugin on non-relating jobs</a></li>
<li><a href="/2015/09/07/i-used-to-have-great-ideas-on-the-toilet-but-i-no-longer-do/">I used to have great ideas on the toilet, but I no longer do.</a></li>
<li><a href="/2015/07/30/sieve-of-eratosthenes-in-go/">Sieve of Eratosthenes in Go</a></li>
<li><a href="/2015/07/22/quick-tip-for-debugging-headless-locally/">Quick Tip for Debugging Headless Locally</a></li>
<li><a href="/2015/07/19/converting-numbers-into-string-representations/">Converting numbers into string representations</a></li>
<li><a href="/2015/07/16/selenium-testing-with-packer-and-vagrant/">Selenium Testing with Packer and Vagrant</a></li>
<li><a href="/2015/07/15/bitwise-operator/">Bitwise &amp; Operator</a></li>
<li><a href="/2015/07/01/packer-0-8-1/">Packer 0.8.1.</a></li>
<li><a href="/2015/06/30/powershell-can-also-be-nice-or-installing-java-silently-and-waiting/">Powershell can also be nice -Or Installing Java silently and waiting</a></li>
<li><a href="/2015/06/27/the-packer-the-windows-and-the-vagrant-box/">The Packer, The Windows, and the Vagrant box</a></li>
<li><a href="/2015/06/06/docker-ruby-lotus-go-cd/">Docker &#43; Java &#43; Vagrant&#43; GO.CD</a></li>
<li><a href="/2015/05/21/setting-up-a-new-laptop-with-puppet/">Setting up a new Laptop with Puppet</a></li>
<li><a href="/2015/05/19/busy-building-the-future/">Busy building the future</a></li>
<li><a href="/2015/04/21/django-rpg-part-3/">Django – RPG – Part 3</a></li>
<li><a href="/2015/04/12/django-rpg-part-2/">Django – RPG – Part 2</a></li>
<li><a href="/2015/04/10/django-rpg-2/">Django – RPG – Part 1</a></li>
<li><a href="/2015/04/10/small-python-gui-to-calculate-lever-distance/">Small Python GUI to Calculate Lever Distance</a></li>
<li><a href="/2015/03/15/python-and-my-math-commitment/">Python and my Math commitment</a></li>
<li><a href="/2015/03/02/sphere-judge-online-python-kivy-android-app-part-2/">Sphere Judge Online – Python Kivy Android app – Part 2</a></li>
<li><a href="/2015/02/26/sphere-judge-online-python-kivy-android-app/">Sphere Judge Online – Python Kivy Android app</a></li>
<li><a href="/2015/02/08/why-lock-picking-is-like-testing/">Why Lock Picking is like Testing</a></li>
<li><a href="/2015/02/01/building-an-rpg-app-with-meteor-part-one-the-struggle/">Building an RPG App with Meteor – Part One – The struggle</a></li>
<li><a href="/2015/01/29/javascript-web-framework-meteor/">JavaScript Web Framework – Meteor</a></li>
<li><a href="/2015/01/28/when-cucumber-goes-wrong/">When cucumber goes wrong</a></li>
<li><a href="/2015/01/27/from-zero-to-hundred-in-four-seconds/">From Zero to Hundred in Four seconds</a></li>
<li><a href="/2015/01/26/why-testers-are-like-scientists/">Why Testers are, like scientists</a></li>
<li><a href="/2014/11/15/why-the-expressiveness-of-your-tests-is-important-part-one/">Why the expressiveness of your Tests is important – Part One</a></li>
<li><a href="/2014/11/07/updating-all-jenkins-jobs-via-jenkins-api-python/">Updating All Jenkins Jobs Via Jenkins API – Python</a></li>
<li><a href="/2014/10/23/the-seven-guidelines-of-context-driven-testing/">The seven Principles of Context Driven Testing – Mind Map</a></li>
<li><a href="/2014/08/25/python-course-review/">Python Course Review</a></li>
<li><a href="/2014/05/31/five-reasons-why-a-tester-should-learn-sql/">Five reasons why a tester should learn SQL</a></li>
<li><a href="/2014/05/26/tdd-is-dead-not-really/">TDD is Dead – Not really</a></li>
<li><a href="/2014/05/23/five-reasons-why-a-front-end-tester-should-learn-javascript/">Five reasons why a front-end tester should learn Javascript</a></li>
<li><a href="/2014/05/20/note-taking-what-when-how-often/">Note taking what when how often</a></li>
<li><a href="/2014/05/18/using-chrome-search-engine-multiple-search-params/">Using Chrome Search Engine – Multiple Search Params</a></li>
<li><a href="/2014/05/16/how-i-started-running/">How I started Running</a></li>
<li><a href="/2014/04/13/how-the-past-influences-the-present/">How the past influences the present</a></li>
<li><a href="/2014/02/19/example-when-to-use-the-strategy-pattern/">Example when to use the Strategy Pattern</a></li>
<li><a href="/2014/02/13/how-to-write-a-blog-why-long-posts-rarely-work/">How to write a blog – Why long posts rarely work</a></li>
<li><a href="/2014/02/11/how-to-check-content-header-on-unknown-number-of-items-python/">How to check content header on unknown number of items – Python</a></li>
<li><a href="/2014/02/11/the-method-of-loci-and-how-it-works-for-me/">The method of Loci and how it works for me</a></li>
<li><a href="/2014/02/10/why-you-should-learn-using-vim/">Why you should learn using Vim</a></li>
<li><a href="/2014/02/09/why-does-it-matter-if-i-sit-in-an-office-or-in-a-park/">Why does it matter if I sit in an office or in a park</a></li>
<li><a href="/2014/02/04/how-i-recruit-why-tool-requirements-are-stupid/">How I recruit – Why tool requirements are stupid</a></li>
<li><a href="/2013/11/02/why-you-should-care-about-the-quality-of-your-test-code/">Why you should care about the quality of your test code</a></li>
<li><a href="/2013/10/11/diary-of-a-bit/">Diary of a Bit</a></li>
<li><a href="/2013/08/26/low-tech-why-having-less-will-fell-more/">Low Tech – Why having less will fell more</a></li>
<li><a href="/2013/07/31/why-not-to-automate-everything/">Why not to automate everything…</a></li>
<li><a href="/2013/06/24/sublime-text-5/">Sublime text</a></li>
<li><a href="/2013/04/18/cucumber-jvm-and-afterall/">Cucumber-Jvm And @AfterAll</a></li>
<li><a href="/2013/04/15/cucumber-test-name-and-tags-on-feature/">Cucumber Test Name and Tags on Feature</a></li>
<li><a href="/2013/04/11/groovy-and-grails-course-summary/">Groovy and Grails course summary</a></li>
<li><a href="/2013/04/11/my-history-in-testing/">My history in testing</a></li>
<li><a href="/2013/01/31/its-all-about-human-interaction/">It’s all about human interaction.</a></li>
<li><a href="/2013/01/21/what-you-really-need-to-become-a-testing-expert/">What you really need to know to become a Testing Expert</a></li>
<li><a href="/2013/01/04/from-chaos-there-shall-be-order/">From Chaos There Shall Be Order</a></li>
<li><a href="/2012/12/12/methodologies-thought-patterns-lies/">Methodologies, Thought Patterns, Lies</a></li>
<li><a href="/2012/12/01/teas-testing-exploration-adventure-session/">TEAS: Testing Exploration Adventure Session</a></li>
<li><a href="/2012/10/09/how-to-eliminate-a-parameter-boom/">How to eliminate a parameter boom</a></li>
<li><a href="/2012/09/30/89/">Coderetreat London</a></li>
<li><a href="/2012/09/20/what-my-brain-is-up-to-the-whole-day/">What my brain is up to the whole day…</a></li>
<li><a href="/2012/09/09/learning-programming-with-a-visual-mind/">Learning programming with a visual mind</a></li>
<li><a href="/2012/07/12/tdd-and-game-of-life/">TDD and Game of Life</a></li>
<li><a href="/2012/06/28/journey-into-an-unknown-system/">Journey into an unknown system</a></li>
<li><a href="/2012/06/26/solution-to-wrap-kata/">Solution to Wrap Kata</a></li>
<li><a href="/2012/06/18/how-to-read-a-professional-book-for-slow-learners/">How to read a professional book for slow learners</a></li>
<li><a href="/2012/06/13/dont-throw-exception/">Don’t throw Exception</a></li>
<li><a href="/2012/06/13/how-to-write-a-professional-blog/">How to write a professional blog</a></li>
<li><a href="/2012/06/13/making-your-code-understandable/">Making your code understandable</a></li>
<li><a href="/2012/04/11/getting-dual-card-to-work-on-ubuntu-12-04/">Getting Dual Card to work on Ubuntu 12.04.</a></li>
<li><a href="/2012/03/04/jms-connection-setup-and-framework/">JMS Connection setup and Framework</a></li>
<li><a href="/2012/02/27/configuration/">Configuration</a></li>
<li><a href="/2012/02/26/hello-and-welcome/">Hello and welcome</a></li>
<li><a href="/2012/02/26/testing-code-tag/">Testing ‘code’ tag.</a></li>
</ul>
</section>
</aside>
<footer class="footer layout__footer">
<p><!-- raw HTML omitted --></p>
<p>Powered by <a href="https://gohugo.io/">Hugo</a> and the <a href="https://github.com/frjo/hugo-theme-zen">Zen theme</a>.</p>

</footer>
</div>
<div class="mobile-nav" dir="ltr">
  <div class="mobile-nav__cover"></div>
  <a href="#navigation" class="mobile-nav__toggle" aria-haspopup="true" role="button">Menu</a>
  <div class="mobile-nav__sheet">
    <div class="mobile-nav__region">
    
    </div>
    <nav class="mobile-nav__main-menu">
    <h2 class="visually-hidden">Main menu</h2>
    <ul class="mobile-nav__navbar">
    <li><a href="/">Home</a></li>
    <li><a href="/blog/" class="active" aria-current="page">Blog</a></li>
    </ul>
    </nav>
  </div>
</div>
</body>
</html>
