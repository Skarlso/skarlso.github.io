<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>JMS Connection setup and Framework | Ramblings of a cloud engineer</title>
<meta name="keywords" content="factory, java, pattern, service">
<meta name="description" content="Hello chumps.
Today I want to write about jms connection testing with a small framework. I wrote a small thing using a factory object model. It&rsquo;s a lead, a proof of concept. You can use this to go onward.
First, let&rsquo;s begin with the JMS connection it self.
JMS Connection
First rule of thumb is: &ldquo;Don&rsquo;t wait for a response when dealing with JMS queues.&rdquo; How so? Because, a JMS queue is asynchronous so you wont get back anything.">
<meta name="author" content="hannibal">
<link rel="canonical" href="https://skarlso.github.io/2012/03/04/jms-connection-setup-and-framework/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css" integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe&#43;FVUFzPh7U=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://skarlso.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://skarlso.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://skarlso.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://skarlso.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://skarlso.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="JMS Connection setup and Framework" />
<meta property="og:description" content="Hello chumps.
Today I want to write about jms connection testing with a small framework. I wrote a small thing using a factory object model. It&rsquo;s a lead, a proof of concept. You can use this to go onward.
First, let&rsquo;s begin with the JMS connection it self.
JMS Connection
First rule of thumb is: &ldquo;Don&rsquo;t wait for a response when dealing with JMS queues.&rdquo; How so? Because, a JMS queue is asynchronous so you wont get back anything." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://skarlso.github.io/2012/03/04/jms-connection-setup-and-framework/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-03-04T00:00:00+00:00" />
<meta property="article:modified_time" content="2012-03-04T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="JMS Connection setup and Framework"/>
<meta name="twitter:description" content="Hello chumps.
Today I want to write about jms connection testing with a small framework. I wrote a small thing using a factory object model. It&rsquo;s a lead, a proof of concept. You can use this to go onward.
First, let&rsquo;s begin with the JMS connection it self.
JMS Connection
First rule of thumb is: &ldquo;Don&rsquo;t wait for a response when dealing with JMS queues.&rdquo; How so? Because, a JMS queue is asynchronous so you wont get back anything."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://skarlso.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "JMS Connection setup and Framework",
      "item": "https://skarlso.github.io/2012/03/04/jms-connection-setup-and-framework/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "JMS Connection setup and Framework",
  "name": "JMS Connection setup and Framework",
  "description": "Hello chumps.\nToday I want to write about jms connection testing with a small framework. I wrote a small thing using a factory object model. It\u0026rsquo;s a lead, a proof of concept. You can use this to go onward.\nFirst, let\u0026rsquo;s begin with the JMS connection it self.\nJMS Connection\nFirst rule of thumb is: \u0026ldquo;Don\u0026rsquo;t wait for a response when dealing with JMS queues.\u0026rdquo; How so? Because, a JMS queue is asynchronous so you wont get back anything.",
  "keywords": [
    "factory", "java", "pattern", "service"
  ],
  "articleBody": "Hello chumps.\nToday I want to write about jms connection testing with a small framework. I wrote a small thing using a factory object model. It’s a lead, a proof of concept. You can use this to go onward.\nFirst, let’s begin with the JMS connection it self.\nJMS Connection\nFirst rule of thumb is: “Don’t wait for a response when dealing with JMS queues.” How so? Because, a JMS queue is asynchronous so you wont get back anything. There are however two ways of checking if it was a success or not.\n1: Check your database. The service you are trying out probably records something in the database, right? Check it. You can use a simple JDBC connection, or a Postgres connection or whatever your choice of database is.\n2: You can monitor use the log of your choice of service provider. If there is an exception the moment you send something, you can be sure it is received. Just the format is not correct. This is of course based on how your service handles exceptions.\nSo let’s get down to business.\nFirst, there is a really good article on how to create a JMS connection.\nThis is the link for it: Simple Guide to Java message service JMS using ActiveMQ\nItt will tell you everything you need to know about creating a connection and waiting for a response.\nI will tell you now how to use this information in a real live environment.\nIn a real environment you will be using a queue which has certain settings that will not allow you to “join” it, or creating it. And you need to get the name of the queue and certain settings, like the destination URL.\nFirst, the tool you are going to use is called JConsole. JConsole is a tool to monitor applications. It’s tool to monitor the JVM. I wont go into details about it since there are numerous descriptions about it. It is part of the java installation.\nSo after firing it up and giving it a connection url which would look like this: ‘service:jmx:rmi:///jndi/rmi://hostName:portNum/jmxrmi’, you would go ahead and search on the TAB:Threads.\nLook for a Thread that is labelled like this: Transport Server: tcp://0.0.0.0: This will be your destination url.\nIn the blog the guy is using ActiveMQ. It’s your best guess. It’s lightweight, it’s fast it’s easy. Go for it.\nSo your Destination would look like this:\nConnectionFactory connectionFactory = new ActiveMQConnectionFactory(\"://tcp://0.0.0.0:\"); Connection connection = connectionFactory.createConnection(); connection.start(); After that you will need the queue name which you can get as easy as this. Go to the TAB MBeans. There you can see, if you are using ActiveMQ, you will see something like this : org.active.activemq. Open this up and you will see under localhost a number of queues that your server has configured. Open up one of them and copy the queue name in the createQueue.\nUse it like this:\nDestination destination = session.createQueue(\"\"); Of course if your service is configured properly you wont have any access to it. Use the connection like this:\nconnection = connectionFactory.createConnection(\"username\", \"password\"); You will have now logged in with the proper user.\nNow you can send the message. You have everything configured.\nFramework\nLet’s speak about the framework you will need to properly use this technology.\nOne of the paradigms for programming is design to interfaces. If you need a proper working framework, your ave to design with the mind set to changing pieces of code. Thinking about what would change the most. Your connection settings. You want a framework which can use any kind of connection. Not just JMS but whatever connection you would like. It could be a synchronous one. Or a database one. Or a JMS. Doesn’t matter. You are only interested in a message sent or a connection, or whatever you want.\nSo let’s get to it.\nInterface:\npublic interface IConnection { void sendMessage(); } This is sample connection interface. You could have numerous templates here.\nYou will be using an object factory pattern here. Your implementer will be taken for a Java Property file. But it can be taken from whatever configuration you like. XML maybe, or a database even.\nLet’s see you connection factory:\npublic class ConnFactory { static Logger logger = new Logger(); public static IConnection getImplementer() { Properties prop = new Properties(); try { prop.load(new FileInputStream(\"conf/implementer.property\")); } catch (IOException io) { logger.Log(\"Could not find property file: \" + io.getMessage()); } String implementerClass = prop.getProperty(\"implementer\"); Class\u003c?\u003e iConnect = null; try { iConnect = Class.forName(implementerClass); } catch (ClassNotFoundException ce) { logger.Log(\"Class could not be found: \" + ce.getMessage()); } IConnection connection = null; try { connection = (IConnection) iConnect.newInstance(); } catch (IllegalAccessException ie) { logger.Log(\"Illegal access excpetion: \" + ie.getMessage()); } catch (InstantiationException e) { logger.Log(\"Instatiation exception occured. \" + e.getMessage()); } return connection; } } Easy enough, right? Class.forname will instantiate the class name you have in the property file. This could be something like this: com.packagename.ClassName. Doesn’t matter to you. You can add some typeof checks, or instanceof checks, whatever you like. Or you can use generics.\nLet’s get to the concrete implementation:\npublic class JMSConnectionImpl implements IConnection { Logger logger = new Logger(); public void sendMessage() { Connection connection = null; . . . finally { connection.close(); } } } Simple enough. Here you have a concrete implementation of your collection and your sender class.\nAnd the simple usage facility of this is. simple too:\nIConnection iConnection = ConnFactory.getImplementer(); iConnection.sendMessage(); Simple enough too, right? So what happens here? You have a factory that will give you back any kind of implementation you are writing in you property file. You don’t care what the implementation is in your test. You don’t care what it’s name is. You don’t care what it’s result is. Okay, you care about the result, but that’s another history since you will check that elsewhere.\nThere you go. If any question occurs, please don’t hesitate to ask.\nThanks for reading!\n",
  "wordCount" : "996",
  "inLanguage": "en",
  "datePublished": "2012-03-04T00:00:00Z",
  "dateModified": "2012-03-04T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "hannibal"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://skarlso.github.io/2012/03/04/jms-connection-setup-and-framework/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Ramblings of a cloud engineer",
    "logo": {
      "@type": "ImageObject",
      "url": "https://skarlso.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://skarlso.github.io" accesskey="h" title="Ramblings of a cloud engineer (Alt + H)">Ramblings of a cloud engineer</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://skarlso.github.io/posts/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://skarlso.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://skarlso.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      JMS Connection setup and Framework
    </h1>
    <div class="post-meta"><span title='2012-03-04 00:00:00 +0000 UTC'>March 4, 2012</span>&nbsp;·&nbsp;hannibal

</div>
  </header> 
  <div class="post-content"><p>Hello chumps.</p>
<p>Today I want to write about jms connection testing with a small framework. I wrote a small thing using a factory object model. It&rsquo;s a lead, a proof of concept. You can use this to go onward.</p>
<p>First, let&rsquo;s begin with the JMS connection it self.</p>
<p><strong>JMS Connection</strong></p>
<p>First rule of thumb is: &ldquo;Don&rsquo;t wait for a response when dealing with JMS queues.&rdquo; How so? Because, a JMS queue is asynchronous so you wont get back anything. There are however two ways of checking if it was a success or not.</p>
<p>1: Check your database. The service you are trying out probably records something in the database, right? Check it. You can use a simple JDBC connection, or a Postgres connection or whatever your choice of database is.</p>
<p>2: You can monitor use the log of your choice of service provider. If there is an exception the moment you send something, you can be sure it is received. Just the format is not correct. This is of course based on how your service handles exceptions.</p>
<p>So let&rsquo;s get down to business.</p>
<p>First, there is a really good article on how to create a JMS connection.</p>
<p>This is the link for it: <a href="http://www.javablogging.com/simple-guide-to-java-message-service-jms-using-activemq" title="Simple JMS How To">Simple Guide to Java message service JMS using ActiveMQ</a></p>
<p>Itt will tell you everything you need to know about creating a connection and waiting for a response.</p>
<p>I will tell you now how to use this information in a real live environment.</p>
<p>In a real environment you will be using a queue which has certain settings that will not allow you to &ldquo;join&rdquo; it, or creating it. And you need to get the name of the queue and certain settings, like the destination URL.</p>
<p>First, the tool you are going to use is called JConsole. JConsole is a tool to monitor applications. It&rsquo;s tool to monitor the JVM. I wont go into details about it since there are numerous descriptions about it. It is part of the java installation.</p>
<p>So after firing it up and giving it a connection url which would look like this: &lsquo;service:jmx:rmi:///jndi/rmi://hostName:portNum/jmxrmi&rsquo;, you would go ahead and search on the TAB:<strong>Threads</strong>.</p>
<p>Look for a Thread that is labelled like this: <YourConnectionLayer> Transport Server: tcp://0.0.0.0: <port></p>
<p>This will be your destination url.</p>
<p>In the blog the guy is using ActiveMQ. It&rsquo;s your best guess. It&rsquo;s lightweight, it&rsquo;s fast it&rsquo;s easy. Go for it.</p>
<p>So your Destination would look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    ConnectionFactory connectionFactory <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> ActiveMQConnectionFactory<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;yourserviceparameter&gt;://tcp://0.0.0.0:&lt;port&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    Connection connection <span style="color:#f92672">=</span> connectionFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>    connection<span style="color:#f92672">.</span><span style="color:#a6e22e">start</span><span style="color:#f92672">();</span>
</span></span></code></pre></div><p>After that you will need the queue name which you can get as easy as this. Go to the TAB <strong>MBeans</strong>. There you can see, if you are using ActiveMQ, you will see something like this : org.active.activemq. Open this up and you will see under localhost a number of queues that your server has configured. Open up one of them and copy the queue name in the createQueue.</p>
<p>Use it like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    Destination destination <span style="color:#f92672">=</span> session<span style="color:#f92672">.</span><span style="color:#a6e22e">createQueue</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&lt;queue name&gt;&#34;</span><span style="color:#f92672">);</span>
</span></span></code></pre></div><p>Of course if your service is configured properly you wont have any access to it. Use the connection like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    connection <span style="color:#f92672">=</span> connectionFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">createConnection</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;username&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;password&#34;</span><span style="color:#f92672">);</span>
</span></span></code></pre></div><p>You will have now logged in with the proper user.</p>
<p>Now you can send the message. You have everything configured.</p>
<p><strong>Framework</strong></p>
<p>Let&rsquo;s speak about the framework you will need to properly use this technology.</p>
<p>One of the paradigms for programming is design to interfaces. If you need a proper working framework, your ave to design with the mind set to changing pieces of code. Thinking about what would change the most. Your connection settings. You want a framework which can use any kind of connection. Not just JMS but whatever connection you would like. It could be a synchronous one. Or a database one. Or a JMS. Doesn&rsquo;t matter. You are only interested in a message sent or a connection, or whatever you want.</p>
<p>So let&rsquo;s get to it.</p>
<p>Interface:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">IConnection</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sendMessage</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>This is sample connection interface. You could have numerous templates here.</p>
<p>You will be using an object factory pattern here. Your implementer will be taken for a Java Property file. But it can be taken from whatever configuration you like. XML maybe, or a database even.</p>
<p>Let&rsquo;s see you connection factory:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ConnFactory</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> Logger logger <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Logger<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IConnection <span style="color:#a6e22e">getImplementer</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		Properties prop <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Properties<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">try</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>			prop<span style="color:#f92672">.</span><span style="color:#a6e22e">load</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileInputStream<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;conf/implementer.property&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>IOException io<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>			logger<span style="color:#f92672">.</span><span style="color:#a6e22e">Log</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Could not find property file: &#34;</span> <span style="color:#f92672">+</span> io<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		String implementerClass <span style="color:#f92672">=</span> prop<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;implementer&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		Class<span style="color:#f92672">&lt;?&gt;</span> iConnect <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">try</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>			iConnect <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span>implementerClass<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>ClassNotFoundException ce<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>			logger<span style="color:#f92672">.</span><span style="color:#a6e22e">Log</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Class could not be found: &#34;</span> <span style="color:#f92672">+</span> ce<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		IConnection connection <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">try</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>			connection <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>IConnection<span style="color:#f92672">)</span> iConnect<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>IllegalAccessException ie<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>			logger<span style="color:#f92672">.</span><span style="color:#a6e22e">Log</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Illegal access excpetion: &#34;</span> <span style="color:#f92672">+</span> ie<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>InstantiationException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			logger<span style="color:#f92672">.</span><span style="color:#a6e22e">Log</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Instatiation exception occured. &#34;</span> <span style="color:#f92672">+</span> e<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> connection<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Easy enough, right? Class.forname will instantiate the class name you have in the property file. This could be something like this: com.packagename.ClassName. Doesn&rsquo;t matter to you. You can add some typeof checks, or instanceof checks, whatever you like. Or you can use <Type> generics.</p>
<p>Let&rsquo;s get to the concrete implementation:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">JMSConnectionImpl</span> <span style="color:#66d9ef">implements</span> IConnection <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    Logger logger <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Logger<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sendMessage</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   	Connection connection <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">finally</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            connection<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Simple enough. Here you have a concrete implementation of your collection and your sender class.</p>
<p>And the simple usage facility of this is. simple too:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    IConnection iConnection <span style="color:#f92672">=</span> ConnFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">getImplementer</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    iConnection<span style="color:#f92672">.</span><span style="color:#a6e22e">sendMessage</span><span style="color:#f92672">();</span>
</span></span></code></pre></div><p>Simple enough too, right? So what happens here? You have a factory that will give you back any kind of implementation you are writing in you property file. You don&rsquo;t care what the implementation is in your test. You don&rsquo;t care what it&rsquo;s name is. You don&rsquo;t care what it&rsquo;s result is. Okay, you care about the result, but that&rsquo;s another history since you will check that elsewhere.</p>
<p>There you go. If any question occurs, please don&rsquo;t hesitate to ask.</p>
<p>Thanks for reading!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://skarlso.github.io/tags/factory/">factory</a></li>
      <li><a href="https://skarlso.github.io/tags/java/">java</a></li>
      <li><a href="https://skarlso.github.io/tags/pattern/">pattern</a></li>
      <li><a href="https://skarlso.github.io/tags/service/">service</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://skarlso.github.io">Ramblings of a cloud engineer</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
