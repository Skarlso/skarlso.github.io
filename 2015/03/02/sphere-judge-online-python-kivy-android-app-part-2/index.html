<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://skarlso.github.io/"
        },
        "articleSection" : "blog",
        "name" : "Sphere Judge Online – Python Kivy Android app – Part 2",
        "headline" : "Sphere Judge Online – Python Kivy Android app – Part 2",
        "description" : "<p>Here we are again. I will attempt to further this little journey of mine into the land of Android and Python.</p>

<p>This is the second part of the advanture you can read the first one a little bit back.</p>",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2015",
        "datePublished": "2015-03-02 00:00:00 &#43;0000 UTC",
        "dateModified" : "2015-03-02 00:00:00 &#43;0000 UTC",
        "url" : "https://skarlso.github.io/2015/03/02/sphere-judge-online-python-kivy-android-app-part-2/",
        "wordCount" : "927",
        "keywords" : [ "Blog" ]
    }
    </script>
        
            
                <title>Sphere Judge Online – Python Kivy Android app – Part 2</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.54-DEV" />
        


        
            <meta name="author" content="hannibal">
        
        
            
                <meta name="description" content="Ramblings of a Cloud Engineer">
            
        

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Sphere Judge Online – Python Kivy Android app – Part 2"/>
<meta name="twitter:description" content="Here we are again. I will attempt to further this little journey of mine into the land of Android and Python.

This is the second part of the advanture you can read the first one a little bit back."/>
<meta name="twitter:site" content="@Skarlso"/>

        <meta property="og:title" content="Sphere Judge Online – Python Kivy Android app – Part 2" />
<meta property="og:description" content="Here we are again. I will attempt to further this little journey of mine into the land of Android and Python.

This is the second part of the advanture you can read the first one a little bit back." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://skarlso.github.io/2015/03/02/sphere-judge-online-python-kivy-android-app-part-2/" /><meta property="article:published_time" content="2015-03-02T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2015-03-02T00:00:00&#43;00:00"/>

        <meta property="og:image" content="https://skarlso.github.io//images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="512">
        <meta property="og:image:height" content="512">
        
<meta itemprop="name" content="Sphere Judge Online – Python Kivy Android app – Part 2">
<meta itemprop="description" content="Here we are again. I will attempt to further this little journey of mine into the land of Android and Python.

This is the second part of the advanture you can read the first one a little bit back.">


<meta itemprop="datePublished" content="2015-03-02T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2015-03-02T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="927">



<meta itemprop="keywords" content="" />

        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css">
            <link rel="stylesheet" href="https://skarlso.github.io/css/main.css">
            <link rel="stylesheet" href="https://skarlso.github.io/css/add-on.css">
            <link rel="stylesheet" href="https://skarlso.github.io/css/academicons.min.css">
        

        


  
    
    <link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />
  


      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-69463020-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

    </head>
    <body>

      
      <div id="wrapper">

    
    
<header id="header">
    
      <h1><a href="https://skarlso.github.io/">blog</a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="https://skarlso.github.io/">
                            <i class="fa fa-home">&nbsp;</i>Home
                    </a>
                </li>
            
                <li>
                    <a href="https://skarlso.github.io/blog/">
                            <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                    </a>
                </li>
            
                <li>
                    <a href="https://skarlso.github.io/categories/">
                            <i class="fa fa-sitemap">&nbsp;</i>Categories
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="https://skarlso.github.io/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="as_sitesearch" value="https://skarlso.github.io/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="https://skarlso.github.io/">
                            <h3>
                                <i class="fa fa-home">&nbsp;</i>Home
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="https://skarlso.github.io/blog/">
                            <h3>
                                <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="https://skarlso.github.io/categories/">
                            <h3>
                                <i class="fa fa-sitemap">&nbsp;</i>Categories
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section class="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                
                        <article class="mini-post">
                            <header>
                                <h3><a href="https://skarlso.github.io/2018/10/29/go-plugin-tutorial/">Extensive tutorial on go-plugin.</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-10-29'>
                                    October 29, 2018</time>
                            </header>
                            
    

    
        
        







  
  
    
  


        
        
        

        <a href="https://skarlso.github.io/2018/10/29/go-plugin-tutorial/" class="image featured">
            <img src="https://skarlso.github.io/img/2018/10/go-plugin-tutorial.png" alt="">
        </a>
    


                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="https://skarlso.github.io/2018/09/17/furnace-plugin-update/">Furnace with a new Plugin System</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-09-17'>
                                    September 17, 2018</time>
                            </header>
                            
    

    
        
        







  
  
    
  


        
        
        

        <a href="https://skarlso.github.io/2018/09/17/furnace-plugin-update/" class="image featured">
            <img src="https://skarlso.github.io/img/2018/09/furnace.png" alt="">
        </a>
    


                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="https://skarlso.github.io/2018/09/13/gotp/">TOTP generator with account handling for multiple tokens</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-09-13'>
                                    September 13, 2018</time>
                            </header>
                            
    

    
        
        







  
  
    
  


        
        
        

        <a href="https://skarlso.github.io/2018/09/13/gotp/" class="image featured">
            <img src="https://skarlso.github.io/img/2018/09/gotp.png" alt="">
        </a>
    


                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="https://skarlso.github.io/2018/06/08/fork-updater/">Keep your git forks updated all the time</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-06-08'>
                                    June 8, 2018</time>
                            </header>
                            
    

    
        
        







  
  
    
  


        
        
        

        <a href="https://skarlso.github.io/2018/06/08/fork-updater/" class="image featured">
            <img src="https://skarlso.github.io/img/2018/06/git_updater.png" alt="">
        </a>
    


                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="https://skarlso.github.io/2018/03/15/kubernetes-distributed-application/">Kubernetes distributed application deployment with sample Face Recognition App</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-03-15'>
                                    March 15, 2018</time>
                            </header>
                            
    

    
        
        







  
  
    
  


        
        
        

        <a href="https://skarlso.github.io/2018/03/15/kubernetes-distributed-application/" class="image featured">
            <img src="https://skarlso.github.io/img/2018/03/kube_overview.png" alt="">
        </a>
    


                        </article>
                

                
                    <a href=
                        
                            /blog/
                        
                        class="button">View more posts</a>
                
            </div>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            



<li>
  <a href="//twitter.com/share?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f&amp;text=Sphere%20Judge%20Online%20%e2%80%93%20Python%20Kivy%20Android%20app%20%e2%80%93%20Part%202&amp;via=Skarlso" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>




<li>
  <a href="//plus.google.com/share?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
  </a>
</li>





<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>




<li>
  <a href="//reddit.com/submit?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f&amp;title=Sphere%20Judge%20Online%20%e2%80%93%20Python%20Kivy%20Android%20app%20%e2%80%93%20Part%202" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
  </a>
</li>




<li>
  <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f&amp;title=Sphere%20Judge%20Online%20%e2%80%93%20Python%20Kivy%20Android%20app%20%e2%80%93%20Part%202" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>




<li>
  <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f&amp;title=Sphere%20Judge%20Online%20%e2%80%93%20Python%20Kivy%20Android%20app%20%e2%80%93%20Part%202" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
  </a>
</li>




<li>
  <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f&amp;description=Sphere%20Judge%20Online%20%e2%80%93%20Python%20Kivy%20Android%20app%20%e2%80%93%20Part%202" target="_blank" class="share-btn pinterest">
    <i class="fa fa-pinterest-p"></i>
    <p>Pinterest</p>
  </a>
</li>




<li>
  <a href="mailto:?subject=Check out this post by hannibal&amp;body=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
  </a>
</li>


        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
  <header>
    <div class="title">
        
            <h1><a href="https://skarlso.github.io/2015/03/02/sphere-judge-online-python-kivy-android-app-part-2/">Sphere Judge Online – Python Kivy Android app – Part 2</a></h1>
            
        
        
    </div>
    <div class="meta">
        

        <time class="published"
            datetime='2015-03-02'>
            March 2, 2015</time>
        <span class="author">hannibal</span>
        
        
    </div>
</header>


  
    <section id="social-share">
      <ul class="icons">
        



<li>
  <a href="//twitter.com/share?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f&amp;text=Sphere%20Judge%20Online%20%e2%80%93%20Python%20Kivy%20Android%20app%20%e2%80%93%20Part%202&amp;via=Skarlso" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>




<li>
  <a href="//plus.google.com/share?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
  </a>
</li>





<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>




<li>
  <a href="//reddit.com/submit?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f&amp;title=Sphere%20Judge%20Online%20%e2%80%93%20Python%20Kivy%20Android%20app%20%e2%80%93%20Part%202" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
  </a>
</li>




<li>
  <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f&amp;title=Sphere%20Judge%20Online%20%e2%80%93%20Python%20Kivy%20Android%20app%20%e2%80%93%20Part%202" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>




<li>
  <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f&amp;title=Sphere%20Judge%20Online%20%e2%80%93%20Python%20Kivy%20Android%20app%20%e2%80%93%20Part%202" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
  </a>
</li>




<li>
  <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f&amp;description=Sphere%20Judge%20Online%20%e2%80%93%20Python%20Kivy%20Android%20app%20%e2%80%93%20Part%202" target="_blank" class="share-btn pinterest">
    <i class="fa fa-pinterest-p"></i>
    <p>Pinterest</p>
  </a>
</li>




<li>
  <a href="mailto:?subject=Check out this post by hannibal&amp;body=https%3a%2f%2fskarlso.github.io%2f2015%2f03%2f02%2fsphere-judge-online-python-kivy-android-app-part-2%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
  </a>
</li>


      </ul>
    </section>
  

  

  <div id="content">
    <p>Here we are again. I will attempt to further this little journey of mine into the land of Android and Python.</p>

<p>This is the second part of the advanture you can read the first one a little bit back.</p>

<h1 style="text-align: center;">
  The Script
</h1>

<p>&nbsp;</p>

<p>We left off at a point where I successfully configured my environment and compiled my first hello world APK. At that point it took a little bit fiddling to get it to work on my phone.</p>

<p>Now, I have progressed a little bit into spoj&#8217;s page parsing. The code so far is as follows:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">__author__ <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'hannibal'</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> requests
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">random</span> <span style="color: #ff7700;font-weight:bold;">import</span> randint
<span style="color: #ff7700;font-weight:bold;">import</span> lxml.<span style="color: black;">html</span> <span style="color: #ff7700;font-weight:bold;">as</span> lh
&nbsp;
random_page_number <span style="color: #66cc66;">=</span> randint<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">63</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># 63 being the maximum page number at spoj</span>
r <span style="color: #66cc66;">=</span> requests.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"http://www.spoj.com/problems/classical/sort=0,start=%d"</span> % <span style="color: black;">&#40;</span>random_page_number * <span style="color: #ff4500;">50</span> - <span style="color: #ff4500;">50</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #808080; font-style: italic;"># Problem Div XPath =&gt; //[@class="problems"]</span>
&nbsp;
spoj_page <span style="color: #66cc66;">=</span> lh.<span style="color: black;">document_fromstring</span><span style="color: black;">&#40;</span>r.<span style="color: black;">text</span><span style="color: black;">&#41;</span>
links_to_problems <span style="color: #66cc66;">=</span> spoj_page<span style="color: black;">&#91;</span><span style="color: #ff4500;"></span><span style="color: black;">&#93;</span>.<span style="color: black;">xpath</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"//tr[@class='problemrow']/td[2]/a"</span><span style="color: black;">&#41;</span>
&nbsp;
current_link <span style="color: #66cc66;">=</span> links_to_problems<span style="color: black;">&#91;</span>randint<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> <span style="color: #008000;">len</span><span style="color: black;">&#40;</span>links_to_problems<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span>
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>current_link.<span style="color: black;">attrib</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'href'</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
r <span style="color: #66cc66;">=</span> requests.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"http://www.spoj.com/%s"</span> % current_link.<span style="color: black;">attrib</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'href'</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>r.<span style="color: black;">text</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"utf-8"</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>This is pretty straight forward so far. It gets the problems page, loads in all of the links and prints it out.</p>

<p>My goal is an application which looks something like this:</p>

<p>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>___</p>

<p>|   _<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>  |</p>

<p>|  |                                                                           | |</p>

<p>|  |                                                                           | |</p>

<p>|  |                    Display Problem Description               | |</p>

<p>|  |                                                                           | |</p>

<p>|  |                                                                           | |</p>

<p>|  |                                                                           | |</p>

<p>|  |_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_____ | |</p>

<p>|                                                                                 |</p>

<p>|                                                                                 |</p>

<p>|                         Button:Finish Problem                        |</p>

<p>|                                                                                 |</p>

<p>|                         Button:Next Problem                          |</p>

<p>|_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>__ |</p>

<p>It&#8217;s very basic. When it loads up, it will gather and display a new problem. You have two options, either get a new one, or save / finish this item, saying you never want to see it again.</p>

<p>Let&#8217;s put the first part into an android app. Just gather data, and get it disaplyed.</p>

<p>*Queue a days worth of hacking and frustrated cussing.*</p>

<p>So, turns out it&#8217;s not as easy as I would have liked it to be. I ran into some pretty nasty problems. Some of them I&#8217;ll write down below for the record, and an attempted solution as well.</p>

<h1 style="text-align: center;">
  Problems
</h1>

<p><strong>#1:</strong> <strong>Problem:</strong> Libraries. I&#8217;m using lxml and requests. Requests is a pure python library, but lxml is partially C. Which apparently is not very well supported yet.</p>

<p><strong>Solution (Partial):</strong> I could optain request by two ways, but the most simple one, was basically just building my distribution with the optional requests module like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">.<span style="color: #000000; font-weight: bold;">/</span>distribute.sh <span style="color: #660033;">-m</span> <span style="color: #ff0000;">"openssl pil requests kivy"</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Attempting to do the same with LXML resulted in a compile issue which I tracked down to something like: &#8220;sorry, but we don&#8217;t support OSX&#8221;. But it&#8217;s okay. There are other ways to parse an html page, I just really like the xpath filter. So I soldiered on with trying to get something to work at least.</p>

<p><strong>#3: Problem:</strong> <em>Bogus compile time exception.</em> There were some exceptions on the way when I was trying to compile with buildozer. <strong>Solution:</strong> It&#8217;s interesting because previously my solution to another compile time issue was to use a specific version of Cython. But this time the solution was to actually remove that version and install the latest one. Which is 0.22 as of the time of this writing. So:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sudo</span> pip update cython</pre>
      </td>
    </tr>
  </table>
</div>

<p><strong>#2: Problem:</strong> Connection. So now, I&#8217;m down to the bare bone. At this point, I just want to see a page source in a label. My code looks like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> kivy
kivy.<span style="color: black;">require</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'1.8.0'</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">lang</span> <span style="color: #ff7700;font-weight:bold;">import</span> Builder
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">uix</span>.<span style="color: black;">gridlayout</span> <span style="color: #ff7700;font-weight:bold;">import</span> GridLayout
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">properties</span> <span style="color: #ff7700;font-weight:bold;">import</span> NumericProperty
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">app</span> <span style="color: #ff7700;font-weight:bold;">import</span> App
&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> requests
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">random</span> <span style="color: #ff7700;font-weight:bold;">import</span> randint
<span style="color: #808080; font-style: italic;"># import lxml.html as lh</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># import sys</span>
<span style="color: #808080; font-style: italic;"># sys.path.append('/sdcard/com.googlecode.pythonforandroid/extras/python/site-packages')</span>
&nbsp;
&nbsp;
Builder.<span style="color: black;">load_string</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'''
:
    cols: 1
    Label:
        text: root.get_problem()
    Button:
        text: 'Click me! %d' % root.counter
        on_release: root.my_callback()
'''</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> SpojAppScreen<span style="color: black;">&#40;</span>GridLayout<span style="color: black;">&#41;</span>:
    counter <span style="color: #66cc66;">=</span> NumericProperty<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> my_callback<span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #483d8b;">'The button has been pushed'</span>
        <span style="color: #008000;">self</span>.<span style="color: black;">counter</span> +<span style="color: #66cc66;">=</span> <span style="color: #ff4500;">1</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">def</span> get_problem<span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        random_page_number <span style="color: #66cc66;">=</span> randint<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">63</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># 63 being the maximum page number at spoj</span>
        r <span style="color: #66cc66;">=</span> requests.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"http://www.spoj.com/problems/classical/sort=0,start=%d"</span> % <span style="color: black;">&#40;</span>random_page_number * <span style="color: #ff4500;">50</span> - <span style="color: #ff4500;">50</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
        <span style="color: #808080; font-style: italic;"># Problem Div XPath =&gt; //[@class="problems"]</span>
&nbsp;
        <span style="color: #808080; font-style: italic;"># spoj_page = lh.document_fromstring(r.text)</span>
        <span style="color: #808080; font-style: italic;"># links_to_problems = spoj_page[0].xpath("//tr[@class='problemrow']/td[2]/a")</span>
&nbsp;
        <span style="color: #808080; font-style: italic;"># current_link = links_to_problems[randint(0, len(links_to_problems))]</span>
        <span style="color: #808080; font-style: italic;"># print(current_link.attrib['href'])</span>
        <span style="color: #808080; font-style: italic;"># r = requests.get("http://www.spoj.com/%s" % current_link.attrib['href'])</span>
        <span style="color: #808080; font-style: italic;"># print(r.text.encode("utf-8"))</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> r.<span style="color: black;">text</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"utf-8"</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> SpojApp<span style="color: black;">&#40;</span>App<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">def</span> build<span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> SpojAppScreen<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">if</span> __name__ <span style="color: #66cc66;">==</span> <span style="color: #483d8b;">'__main__'</span>:
    SpojApp<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">run</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>However, running this results in a connection error in adb logcat:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  kivy.lang.BuilderException: Parser: File <span style="color: #ff0000;">""</span>, line <span style="color: #000000;">5</span>:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">3</span>:    cols: <span style="color: #000000;">1</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">4</span>:    Label:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  <span style="color: #000000; font-weight: bold;">&</span>gt;<span style="color: #000000; font-weight: bold;">&</span>gt;    <span style="color: #000000;">5</span>:        text: root.get_problem<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">6</span>:    Button:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">7</span>:        text: <span style="color: #ff0000;">'Click me! %d'</span> <span style="color: #000000; font-weight: bold;">%</span> root.counter
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  BuilderException: Parser: File <span style="color: #ff0000;">""</span>, line <span style="color: #000000;">5</span>:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">3</span>:    cols: <span style="color: #000000;">1</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">4</span>:    Label:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  <span style="color: #000000; font-weight: bold;">&</span>gt;<span style="color: #000000; font-weight: bold;">&</span>gt;    <span style="color: #000000;">5</span>:        text: root.get_problem<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">6</span>:    Button:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">7</span>:        text: <span style="color: #ff0000;">'Click me! %d'</span> <span style="color: #000000; font-weight: bold;">%</span> root.counter
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ConnectionError: <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #ff0000;">'Connection aborted.'</span>, gaierror<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">4</span>, <span style="color: #ff0000;">'non-recoverable failure in name resolution.'</span><span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p><strong>Solution:</strong> I tried simply putting out a random number at some point, which actullay worked, so I know it&#8217;s the connection. I&#8217;m guessing I need permission to access the network. Which would be this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="xml" style="font-family:monospace;">uses-permission android:name="android.permission.INTERNET"</pre>
      </td>
    </tr>
  </table>
</div>

<p>And yes! Building and installing it with this additional permission got me so far as I can display the web page&#8217;s content in a label.</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">.<span style="color: #000000; font-weight: bold;">/</span>build.py <span style="color: #660033;">--package</span> org.spoj <span style="color: #660033;">--permission</span> INTERNET <span style="color: #660033;">--name</span> <span style="color: #ff0000;">"Spoj"</span> <span style="color: #660033;">--version</span> <span style="color: #000000;">1.0</span> <span style="color: #660033;">--dir</span> <span style="color: #000000; font-weight: bold;">/</span>Users<span style="color: #000000; font-weight: bold;">/</span>hannibal<span style="color: #000000; font-weight: bold;">/</span>PythonProjects<span style="color: #000000; font-weight: bold;">/</span>spoj<span style="color: #000000; font-weight: bold;">/</span> debug</pre>
      </td>
    </tr>
  </table>
</div>

<p>There is a saying that you should end on a high note, so that is what I&#8217;m going to do here right now. Join me next time, when I&#8217;ll try to replace lxml with something else&#8230;</p>

<p>Thanks for reading!</p>

<p>Gergely.</p>
  </div>

  <footer>
    <ul class="stats">
  <li class="categories">
    <ul>
        
            
            
                <i class="fa fa-folder"></i>
                
                
                <li><a class="article-category-link" href="https://skarlso.github.io/categories/android">android</a></li>
                
                
                <li><a class="article-category-link" href="https://skarlso.github.io/categories/programming">programming</a></li>
                
                
                <li><a class="article-category-link" href="https://skarlso.github.io/categories/python">Python</a></li>
                
            
        
    </ul>
  </li>
  <li class="tags">
    <ul>
        
    </ul>
  </li>
</ul>

  </footer>

  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hannibalDisqus" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  <ul class="actions pagination">
    
        <li><a href="https://skarlso.github.io/2015/02/26/sphere-judge-online-python-kivy-android-app/"
                class="button big previous">Sphere Judge Online – Python Kivy Android app</a></li>
    

    
        <li><a href="https://skarlso.github.io/2015/03/15/python-and-my-math-commitment/"
                class="button big next">Python and my Math commitment</a></li>
    
</ul>


</article>

    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
    
    
  </section>

  
  <section class="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>Recent Posts</h3>
      </header>
      <div class="posts-container">
        

        
          
        

        
          <article class="mini-post">
            <header>
              <h3>
                <a href="https://skarlso.github.io/2018/10/29/go-plugin-tutorial/">Extensive tutorial on go-plugin.</a>
              </h3>
              
              <time class="published" datetime='2018-10-29'>
                October 29, 2018
              </time>
            </header>
            
    

    
        
        







  
  
    
  


        
        
        

        <a href="https://skarlso.github.io/2018/10/29/go-plugin-tutorial/" class="image featured">
            <img src="https://skarlso.github.io/img/2018/10/go-plugin-tutorial.png" alt="">
        </a>
    


          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="https://skarlso.github.io/2018/09/17/furnace-plugin-update/">Furnace with a new Plugin System</a>
              </h3>
              
              <time class="published" datetime='2018-09-17'>
                September 17, 2018
              </time>
            </header>
            
    

    
        
        







  
  
    
  


        
        
        

        <a href="https://skarlso.github.io/2018/09/17/furnace-plugin-update/" class="image featured">
            <img src="https://skarlso.github.io/img/2018/09/furnace.png" alt="">
        </a>
    


          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="https://skarlso.github.io/2018/09/13/gotp/">TOTP generator with account handling for multiple tokens</a>
              </h3>
              
              <time class="published" datetime='2018-09-13'>
                September 13, 2018
              </time>
            </header>
            
    

    
        
        







  
  
    
  


        
        
        

        <a href="https://skarlso.github.io/2018/09/13/gotp/" class="image featured">
            <img src="https://skarlso.github.io/img/2018/09/gotp.png" alt="">
        </a>
    


          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="https://skarlso.github.io/2018/06/08/fork-updater/">Keep your git forks updated all the time</a>
              </h3>
              
              <time class="published" datetime='2018-06-08'>
                June 8, 2018
              </time>
            </header>
            
    

    
        
        







  
  
    
  


        
        
        

        <a href="https://skarlso.github.io/2018/06/08/fork-updater/" class="image featured">
            <img src="https://skarlso.github.io/img/2018/06/git_updater.png" alt="">
        </a>
    


          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="https://skarlso.github.io/2018/03/15/kubernetes-distributed-application/">Kubernetes distributed application deployment with sample Face Recognition App</a>
              </h3>
              
              <time class="published" datetime='2018-03-15'>
                March 15, 2018
              </time>
            </header>
            
    

    
        
        







  
  
    
  


        
        
        

        <a href="https://skarlso.github.io/2018/03/15/kubernetes-distributed-application/" class="image featured">
            <img src="https://skarlso.github.io/img/2018/03/kube_overview.png" alt="">
        </a>
    


          </article>
        
      </div>

      
        <a href=
          
            /blog/
          
        class="button">View more posts</a>
      
    </div>
  </section>

  
  
  

  
  

  
  <section id="footer">
    
      <ul class="icons">
        
        
  <li><a href="//github.com/Skarlso" target="_blank" title="GitHub" class="fa fa-github"></a></li>

























  <li><a href="//linkedin.com/in/brautigamgergely" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>



































  <li><a href="//twitter.com/Skarlso" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>




















      </ul>
    
    <p class="copyright">
      
        &copy; 2018
        
          Ramblings of a cloud engineer
        
      .
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>
    </p>
  </section>
</section>

    </div>
    <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>
        
        
        
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/json.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/css.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/go.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/bash.min.js"></script>
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
      <script src="https://skarlso.github.io/js/util.js"></script>
      <script src="https://skarlso.github.io/js/main.js"></script>
      <script src="https://skarlso.github.io/js/backToTop.js"></script>
    

    

    
    <script>hljs.initHighlightingOnLoad();</script>
      <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


  </body>
</html>

<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hannibalDisqus" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
