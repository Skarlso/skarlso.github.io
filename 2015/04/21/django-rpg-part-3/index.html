<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Django – RPG – Part 3 :: Ramblings of a cloud engineer</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Hello folks.
A small update to this. I created the model now, which is the database design for this app. It&amp;#8217;s very simple, nothing fancy. Also, I&amp;#8217;m writing the app with Python 3 from now on.
Here is the model now:
  from django.db import models from django.contrib.auth.models import User &amp;nbsp; # Create your models here. &amp;nbsp; &amp;nbsp; class Item&amp;#40;models.Model&amp;#41;: name = models.CharField&amp;#40;max_length=100, default=&#34;Item&#34;&amp;#41; damage = models.IntegerField&amp;#40;default=&amp;#41; defense = models."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://skarlso.github.io/2015/04/21/django-rpg-part-3/" />


<link rel="stylesheet" href="https://skarlso.github.io/assets/style.css">

  <link rel="stylesheet" href="https://skarlso.github.io/assets/green.css">



<link rel="stylesheet" href="https://skarlso.github.io/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://skarlso.github.io/img/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="https://skarlso.github.io/img/favicon/green.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Django – RPG – Part 3 :: Ramblings of a cloud engineer — " />
<meta name="twitter:description" content="Hello folks.
A small update to this. I created the model now, which is the database design for this app. It&amp;#8217;s very simple, nothing fancy. Also, I&amp;#8217;m writing the app with Python 3 from now on.
Here is the model now:
  from django.db import models from django.contrib.auth.models import User &amp;nbsp; # Create your models here. &amp;nbsp; &amp;nbsp; class Item&amp;#40;models.Model&amp;#41;: name = models.CharField&amp;#40;max_length=100, default=&#34;Item&#34;&amp;#41; damage = models.IntegerField&amp;#40;default=&amp;#41; defense = models." />
<meta name="twitter:site" content="https://skarlso.github.io/" />
<meta name="twitter:creator" content="hannibal" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Django – RPG – Part 3 :: Ramblings of a cloud engineer — ">
<meta property="og:description" content="Hello folks.
A small update to this. I created the model now, which is the database design for this app. It&amp;#8217;s very simple, nothing fancy. Also, I&amp;#8217;m writing the app with Python 3 from now on.
Here is the model now:
  from django.db import models from django.contrib.auth.models import User &amp;nbsp; # Create your models here. &amp;nbsp; &amp;nbsp; class Item&amp;#40;models.Model&amp;#41;: name = models.CharField&amp;#40;max_length=100, default=&#34;Item&#34;&amp;#41; damage = models.IntegerField&amp;#40;default=&amp;#41; defense = models." />
<meta property="og:url" content="https://skarlso.github.io/2015/04/21/django-rpg-part-3/" />
<meta property="og:site_name" content="Django – RPG – Part 3" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">
<meta property="article:section" content="programming" /><meta property="article:section" content="Python" />
<meta property="article:published_time" content="2015-04-21 00:00:00 &#43;0000 UTC" />







</head>
<body class="">
<div class="container">
  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="https://skarlso.github.io/">
  <div class="logo">
    Terminal
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="https://skarlso.github.io/">Home</a></li>
        
      
        
          <li><a href="https://skarlso.github.io/blog/">Blog</a></li>
        
      
        
          <li><a href="https://skarlso.github.io/categories/">Categories</a></li>
        
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="https://skarlso.github.io/">Home</a></li>
      
    
      
        <li><a href="https://skarlso.github.io/blog/">Blog</a></li>
      
    
      
        <li><a href="https://skarlso.github.io/categories/">Categories</a></li>
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
  <div class="post">
    <h1 class="post-title"><a href="https://skarlso.github.io/2015/04/21/django-rpg-part-3/">Django – RPG – Part 3</a></h1>
    <div class="post-meta">
      <span class="post-date">
        2015-04-21
      </span>
      <span class="post-author">:: hannibal</span>
    </div>

    
      <span class="post-tags">
        
          #<a href="https://skarlso.github.io/tags/rpg">rpg</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      <p>Hello folks.</p>

<p>A small update to this. I created the model now, which is the database design for this app. It&#8217;s very simple, nothing fancy. Also, I&#8217;m writing the app with Python 3 from now on.</p>

<p>Here is the model now:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">db</span> <span style="color: #ff7700;font-weight:bold;">import</span> models
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">contrib</span>.<span style="color: black;">auth</span>.<span style="color: black;">models</span> <span style="color: #ff7700;font-weight:bold;">import</span> User
&nbsp;
<span style="color: #808080; font-style: italic;"># Create your models here.</span>
&nbsp;
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> Item<span style="color: black;">&#40;</span>models.<span style="color: black;">Model</span><span style="color: black;">&#41;</span>:
    name <span style="color: #66cc66;">=</span> models.<span style="color: black;">CharField</span><span style="color: black;">&#40;</span>max_length<span style="color: #66cc66;">=</span><span style="color: #ff4500;">100</span><span style="color: #66cc66;">,</span> default<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"Item"</span><span style="color: black;">&#41;</span>
    damage <span style="color: #66cc66;">=</span> models.<span style="color: black;">IntegerField</span><span style="color: black;">&#40;</span>default<span style="color: #66cc66;">=</span><span style="color: #ff4500;"></span><span style="color: black;">&#41;</span>
    defense <span style="color: #66cc66;">=</span> models.<span style="color: black;">IntegerField</span><span style="color: black;">&#40;</span>default<span style="color: #66cc66;">=</span><span style="color: #ff4500;"></span><span style="color: black;">&#41;</span>
    consumable <span style="color: #66cc66;">=</span> models.<span style="color: black;">BooleanField</span><span style="color: black;">&#40;</span>default<span style="color: #66cc66;">=</span><span style="color: #008000;">False</span><span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">def</span> <span style="color: #0000cd;">__str__</span><span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">self</span>.<span style="color: black;">name</span>
&nbsp;
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> Inventory<span style="color: black;">&#40;</span>models.<span style="color: black;">Model</span><span style="color: black;">&#41;</span>:
    items <span style="color: #66cc66;">=</span> models.<span style="color: black;">ManyToManyField</span><span style="color: black;">&#40;</span>Item<span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">def</span> <span style="color: #0000cd;">__str__</span><span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">self</span>.<span style="color: black;">items</span>
&nbsp;
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> Character<span style="color: black;">&#40;</span>models.<span style="color: black;">Model</span><span style="color: black;">&#41;</span>:
    <span style="color: #808080; font-style: italic;"># By default Django uses the primery key of the related object.</span>
    <span style="color: #808080; font-style: italic;"># Hence, no need to specify User.id.</span>
    <span style="color: #dc143c;">user</span> <span style="color: #66cc66;">=</span> models.<span style="color: black;">OneToOneField</span><span style="color: black;">&#40;</span>User<span style="color: #66cc66;">,</span> null<span style="color: #66cc66;">=</span><span style="color: #008000;">True</span><span style="color: black;">&#41;</span>
    name <span style="color: #66cc66;">=</span> models.<span style="color: black;">CharField</span><span style="color: black;">&#40;</span>max_length<span style="color: #66cc66;">=</span><span style="color: #ff4500;">100</span><span style="color: black;">&#41;</span>
    inventory <span style="color: #66cc66;">=</span> models.<span style="color: black;">ForeignKey</span><span style="color: black;">&#40;</span>Inventory<span style="color: black;">&#41;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">def</span> <span style="color: #0000cd;">__str__</span><span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> <span style="color: #008000;">self</span>.<span style="color: black;">name</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Worth noting a few things here. The __str__ is only with Python 3. In Python 2 it would be unicode. And the OneToOne and the foreign key are automatically using Primary keys defined in the references model. The __str__ is there to return some view when you are debugging in the console instead of [<Item: Item object>].</p>

<p>In order to apply this change you just have to run this commend (given you set up your app in the settings.py as an INSTALLED_APP):</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">python manage.py makemigrations polls</pre>
      </td>
    </tr>
  </table>
</div>

<p>This creates the migration script. And this applies it:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">python manage.py migrate</pre>
      </td>
    </tr>
  </table>
</div>

<p>I love the fact that django creates incremental migration scripts out of the box. So if there was any problem at all, you can always roll back. Which comes very handy in certain situations.</p>

<p>That&#8217;s it.</p>

<p>Thanks for reading!</p>

<p>Gergely.</p>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h"></span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="https://skarlso.github.io/2015/05/19/busy-building-the-future/">
                <span class="button__icon">←</span>
                <span class="button__text">Busy building the future</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="https://skarlso.github.io/2015/04/12/django-rpg-part-2/">
                <span class="button__text">Django – RPG – Part 2</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    
  </div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2019 Powered by <a href="http://gohugo.io">Hugo</a></span>
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
    
  </div>
</footer>

<script src="https://skarlso.github.io/assets/main.js"></script>
<script src="https://skarlso.github.io/assets/prism.js"></script>

  
</div>

</body>
</html>
