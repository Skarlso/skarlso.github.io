<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Sphere Judge Online – Python Kivy Android app | Ramblings of a cloud engineer</title>
<meta name="keywords" content="">
<meta name="description" content="Hello folks.
Today I would like to take you on a journey I fought myself through in order to write a python android app, which gets you a random problem from Sphere Judge Online. Then you can mark it as solved and it will be stored as such, and you can move on to the next problem. With the words of Neil deGrasse Tyson, Come with Me!
Beginnings When I first embarked on this endeavour I ran into numerous errors, many amongst them being compilation issues when I was trying to install libraries.">
<meta name="author" content="hannibal">
<link rel="canonical" href="https://skarlso.github.io/2015/02/26/sphere-judge-online-python-kivy-android-app/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css" integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe&#43;FVUFzPh7U=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://skarlso.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://skarlso.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://skarlso.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://skarlso.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://skarlso.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Sphere Judge Online – Python Kivy Android app" />
<meta property="og:description" content="Hello folks.
Today I would like to take you on a journey I fought myself through in order to write a python android app, which gets you a random problem from Sphere Judge Online. Then you can mark it as solved and it will be stored as such, and you can move on to the next problem. With the words of Neil deGrasse Tyson, Come with Me!
Beginnings When I first embarked on this endeavour I ran into numerous errors, many amongst them being compilation issues when I was trying to install libraries." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://skarlso.github.io/2015/02/26/sphere-judge-online-python-kivy-android-app/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-02-26T00:00:00+00:00" />
<meta property="article:modified_time" content="2015-02-26T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Sphere Judge Online – Python Kivy Android app"/>
<meta name="twitter:description" content="Hello folks.
Today I would like to take you on a journey I fought myself through in order to write a python android app, which gets you a random problem from Sphere Judge Online. Then you can mark it as solved and it will be stored as such, and you can move on to the next problem. With the words of Neil deGrasse Tyson, Come with Me!
Beginnings When I first embarked on this endeavour I ran into numerous errors, many amongst them being compilation issues when I was trying to install libraries."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://skarlso.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Sphere Judge Online – Python Kivy Android app",
      "item": "https://skarlso.github.io/2015/02/26/sphere-judge-online-python-kivy-android-app/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Sphere Judge Online – Python Kivy Android app",
  "name": "Sphere Judge Online – Python Kivy Android app",
  "description": "Hello folks.\nToday I would like to take you on a journey I fought myself through in order to write a python android app, which gets you a random problem from Sphere Judge Online. Then you can mark it as solved and it will be stored as such, and you can move on to the next problem. With the words of Neil deGrasse Tyson, Come with Me!\nBeginnings When I first embarked on this endeavour I ran into numerous errors, many amongst them being compilation issues when I was trying to install libraries.",
  "keywords": [
    
  ],
  "articleBody": "Hello folks.\nToday I would like to take you on a journey I fought myself through in order to write a python android app, which gets you a random problem from Sphere Judge Online. Then you can mark it as solved and it will be stored as such, and you can move on to the next problem. With the words of Neil deGrasse Tyson, Come with Me!\nBeginnings When I first embarked on this endeavour I ran into numerous errors, many amongst them being compilation issues when I was trying to install libraries.\nI started to write down all of these, and then started fresh on a new machine. I realised that ALL of my problems where only because of **ONE **thing. One thing, which I wanted to do, but it ended up being the death of me. And that is.. *Drummrolls* **Python 3. **I tried doing all the things that I started to do, with Python 3. Turns out, that neither libraries are supporting it very well yet. And that’s including Cython as well, which I thought would be up to speed by now. But sadly, it’s not.\nPrerequisite In order to go any further we need a few things first. For this to work, you’ll have to perform these things in order as I found out later. And certain versions of certain libraries are required instead of the latest ones.\nDepending on the environment you are using, you need to install python-dev and some other graphic libraries. I followed this and that was fine. Latest packages are working alright.\nsudo apt-get install build-essential patch git-core ccache ant python-pip python-dev sudo apt-get install ia32-libs libc6-dev-i386 sudo apt-get install lib32stdc++6 lib32z1 Only install these if you are absolutely certain you need them.\nClone python-android from git into a nice and cosy directory.\ngit clone https://github.com/kivy/python-for-android.git While this is underway, for python-android you also need android-sdk and android-ndk. Select the ones which are for your environment. The NDK is needed in order to build the APK out of our python code later on.\nAfter you are done, run ./android and install tools, APIs and other things you want. Make sure you have these set up:\nexport ANDROIDSDK=/path/to/android-sdk export ANDROIDNDK=/path/to/android-ndk export ANDROIDNDKVER=rX export ANDROIDAPI=X export PATH=$ANDROIDNDK:$ANDROIDSDK/platform-tools:$ANDROIDSDK/tools:$PATH The API version needs to be the one which you installed on your machine.\nNow, we have to get a specific version of Cython. In order to do that, execute the following command:\nsudo pip install -I https://pypi.python.org/packages/source/C/Cython/Cython-0.20.1.tar.gz Source your new .bash_profile file if you haven’t done so already.\nAt this point we are ready to install Kivy. Please follow the instructions for your environment on the respective page from Kivy’s documentation:\nhttp://kivy.org/docs/installation/installation.html\nNote: For Mac users. In addition, before doing the kivy stuff, and if you would like to execute kivy applications on your mac, you need to install pygame.\nIt’s a bit of a hassle but you only need to perform these commands:\nInstall Quartz =\u003e http://xquartz.macosforge.org/landing/\nInstall Homebrew =\u003e ruby -e “$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)\"\nInstall some other packages =\u003e brew install hg sdl sdl_image sdl_mixer sdl_ttf portmidi\nInstall pygame =\u003e pip install hg+http://bitbucket.org/pygame/pygame\nOnce this finishes, you should be good to go for the final command in the prerequisites. Go to your cloned python-android folder and run this (make sure you have ANT installed):\n./distribute.sh -m \"openssl pil kivy\" Now we are ready for some coding.\nImplementation So, finally after our environment is all setup, we can move on to write some python code. Let’s start with a simple hello world application:\nimport kivy kivy.require('1.8.0') # 1.8.0 is the latest kivy version from kivy.lang import Builder from kivy.uix.gridlayout import GridLayout from kivy.properties import NumericProperty from kivy.app import App Builder.load_string(''' : cols: 1 Label: text: 'Welcome to the Hello world' Button: text: 'Click me! %d' % root.counter on_release: root.my_callback() ''') class HelloWorldScreen(GridLayout): counter = NumericProperty() def my_callback(self): print 'The button has been pushed' self.counter += 1 class HelloWorldApp(App): def build(self): return HelloWorldScreen() if __name__ == '__main__': HelloWorldApp().run() This is a simple Hello World python-android app. Save this into a file called main.py. Main.py is used to execute the app on your phone. It’s your entry point. Whatever app you are writing, this has to be where it will begin.\nIn order to get this installed on our device, we will use python-android’s distribution.sh. The command to run after you changed directory into python-android is this (make sure that you have a compatible android device plugged in and in developer mode):\n./build.py --package org.hello.world --name \"Hello world\" --version 1.0 --dir /PATH/TO/helloworld debug installd Upon success, you should see it on your device. This is how the hello world app looks like:\nFinishing up This has been quite the ride so far. We will continue our journey when I’ll start writing my own app for SPOJ.\nThanks for reading! Gergely.\n",
  "wordCount" : "804",
  "inLanguage": "en",
  "datePublished": "2015-02-26T00:00:00Z",
  "dateModified": "2015-02-26T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "hannibal"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://skarlso.github.io/2015/02/26/sphere-judge-online-python-kivy-android-app/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Ramblings of a cloud engineer",
    "logo": {
      "@type": "ImageObject",
      "url": "https://skarlso.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://skarlso.github.io" accesskey="h" title="Ramblings of a cloud engineer (Alt + H)">Ramblings of a cloud engineer</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://skarlso.github.io/posts/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://skarlso.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://skarlso.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Sphere Judge Online – Python Kivy Android app
    </h1>
    <div class="post-meta"><span title='2015-02-26 00:00:00 +0000 UTC'>February 26, 2015</span>&nbsp;·&nbsp;hannibal

</div>
  </header> 
  <div class="post-content"><p>Hello folks.</p>
<p>Today I would like to take you on a journey I fought myself through in order to write a python android app, which gets you a random problem from <a href="http://www.spoj.com/problems/classical/" target="_blank">Sphere Judge Online</a>. Then you can mark it as solved and it will be stored as such, and you can move on to the next problem. With the words of Neil deGrasse Tyson, Come with Me!</p>
<h1 id="beginnings">Beginnings<a hidden class="anchor" aria-hidden="true" href="#beginnings">#</a></h1>
<p>When I first embarked on this endeavour I ran into numerous errors, many amongst them being compilation issues when I was trying to install libraries.</p>
<p>I started to write down all of these, and then started fresh on a new machine. I realised that ALL of my problems where only because of **ONE **thing. One thing, which I wanted to do, but it ended up being the death of me. And that is.. *Drummrolls* **Python 3. **I tried doing all the things that I started to do, with Python 3. Turns out, that neither libraries are supporting it very well yet. And that&rsquo;s including Cython as well, which I thought would be up to speed by now. But sadly, it&rsquo;s not.</p>
<h1 id="prerequisite">Prerequisite<a hidden class="anchor" aria-hidden="true" href="#prerequisite">#</a></h1>
<p>In order to go any further we need a few things first. For this to work, you&rsquo;ll have to perform these things in order as I found out later. And certain versions of certain libraries are required instead of the latest ones.</p>
<p>Depending on the environment you are using, you need to install python-dev and some other graphic libraries. I followed this and that was fine. Latest packages are working alright.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt-get install build-essential patch git-core ccache ant python-pip python-dev
</span></span><span style="display:flex;"><span>sudo apt-get install ia32-libs  libc6-dev-i386
</span></span><span style="display:flex;"><span>sudo apt-get install lib32stdc++6 lib32z1
</span></span></code></pre></div><p>Only install these if you are absolutely certain you need them.</p>
<p>Clone python-android from git into a nice and cosy directory.</p>
<pre tabindex="0"><code>git clone https://github.com/kivy/python-for-android.git
</code></pre><p>While this is underway, for python-android you also need <a href="http://developer.android.com/sdk/index.html#Other" target="_blank">android-sdk</a> and <a href="https://developer.android.com/tools/sdk/ndk/index.html" target="_blank">android-ndk</a>. Select the ones which are for your environment. The NDK is needed in order to build the APK out of our python code later on.</p>
<p>After you are done, run ./android and install tools, APIs and other things you want. Make sure you have these set up:</p>
<pre tabindex="0"><code>export ANDROIDSDK=/path/to/android-sdk
export ANDROIDNDK=/path/to/android-ndk
export ANDROIDNDKVER=rX
export ANDROIDAPI=X
export PATH=$ANDROIDNDK:$ANDROIDSDK/platform-tools:$ANDROIDSDK/tools:$PATH
</code></pre><p>The API version needs to be the one which you installed on your machine.</p>
<p>Now, we have to get a specific version of Cython. In order to do that, execute the following command:</p>
<pre tabindex="0"><code>sudo pip install -I https://pypi.python.org/packages/source/C/Cython/Cython-0.20.1.tar.gz
</code></pre><p>Source your new .bash_profile file if you haven&rsquo;t done so already.</p>
<p>At this point we are ready to install Kivy. Please follow the instructions for your environment on the respective page from Kivy&rsquo;s documentation:</p>
<p><a href="http://kivy.org/docs/installation/installation.html" target="_blank"><a href="http://kivy.org/docs/installation/installation.html">http://kivy.org/docs/installation/installation.html</a></a></p>
<p><strong>Note</strong>: For Mac users. In addition, before doing the kivy stuff, and if you would like to execute kivy applications on your mac, you need to install pygame.</p>
<p>It&rsquo;s a bit of a hassle but you only need to perform these commands:</p>
<p>Install Quartz =&gt; <a href="http://xquartz.macosforge.org/landing/" target="_blank"><a href="http://xquartz.macosforge.org/landing/">http://xquartz.macosforge.org/landing/</a></a></p>
<p>Install Homebrew =&gt; <span style="color: #ff9900;">ruby -e &ldquo;$(curl -fsSL <a href="https://raw.github.com/Homebrew/homebrew/go/install)%22">https://raw.github.com/Homebrew/homebrew/go/install)&quot;</a></span></p>
<p>Install some other packages =&gt; <span style="color: #ff9900;">brew install hg sdl sdl_image sdl_mixer sdl_ttf portmidi</span></p>
<p>Install pygame =&gt; <span style="color: #ff9900;">pip install hg+http://bitbucket.org/pygame/pygame</span></p>
<p>Once this finishes, you should be good to go for the final command in the prerequisites. Go to your cloned python-android folder and run this (make sure you have ANT installed):</p>
<pre tabindex="0"><code>./distribute.sh -m &#34;openssl pil kivy&#34;
</code></pre><p>Now we are ready for some coding.</p>
<h1 id="implementation">Implementation<a hidden class="anchor" aria-hidden="true" href="#implementation">#</a></h1>
<p>So, finally after our environment is all setup, we can move on to write some python code. Let&rsquo;s start with a simple hello world application:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> kivy
</span></span><span style="display:flex;"><span>kivy<span style="color:#f92672">.</span>require(<span style="color:#e6db74">&#39;1.8.0&#39;</span>) <span style="color:#75715e"># 1.8.0 is the latest kivy version</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> kivy.lang <span style="color:#f92672">import</span> Builder
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> kivy.uix.gridlayout <span style="color:#f92672">import</span> GridLayout
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> kivy.properties <span style="color:#f92672">import</span> NumericProperty
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> kivy.app <span style="color:#f92672">import</span> App
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Builder<span style="color:#f92672">.</span>load_string(<span style="color:#e6db74">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    cols: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Label:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        text: &#39;Welcome to the Hello world&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Button:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        text: &#39;Click me! </span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#39; </span><span style="color:#e6db74">% r</span><span style="color:#e6db74">oot.counter
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        on_release: root.my_callback()
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HelloWorldScreen</span>(GridLayout):
</span></span><span style="display:flex;"><span>    counter <span style="color:#f92672">=</span> NumericProperty()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">my_callback</span>(self):
</span></span><span style="display:flex;"><span>        print <span style="color:#e6db74">&#39;The button has been pushed&#39;</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>counter <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HelloWorldApp</span>(App):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">build</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> HelloWorldScreen()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    HelloWorldApp()<span style="color:#f92672">.</span>run()
</span></span></code></pre></div><p>This is a simple Hello World python-android app. Save this into a file called <span style="color: #ff9900;">main.py</span>. Main.py is used to execute the app on your phone. It&rsquo;s your entry point. Whatever app you are writing, this has to be where it will begin.</p>
<p>In order to get this installed on our device, we will use python-android&rsquo;s distribution.sh. The command to run after you changed directory into python-android is this (make sure that you have a compatible android device plugged in and in developer mode):</p>
<pre tabindex="0"><code>
./build.py --package org.hello.world --name &#34;Hello world&#34; --version 1.0 --dir /PATH/TO/helloworld debug installd
</code></pre><p>Upon success, you should see it on your device. This is how the hello world app looks like:</p>
<h1 id="finishing-up">Finishing up<a hidden class="anchor" aria-hidden="true" href="#finishing-up">#</a></h1>
<p>This has been quite the ride so far. We will continue our journey when I&rsquo;ll start writing my own app for SPOJ.</p>
<p>Thanks for reading!
Gergely.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://skarlso.github.io">Ramblings of a cloud engineer</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
