<!DOCTYPE html>
<html class="nojs" lang="en-GB" dir="ltr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Using a Kubernetes based Cluster for Various Services with auto HTTPS - Part 2 – Ramblings of a cloud engineer</title>
<meta name="description" content="Intro Hi folks. This is a continuation of the previous post about my Kubernetes infrastructure located here. The two remaining points are to deploy Athens Go proxy and …">
<meta name="created" content="2019-10-15T21:01:00+0100">
<meta name="modified" content="2019-10-15T21:01:00+0100">
<meta name="author" content="hannibal">
<meta name="contact" content="skarslo777@gmail.com">
<meta property="og:site_name" content="Ramblings of a cloud engineer">
<meta property="og:title" content="Using a Kubernetes based Cluster for Various Services with auto HTTPS - Part 2">
<meta property="og:url" content="https://skarlso.github.io/2019/10/15/kubernetes-cluster-part2/">
<meta property="og:type" content="article">
<meta property="og:image" content="https://skarlso.github.io/apple-touch-icon.png">
<meta name="generator" content="Hugo 0.83.1" />
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">


<link rel="canonical" href="https://skarlso.github.io/2019/10/15/kubernetes-cluster-part2/">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

<link rel="stylesheet" href="/css/mobile.2ab74aa64785dcab8114959e76ca140cf76207cd85989bc6d4fc3b12f734a09e.css" media="screen">
<link rel="stylesheet" href="/css/styles.934ca64e1cd8b39bd18393dc4fa4788aab68ce041fa7830964c671eed3da2b40.css">
<link rel="stylesheet" href="/css/print.27fc184f8670f41a2690985390779e7b20335a8fadff8fa015cf9417ffe50c36.css" media="print">

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Using a Kubernetes based Cluster for Various Services with auto HTTPS - Part 2",
    "datePublished": "2019-10-15T21:01:00+01:00",
    "dateModified": "2019-10-15T21:01:00+01:00",
    "url" : "https://skarlso.github.io/2019/10/15/kubernetes-cluster-part2/",
    "description": "Intro Hi folks. This is a continuation of the previous post about my Kubernetes infrastructure located here. The two remaining points are to deploy Athens Go proxy and …",
    "image" : "https://skarlso.github.io/apple-touch-icon.png",
    "author": {
      "@type": "Person",
      "name": "hannibal"
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://skarlso.github.io"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Ramblings of a cloud engineer",
      "logo" : {
        "@type": "ImageObject",
        "url": "https://skarlso.github.io/apple-touch-icon.png"
      },
      "url": "https://skarlso.github.io"
    }
  }
</script>

<script src="/js/script-early.min.3b0e641814c87f6a1d6ffa5e7d597f29faa8ce11482541e8801dc34013817c91.js"></script>
<script defer src="/js/lib/umbrella.min.6e17830ccdded0a13b96d6993865b58202bc2ee750e5892a51858ab048b2bebb.js"></script>
<script defer src="/js/mobile.min.abb9438113cb72181ecda30b9375cc0771c7ce2e7354414a7c1296b45cf47135.js"></script>
<script defer src="/js/script.min.a71d161caff0970fa29a345da3bd9b444f629eccf1e4922585879b44f8f30160.js"></script>

<script src="/js/tracking.min.cab571d19167308ad205e765770573e4bae7f3dab20f07533ba563eea84c8202.js"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-69463020-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body class="single-page">
<div class="page layout__page layout__sidebar-second">
<header class="header layout__header">
<a href="/" title="Home" rel="home" class="header__logo"><img src="/images/logo.png" alt="Home" class="header__logo-image"></a>
<h1 class="header__site-name">
<a href="/" title="Home" class="header__site-link" rel="home"><span>Ramblings of a cloud engineer</span></a>
</h1>
<div class="region header__region">
</div>
</header>

<nav class="main-menu layout__navigation">
<h2 class="visually-hidden">Main menu</h2>
<ul class="navbar">
<li><a href="/">Home</a></li>
<li><a href="/blog/" class="active" aria-current="page">Blog</a></li>
</ul>
</nav>


<main class="main layout__main">
<article class="section-blog single-view">
<header>
<h1 class="title title-submitted">Using a Kubernetes based Cluster for Various Services with auto HTTPS - Part 2</h1>
<div class="submitted">
<span class="author" itemprop="author">hannibal</span> - <time class="created-date" datetime="2019-10-15T21:01:00&#43;01:00">15 October, 2019</time>
</div>
</header>
<div class="content">
<h1 id="intro">Intro</h1>
<p>Hi folks.</p>
<p>This is a continuation of the previous post about my Kubernetes infrastructure located <a href="https://skarlso.github.io/2019/09/21/kubernetes-cluster/">here</a>. The two remaining points are to deploy Athens Go proxy and setting up monitoring.</p>
<h1 id="athens">Athens</h1>
<p><img src="/img/hosting/athens.png" alt="Athens"></p>
<p>Let&rsquo;s start with <a href="https://github.com/gomods/athens">Athens</a>.</p>
<p>First of all if you are a helm user, Athens has an awesome set of helm charts which you can use to deploy it in your cluster.
Located <a href="https://github.com/gomods/athens/tree/master/charts/athens-proxy">here</a>.</p>
<p>I prefer to deploy my own config files, but that&rsquo;s me. So here is my preferred way of deploying Athens.</p>
<p>Since this is also a subdomain of the previously created <code>powerhouse</code> namespace we are going to use that.</p>
<h2 id="pvc">PVC</h2>
<p>We are going to need a PersistentVolumeClaim for Athens so it can store all the things forever.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">PersistentVolumeClaim</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">powerhouse</span>
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">athens-storage</span>
<span style="color:#f92672">spec</span>:
  <span style="color:#f92672">accessModes</span>:
  - <span style="color:#ae81ff">ReadWriteOnce</span>
  <span style="color:#f92672">resources</span>:
    <span style="color:#f92672">requests</span>:
      <span style="color:#f92672">storage</span>: <span style="color:#ae81ff">10Gi</span>
  <span style="color:#f92672">storageClassName</span>: <span style="color:#ae81ff">do-block-storage</span>
</code></pre></div><p>Claim is very boring. Which means it just works.</p>
<h2 id="deployment">Deployment</h2>
<p>This is more interesting. Athens provides a lot of possibilities for the deployment. I&rsquo;m just deploying the barest possible here. Which means, no user auth, no private repository support, ssh key configuration, etc&hellip; It&rsquo;s a plain proxy installation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">apps/v1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Deployment</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">powerhouse</span>
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">athens-app</span>
  <span style="color:#f92672">labels</span>:
    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">athens-proxy</span>
<span style="color:#f92672">spec</span>:
  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">1</span>
  <span style="color:#f92672">selector</span>:
    <span style="color:#f92672">matchLabels</span>:
      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">athens-proxy</span>
  <span style="color:#f92672">template</span>:
    <span style="color:#f92672">metadata</span>:
      <span style="color:#f92672">labels</span>:
        <span style="color:#f92672">app</span>: <span style="color:#ae81ff">athens-proxy</span>
        <span style="color:#f92672">app.kubernetes.io/name</span>: <span style="color:#ae81ff">athens-proxy</span>
        <span style="color:#f92672">app.kubernetes.io/instance</span>: <span style="color:#ae81ff">athens-proxy</span>
    <span style="color:#f92672">spec</span>:
      <span style="color:#f92672">containers</span>:
      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">athens-proxy</span>
        <span style="color:#f92672">image</span>: <span style="color:#ae81ff">gomods/athens:v0.6.0</span>
        <span style="color:#f92672">livenessProbe</span>:
          <span style="color:#f92672">httpGet</span>:
            <span style="color:#f92672">path</span>: <span style="color:#e6db74">&#34;/healthz&#34;</span>
            <span style="color:#f92672">port</span>: <span style="color:#ae81ff">3000</span>
        <span style="color:#f92672">readinessProbe</span>:
          <span style="color:#f92672">httpGet</span>:
            <span style="color:#f92672">path</span>: <span style="color:#e6db74">&#34;/readyz&#34;</span>
            <span style="color:#f92672">port</span>: <span style="color:#ae81ff">3000</span>
        <span style="color:#f92672">env</span>:
          - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">ATHENS_GOGET_WORKERS</span>
            <span style="color:#f92672">value</span>: <span style="color:#e6db74">&#34;3&#34;</span>
          - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">ATHENS_STORAGE_TYPE</span>
            <span style="color:#f92672">value</span>: <span style="color:#e6db74">&#34;disk&#34;</span>
          - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">ATHENS_DISK_STORAGE_ROOT</span>
            <span style="color:#f92672">value</span>: <span style="color:#ae81ff">/var/lib/athens</span>
        <span style="color:#f92672">ports</span>:
          - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">3000</span>
            <span style="color:#f92672">name</span>: <span style="color:#ae81ff">athens-http</span>
        <span style="color:#f92672">volumeMounts</span>:
          - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">athens-data</span>
            <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/var/lib/athens</span>
            <span style="color:#f92672">subPath</span>: <span style="color:#ae81ff">athens</span>
      <span style="color:#f92672">volumes</span>:
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">athens-data</span>
          <span style="color:#f92672">persistentVolumeClaim</span>:
            <span style="color:#f92672">claimName</span>: <span style="color:#ae81ff">athens-storage</span>
</code></pre></div><p>Fun fact. The name of the app must not be just plain <code>athens</code> because that will result in an error: <code>too many colons in address</code>.</p>
<p>The issue is here: <a href="https://github.com/gomods/athens/issues/1038#issuecomment-457145658">https://github.com/gomods/athens/issues/1038#issuecomment-457145658</a> Basically it&rsquo;s because of the name used for the environment properties inside the container.</p>
<h2 id="service">Service</h2>
<p>Now, let&rsquo;s expose it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
<span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">powerhouse</span>
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">athens-service</span>
  <span style="color:#f92672">labels</span>:
    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">athens-proxy</span>
    <span style="color:#f92672">app.kubernetes.io/name</span>: <span style="color:#ae81ff">athens-proxy</span>
    <span style="color:#f92672">app.kubernetes.io/instance</span>: <span style="color:#ae81ff">athens-proxy</span>
<span style="color:#f92672">spec</span>:
  <span style="color:#f92672">selector</span>:
    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">athens-proxy</span>
    <span style="color:#f92672">app.kubernetes.io/name</span>: <span style="color:#ae81ff">athens-proxy</span>
    <span style="color:#f92672">app.kubernetes.io/instance</span>: <span style="color:#ae81ff">athens-proxy</span>
  <span style="color:#f92672">ports</span>:
  - <span style="color:#f92672">port</span>: <span style="color:#ae81ff">80</span>
    <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">3000</span>
</code></pre></div><h2 id="ingress">Ingress</h2>
<p>I&rsquo;m using port 80 here because it&rsquo;s convenient. But if you use any other port, don&rsquo;t forget to alter your ingress to forward to that port and service.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">extensions/v1beta1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Ingress</span>
...
<span style="color:#f92672">spec</span>:
  <span style="color:#f92672">tls</span>:
...
  - <span style="color:#f92672">hosts</span>:
    - <span style="color:#ae81ff">athens.powerhouse.com</span>
    <span style="color:#f92672">secretName</span>: <span style="color:#ae81ff">athens-cronohub-tls</span>
  <span style="color:#f92672">rules</span>:
...
  - <span style="color:#f92672">host</span>: <span style="color:#ae81ff">athens.powerhouse.com</span>
    <span style="color:#f92672">http</span>:
      <span style="color:#f92672">paths</span>:
      - <span style="color:#f92672">backend</span>:
          <span style="color:#f92672">serviceName</span>: <span style="color:#ae81ff">athens-service</span>
          <span style="color:#f92672">servicePort</span>: <span style="color:#ae81ff">1234</span>
        <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/</span>
</code></pre></div><p>And that&rsquo;s it! If you now visit <code>https://athens.powerhouse.com</code> it should say <code>&quot;Welcome to The Athens Proxy&quot;</code>.</p>
<p>Now, if you set this proxy with <code>export GOPROXY=https://athens.powerhouse.com</code> it should start to cache modules. It&rsquo;s a fantastic proxy with a lot of capabilities. I encourage you to check it out and drop by it&rsquo;s slack channel on Gopher slack called Athens.</p>
<h1 id="monitoring">Monitoring</h1>
<p>Monitoring is a huge topic so I&rsquo;m not going to talk about how to monitor or what. That is described in great many of posts. I especially recommend reading sysdig&rsquo;s 6 part post on doing monitoring with Prometheus and Grafana and what to monitor and the four golden signals and whatnot. Starting <a href="https://sysdig.com/blog/kubernetes-monitoring-prometheus/">here</a> and <a href="https://sysdig.com/blog/monitoring-kubernetes-with-sysdig-cloud/">here</a>.</p>
<h2 id="prometheus">Prometheus</h2>
<p>I&rsquo;m going to deploy <a href="https://prometheus.io">Prometheus</a>. Prometheus is a monitoring tool which sits inside your cluster and gathers data about running pods, nodes, services, whatever you expose and wants to send data to it. It can also alert on things and can be integrated with tools like Graphana for nice front-end and metrics. Prometheus itself uses PromQL as its query language to gather data from different sources and do time series analytics and much much more.</p>
<p>Please visit the website and documentation for more details. It&rsquo;s the defacto monitoring tool for Kubernetes. Again, I&rsquo;m going to do a very basic installation of Prometheus. So basic in fact, that I don&rsquo;t even have a PVC for it, because I don&rsquo;t care at this point about retaining data.</p>
<h3 id="namespace">Namespace</h3>
<p>Let&rsquo;s create it&rsquo;s own namespace.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Namespace</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">monitoring</span>
  <span style="color:#f92672">labels</span>:
    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">monitoring</span>
</code></pre></div><h3 id="config">Config</h3>
<p>Prometheus Server config is massive. I don&rsquo;t expect you to pick up on everything in this thing, but I would encourage you to at least try to find out what these setting do&hellip; Our config yaml file contains the configuration file for Prometheus which we&rsquo;ll later set up via a command line argument. It&rsquo;s called <code>prometheus.yml</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus-server-conf</span>
  <span style="color:#f92672">labels</span>:
    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus-server-conf</span>
  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">monitoring</span>
<span style="color:#f92672">data</span>:
  <span style="color:#f92672">prometheus.yml</span>: |-<span style="color:#e6db74">
</span><span style="color:#e6db74">    global:
</span><span style="color:#e6db74">      scrape_interval: 5s
</span><span style="color:#e6db74">      evaluation_interval: 5s
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    scrape_configs:
</span><span style="color:#e6db74">      - job_name: &#39;kubernetes-apiservers&#39;
</span><span style="color:#e6db74">        kubernetes_sd_configs:
</span><span style="color:#e6db74">        - role: endpoints
</span><span style="color:#e6db74">        scheme: https
</span><span style="color:#e6db74">        tls_config:
</span><span style="color:#e6db74">          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
</span><span style="color:#e6db74">        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
</span><span style="color:#e6db74">        relabel_configs:
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_namespace, __meta_kubernetes_service_name, __meta_kubernetes_endpoint_port_name]
</span><span style="color:#e6db74">          action: keep
</span><span style="color:#e6db74">          regex: default;kubernetes;https
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">      - job_name: &#39;kubernetes-nodes&#39;
</span><span style="color:#e6db74">        scheme: https
</span><span style="color:#e6db74">        tls_config:
</span><span style="color:#e6db74">          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
</span><span style="color:#e6db74">        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
</span><span style="color:#e6db74">        kubernetes_sd_configs:
</span><span style="color:#e6db74">        - role: node
</span><span style="color:#e6db74">        relabel_configs:
</span><span style="color:#e6db74">        - action: labelmap
</span><span style="color:#e6db74">          regex: __meta_kubernetes_node_label_(.+)
</span><span style="color:#e6db74">        - target_label: __address__
</span><span style="color:#e6db74">          replacement: kubernetes.default.svc:443
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_node_name]
</span><span style="color:#e6db74">          regex: (.+)
</span><span style="color:#e6db74">          target_label: __metrics_path__
</span><span style="color:#e6db74">          replacement: /api/v1/nodes/${1}/proxy/metrics
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">      - job_name: &#39;kubernetes-pods&#39;
</span><span style="color:#e6db74">        kubernetes_sd_configs:
</span><span style="color:#e6db74">        - role: pod
</span><span style="color:#e6db74">        relabel_configs:
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]
</span><span style="color:#e6db74">          action: keep
</span><span style="color:#e6db74">          regex: true
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]
</span><span style="color:#e6db74">          action: replace
</span><span style="color:#e6db74">          target_label: __metrics_path__
</span><span style="color:#e6db74">          regex: (.+)
</span><span style="color:#e6db74">        - source_labels: [__address__, __meta_kubernetes_pod_annotation_prometheus_io_port]
</span><span style="color:#e6db74">          action: replace
</span><span style="color:#e6db74">          regex: ([^:]+)(?::\d+)?;(\d+)
</span><span style="color:#e6db74">          replacement: $1:$2
</span><span style="color:#e6db74">          target_label: __address__
</span><span style="color:#e6db74">        - action: labelmap
</span><span style="color:#e6db74">          regex: __meta_kubernetes_pod_label_(.+)
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_namespace]
</span><span style="color:#e6db74">          action: replace
</span><span style="color:#e6db74">          target_label: kubernetes_namespace
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_pod_name]
</span><span style="color:#e6db74">          action: replace
</span><span style="color:#e6db74">          target_label: kubernetes_pod_name
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">      - job_name: &#39;kubernetes-cadvisor&#39;
</span><span style="color:#e6db74">        scheme: https
</span><span style="color:#e6db74">        tls_config:
</span><span style="color:#e6db74">          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
</span><span style="color:#e6db74">        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
</span><span style="color:#e6db74">        kubernetes_sd_configs:
</span><span style="color:#e6db74">        - role: node
</span><span style="color:#e6db74">        relabel_configs:
</span><span style="color:#e6db74">        - action: labelmap
</span><span style="color:#e6db74">          regex: __meta_kubernetes_node_label_(.+)
</span><span style="color:#e6db74">        - target_label: __address__
</span><span style="color:#e6db74">          replacement: kubernetes.default.svc:443
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_node_name]
</span><span style="color:#e6db74">          regex: (.+)
</span><span style="color:#e6db74">          target_label: __metrics_path__
</span><span style="color:#e6db74">          replacement: /api/v1/nodes/${1}/proxy/metrics/cadvisor
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">      - job_name: &#39;kubernetes-service-endpoints&#39;
</span><span style="color:#e6db74">        kubernetes_sd_configs:
</span><span style="color:#e6db74">        - role: endpoints
</span><span style="color:#e6db74">        relabel_configs:
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scrape]
</span><span style="color:#e6db74">          action: keep
</span><span style="color:#e6db74">          regex: true
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scheme]
</span><span style="color:#e6db74">          action: replace
</span><span style="color:#e6db74">          target_label: __scheme__
</span><span style="color:#e6db74">          regex: (https?)
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_service_annotation_prometheus_io_path]
</span><span style="color:#e6db74">          action: replace
</span><span style="color:#e6db74">          target_label: __metrics_path__
</span><span style="color:#e6db74">          regex: (.+)
</span><span style="color:#e6db74">        - source_labels: [__address__, __meta_kubernetes_service_annotation_prometheus_io_port]
</span><span style="color:#e6db74">          action: replace
</span><span style="color:#e6db74">          target_label: __address__
</span><span style="color:#e6db74">          regex: ([^:]+)(?::\d+)?;(\d+)
</span><span style="color:#e6db74">          replacement: $1:$2
</span><span style="color:#e6db74">        - action: labelmap
</span><span style="color:#e6db74">          regex: __meta_kubernetes_service_label_(.+)
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_namespace]
</span><span style="color:#e6db74">          action: replace
</span><span style="color:#e6db74">          target_label: kubernetes_namespace
</span><span style="color:#e6db74">        - source_labels: [__meta_kubernetes_service_name]
</span><span style="color:#e6db74">          action: replace
</span><span style="color:#e6db74">          target_label: kubernetes_name</span>    
</code></pre></div><p>Mostly it&rsquo;s just setting up what Prometheus should monitor and how. The important bits are the <code>labels</code>. How this is going to work is, that we will <code>annotate</code> the resources we want Prometheus to see. Which is pretty cool. Basically we will just alter a pod to include an annotation and it will begin monitoring it. No need to install anything anywhere or restart anything. Just add an annotation and bamm, you&rsquo;re done.</p>
<h2 id="rbac">RBAC</h2>
<p>Prometheus needs permissions to access resources in the cluster such as API end-points and gathering data about the cluster itself. We will provide it with this permission through <a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/">Role Based Access Control</a>.</p>
<p>We&rsquo;ll create a service account which Prometheus can use. We want it to access the whole cluster so we&rsquo;ll use a <code>ClusterRole</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">rbac.authorization.k8s.io/v1beta1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterRole</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus</span>
<span style="color:#f92672">rules</span>:
- <span style="color:#f92672">apiGroups</span>: [<span style="color:#e6db74">&#34;&#34;</span>]
  <span style="color:#f92672">resources</span>:
  - <span style="color:#ae81ff">nodes</span>
  - <span style="color:#ae81ff">nodes/proxy</span>
  - <span style="color:#ae81ff">services</span>
  - <span style="color:#ae81ff">endpoints</span>
  - <span style="color:#ae81ff">pods</span>
  <span style="color:#f92672">verbs</span>: [<span style="color:#e6db74">&#34;get&#34;</span>, <span style="color:#e6db74">&#34;list&#34;</span>, <span style="color:#e6db74">&#34;watch&#34;</span>]
- <span style="color:#f92672">apiGroups</span>:
  - <span style="color:#ae81ff">extensions</span>
  <span style="color:#f92672">resources</span>:
  - <span style="color:#ae81ff">ingresses</span>
  <span style="color:#f92672">verbs</span>: [<span style="color:#e6db74">&#34;get&#34;</span>, <span style="color:#e6db74">&#34;list&#34;</span>, <span style="color:#e6db74">&#34;watch&#34;</span>]
- <span style="color:#f92672">nonResourceURLs</span>: [<span style="color:#e6db74">&#34;/metrics&#34;</span>]
  <span style="color:#f92672">verbs</span>: [<span style="color:#e6db74">&#34;get&#34;</span>]
---
<span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">rbac.authorization.k8s.io/v1beta1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterRoleBinding</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus</span>
<span style="color:#f92672">roleRef</span>:
  <span style="color:#f92672">apiGroup</span>: <span style="color:#ae81ff">rbac.authorization.k8s.io</span>
  <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterRole</span>
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus</span>
<span style="color:#f92672">subjects</span>:
- <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ServiceAccount</span>
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">default</span>
  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">monitoring</span>
</code></pre></div><p>This will give access to monitor the following resources: nodes, nodes/proxy, services, endpoints and pods. The action are get, list, watch. No modifications.</p>
<p>We&rsquo;ll also allow Prometheus to watch ingresses for data traffic and allow it to do get requests to non-resource endpoint <code>/metrics</code>.</p>
<h2 id="deployment-1">Deployment</h2>
<p>Now, the deployment is actually pretty easy.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">extensions/v1beta1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Deployment</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus-deployment</span>
  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">monitoring</span>
<span style="color:#f92672">spec</span>:
  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">1</span>
  <span style="color:#f92672">template</span>:
    <span style="color:#f92672">metadata</span>:
      <span style="color:#f92672">labels</span>:
        <span style="color:#f92672">app</span>: <span style="color:#ae81ff">prometheus-server</span>
    <span style="color:#f92672">spec</span>:
      <span style="color:#f92672">containers</span>:
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus</span>
          <span style="color:#f92672">image</span>: <span style="color:#ae81ff">prom/prometheus:v2.2.1</span>
          <span style="color:#f92672">args</span>:
            - <span style="color:#e6db74">&#34;--config.file=/etc/prometheus/prometheus.yml&#34;</span>
            - <span style="color:#e6db74">&#34;--storage.tsdb.path=/prometheus/&#34;</span>
          <span style="color:#f92672">ports</span>:
            - <span style="color:#f92672">containerPort</span>: <span style="color:#ae81ff">9090</span>
          <span style="color:#f92672">volumeMounts</span>:
            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus-config-volume</span>
              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/etc/prometheus/</span>
            - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus-storage-volume</span>
              <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/prometheus/</span>
      <span style="color:#f92672">volumes</span>:
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus-config-volume</span>
          <span style="color:#f92672">configMap</span>:
            <span style="color:#f92672">defaultMode</span>: <span style="color:#ae81ff">420</span>
            <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus-server-conf</span>
        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus-storage-volume</span>
          <span style="color:#f92672">emptyDir</span>: {}
</code></pre></div><p>The two interesting things here are the two arguments. The config file, which we include through the <code>configMap</code> and the storage. Which I&rsquo;m not bind mounting.</p>
<h2 id="service-1">Service</h2>
<p>Let&rsquo;s expose Prometheus. Now, this may come as a surprise if you don&rsquo;t know anything about Prometheus, but this is an in cluster monitoring tool. It&rsquo;s usually not supposed to be accessed directly, but through tools like Graphana or used by tools like Alerting or traefik as a reverse proxy. As such, Prometheus does not support authentication or authorization or user management of any kind. That is usually taken care of by a reverse proxy or other means written about <a href="https://prometheus.io/docs/operating/security/#authentication-authorization-and-encryption">here</a> and <a href="https://prometheus.io/docs/guides/basic-auth/">here</a>.</p>
<p>As such, we can do a number of things. We can expose it as a NodePort service for example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
<span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Service</span>
<span style="color:#f92672">metadata</span>:
  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus-service</span>
  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">monitoring</span>
  <span style="color:#f92672">annotations</span>:
      <span style="color:#f92672">prometheus.io/scrape</span>: <span style="color:#e6db74">&#39;true&#39;</span>
      <span style="color:#f92672">prometheus.io/port</span>:   <span style="color:#e6db74">&#39;9090&#39;</span>

<span style="color:#f92672">spec</span>:
  <span style="color:#f92672">selector</span>:
    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">prometheus-server</span>
  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">NodePort</span>
  <span style="color:#f92672">ports</span>:
    - <span style="color:#f92672">port</span>: <span style="color:#ae81ff">8080</span>
      <span style="color:#f92672">targetPort</span>: <span style="color:#ae81ff">9090</span>
      <span style="color:#f92672">nodePort</span>: <span style="color:#ae81ff">30000</span>
</code></pre></div><p>Or we just port forward the pod like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">k port-forward pods/prometheus-deployment-6bf45557bd-qc6t6 9090:9090 -n monitoring
</code></pre></div><p>And access it by simply opening the url: http://127.0.0.1:9090.</p>
<h2 id="prometheus-1">Prometheus</h2>
<p>Once you open it, you should see something like this, after running a small query:</p>
<p><img src="/img/hosting/prometheus.png" alt="prometheus.png"></p>
<h2 id="adding-in-resources-to-monitor">Adding in Resources to monitor</h2>
<p>In order to add a resource to monitor simply insert these annotations:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">  <span style="color:#f92672">annotations</span>:
      <span style="color:#f92672">prometheus.io/scrape</span>: <span style="color:#e6db74">&#39;true&#39;</span>
      <span style="color:#f92672">prometheus.io/port</span>:   <span style="color:#e6db74">&#39;9090&#39;</span>
</code></pre></div><p>Done.</p>
<h1 id="bonus-round----graphana">Bonus Round &ndash; Graphana</h1>
<p>We deployed Athens and Prometheus to monitor our cluster. We don&rsquo;t have anything before Prometheus that would be fancy, but installing Graphana is actually pretty easy. You can follow the instructions <a href="https://prometheus.io/docs/visualization/grafana/">here</a>.</p>
<p>A very easy way of looking at some nice metrics without worrying about anything like users and such, is running a Graphana instance in docker on your local machine with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run -d -p 3000:3000 grafana/grafana
</code></pre></div><p>&hellip; and while you are forwarding the Prometheus end-point you navigate to your Graphana instance by opening <code>127.0.0.1:3000</code> and install a Prometheus data-point like this:</p>
<p><img src="/img/hosting/graphana_config.png" alt="graphana config"></p>
<p>After that navigate to a new dashboard and select a simple PromQL metric to see if it&rsquo;s working. You should see something like this:</p>
<p><img src="/img/hosting/graphana.png" alt="graphana"></p>
<p>Now you can create a new dashboard add a PVC to our Prometheus instance and enjoy all the metrics you can store!</p>
<h1 id="conclusion">Conclusion</h1>
<p>And this is it folks. Everything is installed and we can monitor things now. If you give Prometheus a PVC you can build some pretty awesome time series graphs too and see how your cluster behaves over time.</p>
<p>Thank you for reading!
Gergely.</p>


</div>
</article>
</main>


<aside class="sidebar layout__second-sidebar">
<section>
<h4 class="menu"><a href="/blog/" class="active" aria-current="page">Blog</a></h4>
<ul class="menu">
<li><a href="/2021/04/21/readers-digest/">Reader&#39;s Digest 2021-04</a></li>
<li><a href="/2021/03/23/readers-digest/">Reader&#39;s Digest 2021-03</a></li>
<li><a href="/2021/02/01/readers-digest/">Reader&#39;s Digest 2021-01</a></li>
<li><a href="/2020/07/23/kubernetes-deploy-golang-react-apps-separately-part1/">How to deploy a Go (Golang) backend with a React frontend separately on Kubernetes - Part One</a></li>
<li><a href="/2020/05/11/good-code-reviews/">How to do a good code review</a></li>
<li><a href="/2020/02/17/making-spa-refresh-work-with-go-backend/">How to Make SPA refresh work with a Go backend</a></li>
<li><a href="/2019/10/15/kubernetes-cluster-part2/" class="active" aria-current="page">Using a Kubernetes based Cluster for Various Services with auto HTTPS - Part 2</a></li>
<li><a href="/2019/10/10/practical-go-summary/">Summary of Practical Go workshop from Dave Cheney</a></li>
<li><a href="/2019/10/01/killing-kubernetes-cluster/">How I killed my entire Kubernetes cluster</a></li>
<li><a href="/2019/09/21/kubernetes-cluster/">Using a Kubernetes based Cluster for Various Services with auto HTTPS</a></li>
<li><a href="/2019/09/19/updated-face-recog-drawing/">Updated Face-recog architecture drawing</a></li>
<li><a href="/2019/04/21/efferent-and-afferent-metrics-in-go/">Efferent and Afferent metrics in Go</a></li>
<li><a href="/2019/04/12/living-with-a-parser/">Living with a new Parser for a year</a></li>
<li><a href="/2019/03/19/deploy-hugo-blog-github-actions/">Deploy a Hugo Blog Github Actions</a></li>
<li><a href="/2019/03/19/cronohub/">Cronohub: Archive from anywhere to anywhere</a></li>
<li><a href="/2019/03/18/hugo-blog-with-travis-deployment/">Deploy a Hugo Blog with Travis on Git Push</a></li>
<li><a href="/2019/02/17/go-ssh-with-host-key-verification/">Go SSH with Host Key Verification</a></li>
<li><a href="/2018/10/29/go-plugin-tutorial/">Extensive tutorial on go-plugin.</a></li>
<li><a href="/2018/09/17/furnace-plugin-update/">Furnace with a new Plugin System</a></li>
<li><a href="/2018/09/13/gotp/">TOTP generator with account handling for multiple tokens</a></li>
<li><a href="/2018/06/08/fork-updater/">Keep your git forks updated all the time</a></li>
<li><a href="/2018/03/15/kubernetes-distributed-application/">Kubernetes distributed application deployment with sample Face Recognition App</a></li>
<li><a href="/2018/02/06/go-budapest-meetup/">Go Budapest Meetup</a></li>
<li><a href="/2018/01/23/nginx-certbot-ansible/">Ansible &#43; Nginx &#43; LetsEncrypt &#43; Wiki &#43; Nagios</a></li>
<li><a href="/2018/01/13/furnace-massive-update/">Huge Furnace Update</a></li>
<li><a href="/2017/12/04/commit-build-deploy/">Commit-Build-Deploy With AWS CodeBuild and Lambda</a></li>
<li><a href="/2017/11/06/furnace-ikea-manual/">Furnace Ikea Manual</a></li>
<li><a href="/2017/09/03/furnace-binaries/">Furnace Binaries</a></li>
<li><a href="/2017/05/31/notetaking/">Notetaking</a></li>
<li><a href="/2017/05/28/replace-eval-with-object-send-and-a-parser/">Replacing Eval with Object.send and a self written Parser</a></li>
<li><a href="/2017/04/16/building-furnace-part-4/">Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 4</a></li>
<li><a href="/2017/03/22/building-furnace-part-3/">Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 3</a></li>
<li><a href="/2017/03/19/building-furnace-part-2/">Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 2</a></li>
<li><a href="/2017/03/17/test-new-hugo/">Testing new Hugo if posts are generated properly</a></li>
<li><a href="/2017/03/16/building-furnace-part-1/">Furnace - The building of an AWS CLI Tool for CloudFormation and CodeDeploy - Part 1</a></li>
<li><a href="/2017/03/03/images-on-old-posts/">Images on older posts</a></li>
<li><a href="/2017/02/15/how-to-https-with-hugo-letsencrypt-haproxy/">How to HTTPS with Hugo LetsEncrypt and HAProxy</a></li>
<li><a href="/2016/11/02/google-signin-with-go-part2/">How to do Google Sign-In with Go - Part 2</a></li>
<li><a href="/2016/10/06/rscrap-ruby-scraping-with-cronjob-scripts/">RScrap scraper</a></li>
<li><a href="/2016/09/17/simple-hometheater-with-remote-and-flirc/">Budget Home Theather with a Headless Raspberry Pi and Flirc for Remote Controlling</a></li>
<li><a href="/2016/08/19/always-go-with-bytes/">Always Go with []byte</a></li>
<li><a href="/2016/08/16/never-changing-regex/">Global variable for never changing regex</a></li>
<li><a href="/2016/08/13/drupal-missing-toolbar-and-settings-not-saving/">Drupal missing ToolBar and settings not saving</a></li>
<li><a href="/2016/07/28/jenkins-best-practices/">Jenkins Best Practices Talk</a></li>
<li><a href="/2016/07/12/ruby-sieve/">Ruby Sieve</a></li>
<li><a href="/2016/07/12/simple-hook-to-rid-of-trouble/">Simple hook to rid of trouble</a></li>
<li><a href="/2016/06/12/google-signin-with-go/">How to do Google sign-in with Go</a></li>
<li><a href="/2016/04/17/minecraft-server-aws-s3-backup-part2/">Minecraft world automatic backup to AWS S3 bucket - Part 2 (Custom functions)</a></li>
<li><a href="/2016/04/16/minecraft-server-aws-s3-backup/">Minecraft world automatic backup to AWS S3 bucket</a></li>
<li><a href="/2016/03/29/minecraft-server-with-docker-and-osx/">Minecraft Server with Docker on OSX &#43; Mods</a></li>
<li><a href="/2016/03/09/wercker-fixed/">Wercker Fixed</a></li>
<li><a href="/2016/03/04/wercker-test-2/">Wercker Test</a></li>
<li><a href="/2016/02/10/hugo-autodeploy-with-wercker/">Hugo Autodeploy with Wercker and Github - Pages</a></li>
<li><a href="/2016/02/10/wercker-test/">Wercker Test</a></li>
<li><a href="/2016/02/02/doing-cors-in-go-with-gin-and-json/">Doing CORS in Go with Gin and JSON</a></li>
<li><a href="/2016/01/22/my-journey-in-advent-of-code/">My Journey in advent of code</a></li>
<li><a href="/2016/01/05/improving-performance-with-byte-slice-and-int-map/">Improving performance with byte slice and int map</a></li>
<li><a href="/2016/01/01/byte-arrays-and-channels/">Byte arrays and Channels</a></li>
<li><a href="/2015/12/29/use-byte-array-instead-of-strings/">Use Byte Array Instead of Strings</a></li>
<li><a href="/2015/12/29/use-byte-slice-instead-of-strings/">Use Byte Slice Instead of Strings</a></li>
<li><a href="/2015/12/23/recursive-freq-count/">Recursive Letter Frequency Count</a></li>
<li><a href="/2015/12/08/go-development-environment/">Go Development Environment</a></li>
<li><a href="/2015/12/07/welcome-to-my-new-blog/">Welcome To My New Blog</a></li>
<li><a href="/2015/11/20/go-jira-api-client/">Go JIRA API client</a></li>
<li><a href="/2015/11/15/the-one-hundred-day-github-challenge/">The One Hundred Day GitHub Challenge</a></li>
<li><a href="/2015/11/09/go-progress-quest/">Go Progress Quest</a></li>
<li><a href="/2015/10/26/kill-a-program-on-connecting-to-a-specific-wifi-osx/">Kill a Program on Connecting to a specific WiFi – OSX</a></li>
<li><a href="/2015/10/15/circular-buffer-in-go/">Circular buffer in Go</a></li>
<li><a href="/2015/10/15/jenkins-job-dsl-and-groovy-goodness/">Jenkins Job DSL and Groovy goodness</a></li>
<li><a href="/2015/10/04/datamunger-kata-with-go/">DataMunger Kata with Go</a></li>
<li><a href="/2015/10/02/how-to-aggregate-tests-with-jenkins-with-aggregate-plugin-on-non-relating-jobs/">How to Aggregate Tests with Jenkins with Aggregate Plugin on non-relating jobs</a></li>
<li><a href="/2015/09/07/i-used-to-have-great-ideas-on-the-toilet-but-i-no-longer-do/">I used to have great ideas on the toilet, but I no longer do.</a></li>
<li><a href="/2015/07/30/sieve-of-eratosthenes-in-go/">Sieve of Eratosthenes in Go</a></li>
<li><a href="/2015/07/22/quick-tip-for-debugging-headless-locally/">Quick Tip for Debugging Headless Locally</a></li>
<li><a href="/2015/07/19/converting-numbers-into-string-representations/">Converting numbers into string representations</a></li>
<li><a href="/2015/07/16/selenium-testing-with-packer-and-vagrant/">Selenium Testing with Packer and Vagrant</a></li>
<li><a href="/2015/07/15/bitwise-operator/">Bitwise &amp; Operator</a></li>
<li><a href="/2015/07/01/packer-0-8-1/">Packer 0.8.1.</a></li>
<li><a href="/2015/06/30/powershell-can-also-be-nice-or-installing-java-silently-and-waiting/">Powershell can also be nice -Or Installing Java silently and waiting</a></li>
<li><a href="/2015/06/27/the-packer-the-windows-and-the-vagrant-box/">The Packer, The Windows, and the Vagrant box</a></li>
<li><a href="/2015/06/06/docker-ruby-lotus-go-cd/">Docker &#43; Java &#43; Vagrant&#43; GO.CD</a></li>
<li><a href="/2015/05/21/setting-up-a-new-laptop-with-puppet/">Setting up a new Laptop with Puppet</a></li>
<li><a href="/2015/05/19/busy-building-the-future/">Busy building the future</a></li>
<li><a href="/2015/04/21/django-rpg-part-3/">Django – RPG – Part 3</a></li>
<li><a href="/2015/04/12/django-rpg-part-2/">Django – RPG – Part 2</a></li>
<li><a href="/2015/04/10/django-rpg-2/">Django – RPG – Part 1</a></li>
<li><a href="/2015/04/10/small-python-gui-to-calculate-lever-distance/">Small Python GUI to Calculate Lever Distance</a></li>
<li><a href="/2015/03/15/python-and-my-math-commitment/">Python and my Math commitment</a></li>
<li><a href="/2015/03/02/sphere-judge-online-python-kivy-android-app-part-2/">Sphere Judge Online – Python Kivy Android app – Part 2</a></li>
<li><a href="/2015/02/26/sphere-judge-online-python-kivy-android-app/">Sphere Judge Online – Python Kivy Android app</a></li>
<li><a href="/2015/02/08/why-lock-picking-is-like-testing/">Why Lock Picking is like Testing</a></li>
<li><a href="/2015/02/01/building-an-rpg-app-with-meteor-part-one-the-struggle/">Building an RPG App with Meteor – Part One – The struggle</a></li>
<li><a href="/2015/01/29/javascript-web-framework-meteor/">JavaScript Web Framework – Meteor</a></li>
<li><a href="/2015/01/28/when-cucumber-goes-wrong/">When cucumber goes wrong</a></li>
<li><a href="/2015/01/27/from-zero-to-hundred-in-four-seconds/">From Zero to Hundred in Four seconds</a></li>
<li><a href="/2015/01/26/why-testers-are-like-scientists/">Why Testers are, like scientists</a></li>
<li><a href="/2014/11/15/why-the-expressiveness-of-your-tests-is-important-part-one/">Why the expressiveness of your Tests is important – Part One</a></li>
<li><a href="/2014/11/07/updating-all-jenkins-jobs-via-jenkins-api-python/">Updating All Jenkins Jobs Via Jenkins API – Python</a></li>
<li><a href="/2014/10/23/the-seven-guidelines-of-context-driven-testing/">The seven Principles of Context Driven Testing – Mind Map</a></li>
<li><a href="/2014/08/25/python-course-review/">Python Course Review</a></li>
<li><a href="/2014/05/31/five-reasons-why-a-tester-should-learn-sql/">Five reasons why a tester should learn SQL</a></li>
<li><a href="/2014/05/26/tdd-is-dead-not-really/">TDD is Dead – Not really</a></li>
<li><a href="/2014/05/23/five-reasons-why-a-front-end-tester-should-learn-javascript/">Five reasons why a front-end tester should learn Javascript</a></li>
<li><a href="/2014/05/20/note-taking-what-when-how-often/">Note taking what when how often</a></li>
<li><a href="/2014/05/18/using-chrome-search-engine-multiple-search-params/">Using Chrome Search Engine – Multiple Search Params</a></li>
<li><a href="/2014/05/16/how-i-started-running/">How I started Running</a></li>
<li><a href="/2014/04/13/how-the-past-influences-the-present/">How the past influences the present</a></li>
<li><a href="/2014/02/19/example-when-to-use-the-strategy-pattern/">Example when to use the Strategy Pattern</a></li>
<li><a href="/2014/02/13/how-to-write-a-blog-why-long-posts-rarely-work/">How to write a blog – Why long posts rarely work</a></li>
<li><a href="/2014/02/11/how-to-check-content-header-on-unknown-number-of-items-python/">How to check content header on unknown number of items – Python</a></li>
<li><a href="/2014/02/11/the-method-of-loci-and-how-it-works-for-me/">The method of Loci and how it works for me</a></li>
<li><a href="/2014/02/10/why-you-should-learn-using-vim/">Why you should learn using Vim</a></li>
<li><a href="/2014/02/09/why-does-it-matter-if-i-sit-in-an-office-or-in-a-park/">Why does it matter if I sit in an office or in a park</a></li>
<li><a href="/2014/02/04/how-i-recruit-why-tool-requirements-are-stupid/">How I recruit – Why tool requirements are stupid</a></li>
<li><a href="/2013/11/02/why-you-should-care-about-the-quality-of-your-test-code/">Why you should care about the quality of your test code</a></li>
<li><a href="/2013/10/11/diary-of-a-bit/">Diary of a Bit</a></li>
<li><a href="/2013/08/26/low-tech-why-having-less-will-fell-more/">Low Tech – Why having less will fell more</a></li>
<li><a href="/2013/07/31/why-not-to-automate-everything/">Why not to automate everything…</a></li>
<li><a href="/2013/06/24/sublime-text-5/">Sublime text</a></li>
<li><a href="/2013/04/18/cucumber-jvm-and-afterall/">Cucumber-Jvm And @AfterAll</a></li>
<li><a href="/2013/04/15/cucumber-test-name-and-tags-on-feature/">Cucumber Test Name and Tags on Feature</a></li>
<li><a href="/2013/04/11/groovy-and-grails-course-summary/">Groovy and Grails course summary</a></li>
<li><a href="/2013/04/11/my-history-in-testing/">My history in testing</a></li>
<li><a href="/2013/01/31/its-all-about-human-interaction/">It’s all about human interaction.</a></li>
<li><a href="/2013/01/21/what-you-really-need-to-become-a-testing-expert/">What you really need to know to become a Testing Expert</a></li>
<li><a href="/2013/01/04/from-chaos-there-shall-be-order/">From Chaos There Shall Be Order</a></li>
<li><a href="/2012/12/12/methodologies-thought-patterns-lies/">Methodologies, Thought Patterns, Lies</a></li>
<li><a href="/2012/12/01/teas-testing-exploration-adventure-session/">TEAS: Testing Exploration Adventure Session</a></li>
<li><a href="/2012/10/09/how-to-eliminate-a-parameter-boom/">How to eliminate a parameter boom</a></li>
<li><a href="/2012/09/30/89/">Coderetreat London</a></li>
<li><a href="/2012/09/20/what-my-brain-is-up-to-the-whole-day/">What my brain is up to the whole day…</a></li>
<li><a href="/2012/09/09/learning-programming-with-a-visual-mind/">Learning programming with a visual mind</a></li>
<li><a href="/2012/07/12/tdd-and-game-of-life/">TDD and Game of Life</a></li>
<li><a href="/2012/06/28/journey-into-an-unknown-system/">Journey into an unknown system</a></li>
<li><a href="/2012/06/26/solution-to-wrap-kata/">Solution to Wrap Kata</a></li>
<li><a href="/2012/06/18/how-to-read-a-professional-book-for-slow-learners/">How to read a professional book for slow learners</a></li>
<li><a href="/2012/06/13/dont-throw-exception/">Don’t throw Exception</a></li>
<li><a href="/2012/06/13/how-to-write-a-professional-blog/">How to write a professional blog</a></li>
<li><a href="/2012/06/13/making-your-code-understandable/">Making your code understandable</a></li>
<li><a href="/2012/04/11/getting-dual-card-to-work-on-ubuntu-12-04/">Getting Dual Card to work on Ubuntu 12.04.</a></li>
<li><a href="/2012/03/04/jms-connection-setup-and-framework/">JMS Connection setup and Framework</a></li>
<li><a href="/2012/02/27/configuration/">Configuration</a></li>
<li><a href="/2012/02/26/hello-and-welcome/">Hello and welcome</a></li>
<li><a href="/2012/02/26/testing-code-tag/">Testing ‘code’ tag.</a></li>
</ul>
</section>
</aside>
<footer class="footer layout__footer">
<p><!-- raw HTML omitted --></p>
<p>Powered by <a href="https://gohugo.io/">Hugo</a> and the <a href="https://github.com/frjo/hugo-theme-zen">Zen theme</a>.</p>

</footer>
</div>
<div class="mobile-nav" dir="ltr">
  <div class="mobile-nav__cover"></div>
  <a href="#navigation" class="mobile-nav__toggle" aria-haspopup="true" role="button">Menu</a>
  <div class="mobile-nav__sheet">
    <div class="mobile-nav__region">
    
    </div>
    <nav class="mobile-nav__main-menu">
    <h2 class="visually-hidden">Main menu</h2>
    <ul class="mobile-nav__navbar">
    <li><a href="/">Home</a></li>
    <li><a href="/blog/" class="active" aria-current="page">Blog</a></li>
    </ul>
    </nav>
  </div>
</div>
</body>
</html>
