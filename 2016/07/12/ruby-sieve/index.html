<!DOCTYPE html>
<html lang="en-us">
    <head>
    <meta charset="UTF-8" />

    <meta name="generator" content="Hugo 0.83.1" /><meta name="theme-color" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>Ruby Sieve | Ramblings of a cloud engineer</title>

    <link rel="stylesheet" href="/css/meme.min.css" />

    
    
        <script src="/js/meme.min.js"></script>

    

    

    <meta name="author" content="hannibal" /><meta name="description" content="Though it could be done better, I’m sure, but I’m actually pretty satisfied with this one. It loops only twice as opposed to filtered ranges and whatnot other solutions to the sieve. I was thinking of rather creating a list and deleting elements from it, but that’s already three loops.
Maybe I’ll do a benchmark later on more solutions.
# Sieve contains a function to return a set of primes class Sieve def initialize(n) @n = n end # Returns a list of primes up to a certain limit # @param n limit # @return list of primes def primes marked = [] primes = [] (2." />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="Ramblings of a cloud engineer" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Ramblings of a cloud engineer" />
    <meta name="msapplication-starturl" content="../../../../" />
    <meta name="msapplication-TileColor" content="" />
    <meta name="msapplication-TileImage" content="../../../../icons/mstile-150x150.png" />
    <link rel="manifest" href="/manifest.json" />

    
    

    
    <link rel="canonical" href="https://skarlso.github.io/2016/07/12/ruby-sieve/" />
    

    
    

    
    

    
</head>

    <body>
        <div class="container">
            



            
                
                
                
            
            
    <main class="main single" id="main">
    <div class="main-inner">

        

        <article class="content post h-entry" data-align="default" data-type="posts" data-layout="post">

            <h1 class="post-title p-name">Ruby Sieve</h1>

            

            

            

            <div class="post-body e-content">
                <p>Though it could be done better, I&rsquo;m sure, but I&rsquo;m actually pretty satisfied with this one. It loops only twice as opposed to filtered ranges and whatnot other solutions to the sieve. I was thinking of rather creating a list and deleting elements from it, but that&rsquo;s already three loops.</p>
<p>Maybe I&rsquo;ll do a benchmark later on more solutions.</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="c1"># Sieve contains a function to return a set of primes</span>
<span class="k">class</span> <span class="nc">Sieve</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="vi">@n</span> <span class="o">=</span> <span class="n">n</span>
  <span class="k">end</span>

  <span class="c1"># Returns a list of primes up to a certain limit</span>
  <span class="c1"># @param n limit</span>
  <span class="c1"># @return list of primes</span>
  <span class="k">def</span> <span class="nf">primes</span>
    <span class="n">marked</span> <span class="o">=</span> <span class="o">[]</span>
    <span class="n">primes</span> <span class="o">=</span> <span class="o">[]</span>
    <span class="p">(</span><span class="mi">2</span><span class="o">..</span><span class="vi">@n</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
      <span class="k">unless</span> <span class="n">marked</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">primes</span><span class="o">.</span><span class="n">push</span> <span class="n">e</span>
        <span class="p">(</span><span class="n">e</span><span class="o">..</span><span class="vi">@n</span><span class="p">)</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">s</span><span class="o">|</span> <span class="n">marked</span><span class="o">.</span><span class="n">push</span> <span class="n">s</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="n">primes</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div><p>Cheers,
Gergely.</p>

            </div>

            


        </article>

        

        


        


        


        


        


        


        


        


        


    </div>
</main>


            

            

        </div>
        

        















    </body>
</html>
