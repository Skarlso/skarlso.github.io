<!DOCTYPE html>
<html lang="en-GB">
    <head>
    <meta charset="UTF-8" />

    <meta name="generator" content="Hugo 0.83.1" /><meta name="theme-color" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>Ruby Sieve | Ramblings of a cloud engineer</title>

    <link rel="stylesheet" href="/css/meme.min.css" />

    
    
        <script src="/js/meme.min.js"></script>

    

    

    <meta name="author" content="hannibal" /><meta name="description" content="Though it could be done better, I’m sure, but I’m actually pretty satisfied with this one. It loops only twice as opposed to filtered ranges and whatnot other solutions to the sieve. I was thinking of rather creating a list and deleting elements from it, but that’s already three loops.
Maybe I’ll do a benchmark later on more solutions.
# Sieve contains a function to return a set of primes class Sieve def initialize(n) @n = n end # Returns a list of primes up to a certain limit # @param n limit # @return list of primes def primes marked = [] primes = [] (2." />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="Ramblings of a cloud engineer" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Ramblings of a cloud engineer" />
    <meta name="msapplication-starturl" content="../../../../" />
    <meta name="msapplication-TileColor" content="" />
    <meta name="msapplication-TileImage" content="../../../../icons/mstile-150x150.png" />
    <link rel="manifest" href="/manifest.json" />

    
    

    
    <link rel="canonical" href="https://skarlso.github.io/2016/07/12/ruby-sieve/" />
    

    
    

    
    

    
</head>

    <body>
        <div class="container">
            



            
                
                
                
            
            
    <main class="main single" id="main">
    <div class="main-inner">

        

        <article class="content post h-entry" data-align="default" data-type="post">

            <h1 class="post-title p-name">Ruby Sieve</h1>

            

            

            

            <div class="post-body e-content">
                <p>Though it could be done better, I&rsquo;m sure, but I&rsquo;m actually pretty satisfied with this one. It loops only twice as opposed to filtered ranges and whatnot other solutions to the sieve. I was thinking of rather creating a list and deleting elements from it, but that&rsquo;s already three loops.</p>
<p>Maybe I&rsquo;ll do a benchmark later on more solutions.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#75715e"># Sieve contains a function to return a set of primes</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Sieve</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">initialize</span>(n)
    @n <span style="color:#f92672">=</span> n
  <span style="color:#66d9ef">end</span>

  <span style="color:#75715e"># Returns a list of primes up to a certain limit</span>
  <span style="color:#75715e"># @param n limit</span>
  <span style="color:#75715e"># @return list of primes</span>
  <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">primes</span>
    marked <span style="color:#f92672">=</span> <span style="color:#f92672">[]</span>
    primes <span style="color:#f92672">=</span> <span style="color:#f92672">[]</span>
    (<span style="color:#ae81ff">2</span><span style="color:#f92672">..</span>@n)<span style="color:#f92672">.</span>each <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>e<span style="color:#f92672">|</span>
      <span style="color:#66d9ef">unless</span> marked<span style="color:#f92672">.</span>include?(e)
        primes<span style="color:#f92672">.</span>push e
        (e<span style="color:#f92672">..</span>@n)<span style="color:#f92672">.</span>step(e) { <span style="color:#f92672">|</span>s<span style="color:#f92672">|</span> marked<span style="color:#f92672">.</span>push s }
      <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">end</span>
    primes
  <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>
</code></pre></div><p>Cheers,
Gergely.</p>

            </div>

            


        </article>

        

        


        


        


        


        


        


        


        


        


    </div>
</main>


            

            

        </div>
        

        















    </body>
</html>
