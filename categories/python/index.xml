<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Python on Ramblings of a cloud engineer</title>
    <link>https://skarlso.github.io/categories/python/</link>
    <description>Recent content in Python on Ramblings of a cloud engineer</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Tue, 19 Mar 2019 21:01:00 +0100</lastBuildDate><atom:link href="https://skarlso.github.io/categories/python/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Cronohub: Archive from anywhere to anywhere</title>
      <link>https://skarlso.github.io/2019/03/19/cronohub/</link>
      <pubDate>Tue, 19 Mar 2019 21:01:00 +0100</pubDate>
      
      <guid>https://skarlso.github.io/2019/03/19/cronohub/</guid>
      <description><![CDATA[<h1 id="intro">Intro</h1>
<p>Good afternoon folks.</p>
<p>Today, I would like to talk a little bit about <a href="https://github.com/cronohub/cronohub">Cronohub</a>. It&rsquo;s a Python application
which you can use to archive anything from anywhere to anywhere. It uses plugins to archive this versatility.</p>
<p>Let me show you some of its features.</p>
<h1 id="main-usage">Main Usage</h1>
<p>Cronohub is a python application which uses the power and ease of usage of Python to give the user a
framework. This Framework can then be used to implement concrete functionality in the form of plugins.</p>
<p>The plugins provide the essential working logic for Cronohub. Cronohub itself, is basically a Hub for these
plugins.</p>
<p>What can Cronohub be actually used for? Say, you have a gazillion Github repositories you would like to archive to a
S3 bucket. Or SCP to another server. Or to ownCloud&hellip; You would use cronohub as such:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">❯ cronohub -s {github,gitlab} -t {s3,owncloud,scp}
</code></pre></td></tr></table>
</div>
</div><p>It is this simple. What&rsquo;s going on here then? <code>-s</code> tells Cronohub to use a source plugin called <code>github</code> where as
<code>-t</code> tells it to use a target plugin called <code>s3</code> or <code>owncloud</code> or an <code>scp</code> operation.</p>
<h2 id="under-the-hood">Under the hood</h2>
<p>What happens then is that the source plugin downloads the repositories for a given user. The plugins themselves can
require certain configuration options to be provided. Like environment properties. To get the Help of a plugin you
can simply ask Cronohub like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">❯ cronohub help --source-help github
Help (github source plugin):
    - Environment Property:
        CRONO_GITHUB_TOKEN: a token with access to listing repositories for a given user.
    - File that filters the list of repositories to archive. If not present, all will be archived.
        ~/.config/cronohub/configurations/github/.repo_list
</code></pre></td></tr></table>
</div>
</div><p>It will display help information for that plugin.</p>
<p>Once the source plugin finished downloading the requested repositories to a given location it will pass on a list
of files to the target plugin for archiving. The target plugin takes this list of files and will add a timestamp
to the file and upload them with the requested operation.</p>
<p>The plugins take care of parallelization or threading if this makes it faster. For example the github plugin downloads
at most 5 archive files concurrently.</p>
<h1 id="plugins">Plugins</h1>
<p>What are plugins then? The plugins adhere to an ABC. An Abstract Base Class. This class defines the abilities and
structure of a plugin. It looks like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>


<span class="k">class</span> <span class="nc">CronohubSourcePlugin</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    This is the basic definition of a CronoHub plugin.
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34;
</span><span class="s2">        Returns a tuple (str, str) where there first parameter is the name of the
</span><span class="s2">        archive and the second is the location as a full path. Exp:
</span><span class="s2">        (&#34;my-project-12345&#34;, &#34;/home/user/projects/my-project/my-project.tar.gz&#34;)
</span><span class="s2">        &#34;&#34;&#34;</span>
        <span class="o">...</span>
</code></pre></td></tr></table>
</div>
</div><p>Validation will be called before the plugin can be used. This method can be used to validate settings
for a plugin, for example if a token is provided for the github plugin. Or a bucket name is defined for the
S3 plugin etc.</p>
<p>Help will display information just like we saw above and fetch will actually perform the downloading or
fetching of files to later archive.</p>
<p>Plugins are located in this repository: <a href="https://github.com/cronohub/plugins">Cronohub plugins</a>.</p>
<p>Hopefully, at some point I&rsquo;ll finish <a href="https://cronohub.org">https://cronohub.org</a> and then there will be an online repository for these.</p>
<p>Plugins are located at <code>~/.config/cronohub/plugins/{target,source}</code>. Each plugin must take care of its own
dependencies via a <code>requirements.txt</code> file.</p>
<p>Right now, there are only a few plugins available.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Source Plugins</th>
<th style="text-align:center">Target Plugins</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Github</td>
<td style="text-align:center">S3</td>
</tr>
<tr>
<td style="text-align:center">Gitlab</td>
<td style="text-align:center">SCP</td>
</tr>
<tr>
<td style="text-align:center">Local</td>
<td style="text-align:center">ownCloud</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">No-Op</td>
</tr>
</tbody>
</table>
<p>More are hopefully on the way. Local is simply gathering a list of files from a folder. And no-op is what it says. It&rsquo;s good for debugging a source plugin as it doesn&rsquo;t do anything else but displays the files it got from the source plugin.</p>
<h1 id="installation">Installation</h1>
<p>Installing is dead trivial. Simply run:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">pip install cronohub
</code></pre></td></tr></table>
</div>
</div><p>&hellip; and that&rsquo;s it. It&rsquo;s published on pypi.org.</p>
<h1 id="contribution">Contribution</h1>
<p>Plugin contributions are heartily welcomed!</p>
<p>And that&rsquo;s it.</p>
<p>Thank you for reading,</p>
<p>Gergely.</p>
]]></description>
    </item>
    
    <item>
      <title>Django – RPG – Part 3</title>
      <link>https://skarlso.github.io/2015/04/21/django-rpg-part-3/</link>
      <pubDate>Tue, 21 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2015/04/21/django-rpg-part-3/</guid>
      <description><![CDATA[<p>Hello folks.</p>
<p>A small update to this. I created the model now, which is the database design for this app. It&rsquo;s very simple, nothing fancy. Also, I&rsquo;m writing the app with Python 3 from now on.</p>
<p>Here is the model now:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>

<span class="c1"># Create your models here.</span>


<span class="k">class</span> <span class="nc">Item</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&#34;Item&#34;</span><span class="p">)</span>
    <span class="n">damage</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">)</span>
    <span class="n">defense</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">)</span>
    <span class="n">consumable</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>


<span class="k">class</span> <span class="nc">Inventory</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">items</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span>


<span class="k">class</span> <span class="nc">Character</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># By default Django uses the primery key of the related object.</span>
    <span class="c1"># Hence, no need to specify User.id.</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">inventory</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Inventory</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</code></pre></td></tr></table>
</div>
</div><p>Worth noting a few things here. The __str__ is only with Python 3. In Python 2 it would be unicode. And the OneToOne and the foreign key are automatically using Primary keys defined in the references model. The __str__ is there to return some view when you are debugging in the console instead of [&lt;Item: Item object&gt;].</p>
<p>In order to apply this change you just have to run this commend (given you set up your app in the settings.py as an INSTALLED_APP):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
python manage.py makemigrations polls
</code></pre></td></tr></table>
</div>
</div><p>This creates the migration script. And this applies it:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>
</code></pre></td></tr></table>
</div>
</div><p>I love the fact that django creates incremental migration scripts out of the box. So if there was any problem at all, you can always roll back. Which comes very handy in certain situations.</p>
<p>That&rsquo;s it.</p>
<p>Thanks for reading!</p>
<p>Gergely.</p>
]]></description>
    </item>
    
    <item>
      <title>Django – RPG – Part 2</title>
      <link>https://skarlso.github.io/2015/04/12/django-rpg-part-2/</link>
      <pubDate>Sun, 12 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2015/04/12/django-rpg-part-2/</guid>
      <description><![CDATA[<p>Hello.</p>
<p>Continuing where we left off with the Django RPG project. Next up is implementing a rudimentary registration and adding the ability to create a character. Maybe even, design the database through django&rsquo;s modelling.</p>
<p>Since we are using Django&rsquo;s very own authentication model, I think we are covered in terms of users. Let&rsquo;s add two things for now. An Index page, where there is a link to login and a link to registration.</p>
<p>Adding the index first. Later I would like to switch to a base template model, but for now, I created a simple index.html page. That only contains the two links to the two views. The views are a simple function call in the views.py too which the URLConfig will later point to.</p>
<p>For now, the index function looks like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
  <span class="s1">&#39;&#39;&#39;
</span><span class="s1">  myrpg/rpg/views.py
</span><span class="s1">  &#39;&#39;&#39;</span>
	<span class="n">title</span> <span class="o">=</span> <span class="s2">&#34;My RPG&#34;</span>
	<span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="n">title</span><span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>Note, that the title here is utterly unimportant but because I want to switch to a base.html template I&rsquo;ll leave it here for later usage.</p>
<p>That concludes the index. Now, let&rsquo;s create the registration. That is a little more complex, but still rather easy. We are just checking of the user already exists or not, if so, display and error, if not, create the user.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># myrpg/rpg/views.py</span>
<span class="k">def</span> <span class="nf">registration</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
	<span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;Please register.&#34;</span>
	<span class="n">username</span> <span class="o">=</span> <span class="n">password</span> <span class="o">=</span> <span class="n">email</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
	<span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">:</span>
		<span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
		<span class="n">email</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">)</span>
		<span class="n">password</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
			<span class="c1"># raise forms.ValidationError(&#34;Username %s is already in use.&#34; % username)</span>
			<span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;Username </span><span class="si">%s</span><span class="s2"> is already in use. Please try another.&#34;</span> <span class="o">%</span> <span class="n">username</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span><span class="p">,</span> <span class="n">email</span> <span class="o">=</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span> <span class="o">=</span> <span class="n">password</span><span class="p">)</span>
				<span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;Thank you for registering with us </span><span class="si">%s</span><span class="s2">!&#34;</span> <span class="o">%</span> <span class="n">user</span><span class="o">.</span><span class="n">username</span>
			<span class="k">except</span><span class="p">:</span>
				<span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;Unexpected error occured: </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[]</span>

	<span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s1">&#39;registration.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">state</span><span class="p">},</span> <span class="n">context_instance</span> <span class="o">=</span> <span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Here, I&rsquo;m checking to see of the username already exists with the filter. This is by using Django&rsquo;s model which models the database like hibernate. It&rsquo;s a simple query. And I&rsquo;m doing this, because this is faster than raising an exception. Later on, I&rsquo;ll be switching to a validation framework and django&rsquo;s own auth view. Because, why not.</p>
<p>The URL conf looks like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1">#myrpg/rpg/urls.py</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^login/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login_user</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;login&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^registration/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">registration</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;registration&#39;</span><span class="p">),</span>
<span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>And this now, resides in a file under the RPG app and not the main one. The main one includes this one, like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1">#myrpg/urls.py</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># Examples:</span>
    <span class="c1"># url(r&#39;^$&#39;, &#39;myrpg.views.home&#39;, name=&#39;home&#39;),</span>
    <span class="c1"># url(r&#39;^blog/&#39;, include(&#39;blog.urls&#39;)),</span>

    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^rpg/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;rpg.urls&#39;</span><span class="p">)),</span>
<span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>That&rsquo;s it for now. As always, you can check out the code under github.</p>
<p>Tune in next time, when I&rsquo;ll attempt to create a view to create a Character for a logged in user and link it to the user. I&rsquo;ll do this with django&rsquo;s model framework.</p>
<p>Thanks for reading,</p>
<p>Gergely.</p>]]></description>
    </item>
    
    <item>
      <title>Django – RPG – Part 1</title>
      <link>https://skarlso.github.io/2015/04/10/django-rpg-2/</link>
      <pubDate>Fri, 10 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2015/04/10/django-rpg-2/</guid>
      <description><![CDATA[<p>Hi folks.</p>
<p>So last time, we tried to implement a little RPG of mine using Meteor, which failed miserably. This time we are going to try and use Django. Let&rsquo;s have at it, shall we?</p>
<p>If you don&rsquo;t know what django is (than you are probably not reading this blog entry anyways. ), have a look =&gt; <a href="https://www.djangoproject.com/" target="_blank">Link</a>. It&rsquo;s a Python Web Framework.</p>
<h1 id="in-the-beginning">In the beginning</h1>
<p>So here we are again. I&rsquo;m starting off by creating the skeleton for my RPG. First, the welcome page with a tiny login capability. Which means session tracking. For now, on the same page.</p>
<p>To create the skeleton I just run this little command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">django</span><span class="o">-</span><span class="n">admin</span><span class="o">.</span><span class="n">py</span> <span class="n">startproject</span> <span class="n">myrpg</span>
</code></pre></td></tr></table>
</div>
</div><p>Easy enough, right? Basic directory structure is created. You can read that in django&rsquo;s own documentation: <a href="https://docs.djangoproject.com/en/1.8/intro/tutorial01/" target="_blank"><a href="https://docs.djangoproject.com/en/1.8/intro/tutorial01/">https://docs.djangoproject.com/en/1.8/intro/tutorial01/</a></a></p>
<p>I&rsquo;m using Sublime Text 3 to build this app. I was thinking of pycharm, but that would take away too much fun.</p>
<p>By default Django uses SQLlite and I&rsquo;m okay with that.</p>
<p>The basics are there. Let&rsquo;s move to higher ground. The next step can be to design the login page. I&rsquo;m not much of a designer so I&rsquo;ll leave that part to people who care more / understand it better. I&rsquo;m only looking for a simple Login with a username and a password. Nothing fancy. And I&rsquo;m going to use Django&rsquo;s auth system for users: <tt class="xref py py-mod docutils literal"><span class="pre"><a class="reference internal" title="django.contrib.auth: Django's authentication framework." href="https://docs.djangoproject.com/en/1.8/topics/auth/#module-django.contrib.auth" target="_blank">django.contrib.auth</a>.</span></tt></p>
<p>It&rsquo;s pretty good, has lots of features and can auth a user pretty quickly given a username and password, which is all I want for now.</p>
<p>I running a migrate command to create all the necessary tables and data:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
python manage.py migrate
</code></pre></td></tr></table>
</div>
</div><p>A quick check with sqlite3 and running **.schema **showed me that the tables are indeed created and filled with default data for all the **INSTALLED_APPS **django has at the moment.</p>
<p>I did a quick check with <em>python manage.py runserver</em> and everything seems to work fine.</p>
<h1 id="the-rpg-app">The RPG App</h1>
<h1 id="heading"></h1>
<p>So, that concludes the setup. Following the tutorial, django has this notion of apps and projects. In short, a project is a set of configurations and applications which forms a website. Hence, I&rsquo;m going to create an RPG APP for now. The tutorial continues with a Poll type of App, but I&rsquo;m sure I can apply the same things to a login page.</p>
<p>First, let&rsquo;s create the App using the command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
python manage.py startapp rpg
</code></pre></td></tr></table>
</div>
</div><p>That creates the skeleton for the app. The tutorial then suggests to define the database first. Which I think is a bad idea; usually when doing design, you don&rsquo;t want to start with the database model. But for now, I shall comply. We want a login page and we are using the auth module, which means, for now, I don&rsquo;t care about the database. Skip.</p>
<p>I&rsquo;m going to go off corse for now, since I only want to create a basic login. For that, I have to read up on views and models a little bit in order to create a simple login page. Be right back.</p>
<p>I&rsquo;m fighting the basic auth system at the moment. Everything seems to be working fine. In the Admin screen I was able to add a basic user to do some debugging, but for now, the login seems to not work with this error:</p>
<p><em>CSRF verification failed. Request aborted</em></p>
<p>This is the CSRF protection which came out with Django. I did a bit of more document reading and setup the CSRF as was described here:</p>
<p><a href="https://docs.djangoproject.com/en/1.8/ref/csrf/" target="_blank"><a href="https://docs.djangoproject.com/en/1.8/ref/csrf/">https://docs.djangoproject.com/en/1.8/ref/csrf/</a></a></p>
<p>However, I&rsquo;m still facing the same problem. Let&rsquo;s research further. Ahh yes. I wasn&rsquo;t returning the request context I&rsquo;ve set up. Before:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render_to_response</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">authenticate</span><span class="p">,</span> <span class="n">login</span>
<span class="kn">from</span> <span class="nn">django.template.context_processors</span> <span class="kn">import</span> <span class="n">csrf</span>

<span class="k">def</span> <span class="nf">login_user</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">c</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">c</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">csrf</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
    <span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;Please log in below...&#34;</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">:</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>

        <span class="n">user</span> <span class="o">=</span> <span class="n">authenticate</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
                <span class="n">login</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span>
                <span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;You&#39;re successfully logged in!&#34;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;Your account is not active, please contact the site admin.&#34;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;Your username and/or password were incorrect.&#34;</span>

    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s1">&#39;auth.html&#39;</span><span class="p">,{</span><span class="s1">&#39;state&#39;</span><span class="p">:</span><span class="n">state</span><span class="p">,</span> <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><p>After:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render_to_response</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">authenticate</span><span class="p">,</span> <span class="n">login</span>
<span class="kn">from</span> <span class="nn">django.template.context_processors</span> <span class="kn">import</span> <span class="n">csrf</span>
<span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">RequestContext</span>

<span class="k">def</span> <span class="nf">login_user</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;Please log in below...&#34;</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">:</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>

        <span class="n">user</span> <span class="o">=</span> <span class="n">authenticate</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
                <span class="n">login</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span>
                <span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;You&#39;re successfully logged in!&#34;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;Your account is not active, please contact the site admin.&#34;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s2">&#34;Your username and/or password were incorrect.&#34;</span>

    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s1">&#39;auth.html&#39;</span><span class="p">,{</span><span class="s1">&#39;state&#39;</span><span class="p">:</span><span class="n">state</span><span class="p">,</span> <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">},</span> <span class="n">context_instance</span><span class="o">=</span><span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Notice that now I&rsquo;m returning the request context at the end when I&rsquo;m rendering the response. And lo' and behold, my login is now working.</p>
<h1 id="progress-so-far">Progress so far</h1>
<p> </p>
<p>So, I&rsquo;ve set up a user using the Admin portal accessible from the app / admin. Created my default rpg app, and added my default auth view into a template folder. Configured the URL setting in <strong>urls.py</strong> to look like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^login/$&#39;</span><span class="p">,</span> <span class="s1">&#39;rpg.views.login_user&#39;</span><span class="p">),</span>
</code></pre></td></tr></table>
</div>
</div><p>Very basic for now, but when I return to it, we are going to clean it up and then continue with implementing the main screen which will greet the user and display some stats about his/her character.</p>
<p>The whole code is under github here =&gt; <a href="https://github.com/Skarlso/myrpg" target="_blank"><a href="https://github.com/Skarlso/myrpg">https://github.com/Skarlso/myrpg</a></a></p>
<p>Bye for now,</p>
<p>And thanks for reading.</p>
<p>Gergely.</p>]]></description>
    </item>
    
    <item>
      <title>Small Python GUI to Calculate Lever Distance</title>
      <link>https://skarlso.github.io/2015/04/10/small-python-gui-to-calculate-lever-distance/</link>
      <pubDate>Fri, 10 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2015/04/10/small-python-gui-to-calculate-lever-distance/</guid>
      <description><![CDATA[<p>Hi folks.</p>
<p>Just a small script which calculates your distance from a lever focal point if you know your weight, the object&rsquo;s weight and the object&rsquo;s and the distance the object has from the focal point of the lever.</p>
<p>Like this:</p>
<p>This script will give you D1. And this is how it will look like in doing so:</p>
<p>So, in order for me (77kg) to lift an object of 80kg which is on a, by default, 1 meter long lever, I have to stand back ~1.03meters. Which is totally cool, right?</p>
<p>Here is the code:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="kn">from</span> <span class="nn">Tkinter</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">ttk</span>

<span class="k">def</span> <span class="nf">calculate</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">your_weight_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">your_weight</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">object_weight_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">object_weight</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">object_distance_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">object_distance</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">your_distance</span><span class="o">.</span><span class="n">set</span><span class="p">((</span><span class="n">object_weight_value</span> <span class="o">*</span> <span class="n">object_distance_value</span><span class="p">)</span> <span class="o">/</span> <span class="n">your_weight_value</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">pass</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Lever distance counter&#34;</span><span class="p">)</span>

<span class="n">mainframe</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&#34;4 4 12 12&#34;</span><span class="p">)</span>
<span class="n">mainframe</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">W</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">S</span><span class="p">))</span>
<span class="n">mainframe</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mainframe</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">your_weight</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">()</span>
<span class="n">object_weight</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">()</span>
<span class="n">object_distance</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">()</span>
<span class="n">your_distance</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">()</span>

<span class="n">object_distance</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&#34;1&#34;</span><span class="p">)</span>

<span class="n">your_weight_entry</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">your_weight</span><span class="p">)</span>
<span class="n">your_weight_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">E</span><span class="p">))</span>
<span class="n">object_weight_entry</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">object_weight</span><span class="p">)</span>
<span class="n">object_weight_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">E</span><span class="p">))</span>
<span class="n">object_distance_entry</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">object_distance</span><span class="p">)</span>
<span class="n">object_distance_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">E</span><span class="p">))</span>


<span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">your_distance</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">E</span><span class="p">))</span>
<span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&#34;Your weight&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
<span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&#34;Object weight&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
<span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&#34;Object Distance&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
<span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&#34;Your Distance&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>

<span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&#34;kg&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
<span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&#34;kg&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
<span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&#34;m&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
<span class="n">ttk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&#34;m&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>

<span class="n">ttk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">mainframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&#34;Calculate&#34;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">calculate</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>

<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">mainframe</span><span class="o">.</span><span class="n">winfo_children</span><span class="p">():</span> <span class="n">child</span><span class="o">.</span><span class="n">grid_configure</span><span class="p">(</span><span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">your_weight_entry</span><span class="o">.</span><span class="n">focus</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">calculate</span><span class="p">)</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>Please enjoy, and feel free to alter in any way. I&rsquo;m using Tkinter and a grid layout which I find very easy to work with.</p>
<p>Thanks for reading,
Gergely.</p>
]]></description>
    </item>
    
    <item>
      <title>Python and my Math commitment</title>
      <link>https://skarlso.github.io/2015/03/15/python-and-my-math-commitment/</link>
      <pubDate>Sun, 15 Mar 2015 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2015/03/15/python-and-my-math-commitment/</guid>
      <description><![CDATA[<p>Let&rsquo;s talk about plans. It&rsquo;s good to have one. For example, I have a plan for this year.</p>
<p>I kind of like math. So, I have this book:</p>
<p>It&rsquo;s 1400 pages long and basically, has everything in it. It&rsquo;s a rather exhaustive book. Hence, my plan is to finish the book by the end of 2015 and write a couple of python scripts that calculate something interesting.</p>
<p>(2021 Hindsight): Yeah, I didn&rsquo;t manage this&hellip; But it&rsquo;s a cool idea, let&rsquo;s see if I can get around coming further. I managed to get until 500 pages or so, before life stepped in.</p>
<p>For example, Newton&rsquo;s law of cooling how I learned it is:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">k*log(2.5)*((t(0)-k)/(t-k))
</code></pre></td></tr></table>
</div>
</div><p>Where k =&gt; a material&rsquo;s surface based constant. T(0) =&gt; initial temperature. T =&gt; target temperature. K =&gt; Environment&rsquo;s temperature.</p>
<p>A simple python script for this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="c1"># Calculating Newton&#39;s law of Cooling</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">log</span>

<span class="k">def</span> <span class="nf">calculation</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">Tz</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">K</span><span class="p">):</span>
	<span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="n">Tz</span> <span class="o">-</span> <span class="n">K</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">T</span> <span class="o">-</span> <span class="n">K</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">k</span> <span class="o">*</span> <span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">))</span>

<span class="n">k</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">Tz</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">K</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&#34;Calculating aproximate temperature for given parameters: k=</span><span class="si">%s</span><span class="s2">, Tz=</span><span class="si">%s</span><span class="s2">C, T=</span><span class="si">%s</span><span class="s2">C, K=</span><span class="si">%s</span><span class="s2">C&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">Tz</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">K</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="n">calculation</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">Tz</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">T</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">K</span><span class="p">)))</span>
</code></pre></td></tr></table>
</div>
</div><p>Enjoy.</p>
<p>And as always,
Thanks for reading!</p>
]]></description>
    </item>
    
    <item>
      <title>Sphere Judge Online – Python Kivy Android app – Part 2</title>
      <link>https://skarlso.github.io/2015/03/02/sphere-judge-online-python-kivy-android-app-part-2/</link>
      <pubDate>Mon, 02 Mar 2015 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2015/03/02/sphere-judge-online-python-kivy-android-app-part-2/</guid>
      <description><![CDATA[<p>Here we are again. I will attempt to further this little journey of mine into the land of Android and Python.</p>
<p>This is the second part of the advanture you can read the first one a little bit back.</p>
<h1 id="the-script">The Script</h1>
<p>We left off at a point where I successfully configured my environment and compiled my first hello world APK. At that point it took a little bit fiddling to get it to work on my phone.</p>
<p>Now, I have progressed a little bit into spoj&rsquo;s page parsing. The code so far is as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;hannibal&#39;</span>

<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="kn">import</span> <span class="nn">lxml.html</span> <span class="kn">as</span> <span class="nn">lh</span>

<span class="n">random_page_number</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(,</span> <span class="mi">63</span><span class="p">)</span> <span class="c1"># 63 being the maximum page number at spoj</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;http://www.spoj.com/problems/classical/sort=0,start=</span><span class="si">%d</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">random_page_number</span> <span class="o">*</span> <span class="mi">50</span> <span class="o">-</span> <span class="mi">50</span><span class="p">))</span>
<span class="c1"># Problem Div XPath =&gt; //[@class=&#34;problems&#34;]</span>

<span class="n">spoj_page</span> <span class="o">=</span> <span class="n">lh</span><span class="o">.</span><span class="n">document_fromstring</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">links_to_problems</span> <span class="o">=</span> <span class="n">spoj_page</span><span class="p">[]</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&#34;//tr[@class=&#39;problemrow&#39;]/td[2]/a&#34;</span><span class="p">)</span>

<span class="n">current_link</span> <span class="o">=</span> <span class="n">links_to_problems</span><span class="p">[</span><span class="n">randint</span><span class="p">(,</span> <span class="nb">len</span><span class="p">(</span><span class="n">links_to_problems</span><span class="p">))]</span>
<span class="k">print</span><span class="p">(</span><span class="n">current_link</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">])</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;http://www.spoj.com/</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">current_link</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">])</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&#34;utf-8&#34;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>This is pretty straight forward so far. It gets the problems page, loads in all of the links and prints it out.</p>
<p>My goal is an application which looks something like this:</p>
<p>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>___</p>
<p>|   _<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>  |</p>
<p>|  |                                                                           | |</p>
<p>|  |                                                                           | |</p>
<p>|  |                    Display Problem Description               | |</p>
<p>|  |                                                                           | |</p>
<p>|  |                                                                           | |</p>
<p>|  |                                                                           | |</p>
<p>|  |_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_____ | |</p>
<p>|                                                                                 |</p>
<p>|                                                                                 |</p>
<p>|                         Button:Finish Problem                        |</p>
<p>|                                                                                 |</p>
<p>|                         Button:Next Problem                          |</p>
<p>|_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>________ |</p>
<p>It&rsquo;s very basic. When it loads up, it will gather and display a new problem. You have two options, either get a new one, or save / finish this item, saying you never want to see it again.</p>
<p>Let&rsquo;s put the first part into an android app. Just gather data, and get it disaplyed.</p>
<p>*Queue a days worth of hacking and frustrated cussing.*</p>
<p>So, turns out it&rsquo;s not as easy as I would have liked it to be. I ran into some pretty nasty problems. Some of them I&rsquo;ll write down below for the record, and an attempted solution as well.</p>
<h1 id="problems">Problems</h1>
<p><strong>#1:</strong> <strong>Problem:</strong> Libraries. I&rsquo;m using lxml and requests. Requests is a pure python library, but lxml is partially C. Which apparently is not very well supported yet.</p>
<p><strong>Solution (Partial):</strong> I could optain request by two ways, but the most simple one, was basically just building my distribution with the optional requests module like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
./distribute.sh -m &#34;openssl pil requests kivy&#34;
</code></pre></td></tr></table>
</div>
</div><p>Attempting to do the same with LXML resulted in a compile issue which I tracked down to something like: &ldquo;sorry, but we don&rsquo;t support OSX&rdquo;. But it&rsquo;s okay. There are other ways to parse an html page, I just really like the xpath filter. So I soldiered on with trying to get something to work at least.</p>
<p><strong>#3: Problem:</strong> <em>Bogus compile time exception.</em> There were some exceptions on the way when I was trying to compile with buildozer. <strong>Solution:</strong> It&rsquo;s interesting because previously my solution to another compile time issue was to use a specific version of Cython. But this time the solution was to actually remove that version and install the latest one. Which is 0.22 as of the time of this writing. So:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
sudo pip update cython
</code></pre></td></tr></table>
</div>
</div><p><strong>#2: Problem:</strong> Connection. So now, I&rsquo;m down to the bare bone. At this point, I just want to see a page source in a label. My code looks like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">
<span class="kn">import</span> <span class="nn">kivy</span>
<span class="n">kivy</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="s1">&#39;1.8.0&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">kivy.lang</span> <span class="kn">import</span> <span class="n">Builder</span>
<span class="kn">from</span> <span class="nn">kivy.uix.gridlayout</span> <span class="kn">import</span> <span class="n">GridLayout</span>
<span class="kn">from</span> <span class="nn">kivy.properties</span> <span class="kn">import</span> <span class="n">NumericProperty</span>
<span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>

<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="c1"># import lxml.html as lh</span>

<span class="c1"># import sys</span>
<span class="c1"># sys.path.append(&#39;/sdcard/com.googlecode.pythonforandroid/extras/python/site-packages&#39;)</span>


<span class="n">Builder</span><span class="o">.</span><span class="n">load_string</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;
</span><span class="s1">:
</span><span class="s1">    cols: 1
</span><span class="s1">    Label:
</span><span class="s1">        text: root.get_problem()
</span><span class="s1">    Button:
</span><span class="s1">        text: &#39;Click me! </span><span class="si">%d</span><span class="s1">&#39; </span><span class="si">% r</span><span class="s1">oot.counter
</span><span class="s1">        on_release: root.my_callback()
</span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">SpojAppScreen</span><span class="p">(</span><span class="n">GridLayout</span><span class="p">):</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s1">&#39;The button has been pushed&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">get_problem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">random_page_number</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(,</span> <span class="mi">63</span><span class="p">)</span> <span class="c1"># 63 being the maximum page number at spoj</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;http://www.spoj.com/problems/classical/sort=0,start=</span><span class="si">%d</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">random_page_number</span> <span class="o">*</span> <span class="mi">50</span> <span class="o">-</span> <span class="mi">50</span><span class="p">))</span>

        <span class="c1"># Problem Div XPath =&gt; //[@class=&#34;problems&#34;]</span>

        <span class="c1"># spoj_page = lh.document_fromstring(r.text)</span>
        <span class="c1"># links_to_problems = spoj_page[0].xpath(&#34;//tr[@class=&#39;problemrow&#39;]/td[2]/a&#34;)</span>

        <span class="c1"># current_link = links_to_problems[randint(0, len(links_to_problems))]</span>
        <span class="c1"># print(current_link.attrib[&#39;href&#39;])</span>
        <span class="c1"># r = requests.get(&#34;http://www.spoj.com/%s&#34; % current_link.attrib[&#39;href&#39;])</span>
        <span class="c1"># print(r.text.encode(&#34;utf-8&#34;))</span>
        <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">SpojApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">SpojAppScreen</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">SpojApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>However, running this results in a connection error in adb logcat:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
I/python  (27610):  kivy.lang.BuilderException: Parser: File &#34;&#34;, line 5:
I/python  (27610):  ...
I/python  (27610):        3:    cols: 1
I/python  (27610):        4:    Label:
I/python  (27610):  &amp;gt;&amp;gt;    5:        text: root.get_problem()
I/python  (27610):        6:    Button:
I/python  (27610):        7:        text: &#39;Click me! %d&#39; % root.counter
I/python  (27610):  ...
I/python  (27610):  BuilderException: Parser: File &#34;&#34;, line 5:
I/python  (27610):  ...
I/python  (27610):        3:    cols: 1
I/python  (27610):        4:    Label:
I/python  (27610):  &amp;gt;&amp;gt;    5:        text: root.get_problem()
I/python  (27610):        6:    Button:
I/python  (27610):        7:        text: &#39;Click me! %d&#39; % root.counter
I/python  (27610):  ...
I/python  (27610):  ConnectionError: (&#39;Connection aborted.&#39;, gaierror(4, &#39;non-recoverable failure in name resolution.&#39;))
</code></pre></td></tr></table>
</div>
</div><p><strong>Solution:</strong> I tried simply putting out a random number at some point, which actullay worked, so I know it&rsquo;s the connection. I&rsquo;m guessing I need permission to access the network. Which would be this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
uses-permission android:name=&#34;android.permission.INTERNET&#34;
</code></pre></td></tr></table>
</div>
</div><p>And yes! Building and installing it with this additional permission got me so far as I can display the web page&rsquo;s content in a label.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go">
<span class="p">.</span><span class="o">/</span><span class="nx">build</span><span class="p">.</span><span class="nx">py</span> <span class="o">--</span><span class="kn">package</span> <span class="nx">org</span><span class="p">.</span><span class="nx">spoj</span> <span class="o">--</span><span class="nx">permission</span> <span class="nx">INTERNET</span> <span class="o">--</span><span class="nx">name</span> <span class="s">&#34;Spoj&#34;</span> <span class="o">--</span><span class="nx">version</span> <span class="mf">1.0</span> <span class="o">--</span><span class="nx">dir</span> <span class="o">/</span><span class="nx">Users</span><span class="o">/</span><span class="nx">hannibal</span><span class="o">/</span><span class="nx">PythonProjects</span><span class="o">/</span><span class="nx">spoj</span><span class="o">/</span> <span class="nx">debug</span>
</code></pre></td></tr></table>
</div>
</div><p>There is a saying that you should end on a high note, so that is what I&rsquo;m going to do here right now. Join me next time, when I&rsquo;ll try to replace lxml with something else.</p>
<p>Thanks for reading!</p>
<p>Gergely.</p>
]]></description>
    </item>
    
    <item>
      <title>Sphere Judge Online – Python Kivy Android app</title>
      <link>https://skarlso.github.io/2015/02/26/sphere-judge-online-python-kivy-android-app/</link>
      <pubDate>Thu, 26 Feb 2015 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2015/02/26/sphere-judge-online-python-kivy-android-app/</guid>
      <description><![CDATA[<p>Hello folks.</p>
<p>Today I would like to take you on a journey I fought myself through in order to write a python android app, which gets you a random problem from <a href="http://www.spoj.com/problems/classical/" target="_blank">Sphere Judge Online</a>. Then you can mark it as solved and it will be stored as such, and you can move on to the next problem. With the words of Neil deGrasse Tyson, Come with Me!</p>
<h1 id="beginnings">Beginnings</h1>
<p>When I first embarked on this endeavour I ran into numerous errors, many amongst them being compilation issues when I was trying to install libraries.</p>
<p>I started to write down all of these, and then started fresh on a new machine. I realised that ALL of my problems where only because of **ONE **thing. One thing, which I wanted to do, but it ended up being the death of me. And that is.. *Drummrolls* **Python 3. **I tried doing all the things that I started to do, with Python 3. Turns out, that neither libraries are supporting it very well yet. And that&rsquo;s including Cython as well, which I thought would be up to speed by now. But sadly, it&rsquo;s not.</p>
<h1 id="prerequisite">Prerequisite</h1>
<p>In order to go any further we need a few things first. For this to work, you&rsquo;ll have to perform these things in order as I found out later. And certain versions of certain libraries are required instead of the latest ones.</p>
<p>Depending on the environment you are using, you need to install python-dev and some other graphic libraries. I followed this and that was fine. Latest packages are working alright.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get install build-essential patch git-core ccache ant python-pip python-dev
sudo apt-get install ia32-libs  libc6-dev-i386
sudo apt-get install lib32stdc++6 lib32z1
</code></pre></td></tr></table>
</div>
</div><p>Only install these if you are absolutely certain you need them.</p>
<p>Clone python-android from git into a nice and cosy directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">git clone https://github.com/kivy/python-for-android.git
</code></pre></td></tr></table>
</div>
</div><p>While this is underway, for python-android you also need <a href="http://developer.android.com/sdk/index.html#Other" target="_blank">android-sdk</a> and <a href="https://developer.android.com/tools/sdk/ndk/index.html" target="_blank">android-ndk</a>. Select the ones which are for your environment. The NDK is needed in order to build the APK out of our python code later on.</p>
<p>After you are done, run ./android and install tools, APIs and other things you want. Make sure you have these set up:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">export ANDROIDSDK=/path/to/android-sdk
export ANDROIDNDK=/path/to/android-ndk
export ANDROIDNDKVER=rX
export ANDROIDAPI=X
export PATH=$ANDROIDNDK:$ANDROIDSDK/platform-tools:$ANDROIDSDK/tools:$PATH
</code></pre></td></tr></table>
</div>
</div><p>The API version needs to be the one which you installed on your machine.</p>
<p>Now, we have to get a specific version of Cython. In order to do that, execute the following command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo pip install -I https://pypi.python.org/packages/source/C/Cython/Cython-0.20.1.tar.gz
</code></pre></td></tr></table>
</div>
</div><p>Source your new .bash_profile file if you haven&rsquo;t done so already.</p>
<p>At this point we are ready to install Kivy. Please follow the instructions for your environment on the respective page from Kivy&rsquo;s documentation:</p>
<p><a href="http://kivy.org/docs/installation/installation.html" target="_blank"><a href="http://kivy.org/docs/installation/installation.html">http://kivy.org/docs/installation/installation.html</a></a></p>
<p><strong>Note</strong>: For Mac users. In addition, before doing the kivy stuff, and if you would like to execute kivy applications on your mac, you need to install pygame.</p>
<p>It&rsquo;s a bit of a hassle but you only need to perform these commands:</p>
<p>Install Quartz =&gt; <a href="http://xquartz.macosforge.org/landing/" target="_blank"><a href="http://xquartz.macosforge.org/landing/">http://xquartz.macosforge.org/landing/</a></a></p>
<p>Install Homebrew =&gt; <span style="color: #ff9900;">ruby -e &ldquo;$(curl -fsSL <a href="https://raw.github.com/Homebrew/homebrew/go/install)%22">https://raw.github.com/Homebrew/homebrew/go/install)&quot;</a></span></p>
<p>Install some other packages =&gt; <span style="color: #ff9900;">brew install hg sdl sdl_image sdl_mixer sdl_ttf portmidi</span></p>
<p>Install pygame =&gt; <span style="color: #ff9900;">pip install hg+http://bitbucket.org/pygame/pygame</span></p>
<p>Once this finishes, you should be good to go for the final command in the prerequisites. Go to your cloned python-android folder and run this (make sure you have ANT installed):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">./distribute.sh -m &#34;openssl pil kivy&#34;
</code></pre></td></tr></table>
</div>
</div><p>Now we are ready for some coding.</p>
<h1 id="implementation">Implementation</h1>
<p>So, finally after our environment is all setup, we can move on to write some python code. Let&rsquo;s start with a simple hello world application:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">kivy</span>
<span class="n">kivy</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="s1">&#39;1.8.0&#39;</span><span class="p">)</span> <span class="c1"># 1.8.0 is the latest kivy version</span>
<span class="kn">from</span> <span class="nn">kivy.lang</span> <span class="kn">import</span> <span class="n">Builder</span>
<span class="kn">from</span> <span class="nn">kivy.uix.gridlayout</span> <span class="kn">import</span> <span class="n">GridLayout</span>
<span class="kn">from</span> <span class="nn">kivy.properties</span> <span class="kn">import</span> <span class="n">NumericProperty</span>
<span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>

<span class="n">Builder</span><span class="o">.</span><span class="n">load_string</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;
</span><span class="s1">:
</span><span class="s1">    cols: 1
</span><span class="s1">    Label:
</span><span class="s1">        text: &#39;Welcome to the Hello world&#39;
</span><span class="s1">    Button:
</span><span class="s1">        text: &#39;Click me! </span><span class="si">%d</span><span class="s1">&#39; </span><span class="si">% r</span><span class="s1">oot.counter
</span><span class="s1">        on_release: root.my_callback()
</span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">HelloWorldScreen</span><span class="p">(</span><span class="n">GridLayout</span><span class="p">):</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="n">NumericProperty</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s1">&#39;The button has been pushed&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">class</span> <span class="nc">HelloWorldApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">HelloWorldScreen</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">HelloWorldApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>This is a simple Hello World python-android app. Save this into a file called <span style="color: #ff9900;">main.py</span>. Main.py is used to execute the app on your phone. It&rsquo;s your entry point. Whatever app you are writing, this has to be where it will begin.</p>
<p>In order to get this installed on our device, we will use python-android&rsquo;s distribution.sh. The command to run after you changed directory into python-android is this (make sure that you have a compatible android device plugged in and in developer mode):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go">
<span class="p">.</span><span class="o">/</span><span class="nx">build</span><span class="p">.</span><span class="nx">py</span> <span class="o">--</span><span class="kn">package</span> <span class="nx">org</span><span class="p">.</span><span class="nx">hello</span><span class="p">.</span><span class="nx">world</span> <span class="o">--</span><span class="nx">name</span> <span class="s">&#34;Hello world&#34;</span> <span class="o">--</span><span class="nx">version</span> <span class="mf">1.0</span> <span class="o">--</span><span class="nx">dir</span> <span class="o">/</span><span class="nx">PATH</span><span class="o">/</span><span class="nx">TO</span><span class="o">/</span><span class="nx">helloworld</span> <span class="nx">debug</span> <span class="nx">installd</span>
</code></pre></td></tr></table>
</div>
</div><p>Upon success, you should see it on your device. This is how the hello world app looks like:</p>
<h1 id="finishing-up">Finishing up</h1>
<p>This has been quite the ride so far. We will continue our journey when I&rsquo;ll start writing my own app for SPOJ.</p>
<p>Thanks for reading!
Gergely.</p>
]]></description>
    </item>
    
    <item>
      <title>Updating All Jenkins Jobs Via Jenkins API – Python</title>
      <link>https://skarlso.github.io/2014/11/07/updating-all-jenkins-jobs-via-jenkins-api-python/</link>
      <pubDate>Fri, 07 Nov 2014 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2014/11/07/updating-all-jenkins-jobs-via-jenkins-api-python/</guid>
      <description><![CDATA[<p>Hello everybody.</p>
<p>I would like to share with you a small script I wrote to update all, or a single, Jenkins job from a Python script remotely.</p>
<p>This will enable you to update a Jenkins job from anywhere using an admin credential based on a config.xml template that you have. With this, if you want to apply a config change to all or just a single job in Jenkins, you don&rsquo;t have to go and do it for all the rest. You just call this script and it will cycle through all the jobs you have and update them if the begin with &ldquo;yourpipelinedelimiter&rdquo; or if they aren&rsquo;t in a restricted list of jobs. The delimiter helps to identify pipelines which are dev pipelines. If you have multiple pipelines which are helpers or builders and you don&rsquo;t usually apply the same config to them, than the delimiter can help identify the dev pipelines you actually want to update.</p>
<p>Enjoy, hope it helps someone.</p>
<p>And now, without any further ado:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="s1">&#39;&#39;&#39;
</span><span class="s1">	Created to update multiple pipelines in jenkins with a given configuration and job list.
</span><span class="s1">	Usage:
</span><span class="s1">	Example 1:
</span><span class="s1">	Updating a single pipeline&#39;s job with a given config.xml.
</span><span class="s1">	python update-jenkins-jobs.py job-name config.xml pipeline-name
</span><span class="s1">	Example 2:
</span><span class="s1">	Updating every pipeline in jenkins dynamically. !!!WARNING!!! This updates every job EXCEPT of the ones specified in restricted_jobs.
</span><span class="s1">	python update-jenkins-jobs.py job-name config.xml
</span><span class="s1">&#39;&#39;&#39;</span>
<span class="kn">from</span> <span class="nn">xml.dom</span> <span class="kn">import</span> <span class="n">minidom</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">update_pipeline</span><span class="p">(</span><span class="n">pipeline</span><span class="p">):</span>
	<span class="s1">&#39;&#39;&#39;
</span><span class="s1">	Takes in a list of pipelines to update.
</span><span class="s1">	&#39;&#39;&#39;</span>
	<span class="n">config_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_to_use</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
	<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;content-type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/xml&#39;</span><span class="p">}</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">&#34;Updating pipelines: &#34;</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">)</span>

	<span class="k">for</span> <span class="n">dev_job</span> <span class="ow">in</span> <span class="n">pipeline</span><span class="p">:</span>
		<span class="n">url</span> <span class="o">=</span> <span class="s2">&#34;http://jenkins:9999/job/</span><span class="si">%s</span><span class="s2">/job/</span><span class="si">%s</span><span class="s2">/config.xml&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dev_job</span><span class="p">,</span> <span class="n">job_to_update</span><span class="p">)</span>
		<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">config_file</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">))</span>
		<span class="k">print</span><span class="p">(</span><span class="s2">&#34;Updating pipeline: </span><span class="si">%s</span><span class="s2">; Response Code: </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dev_job</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">get_dev_pipelines</span><span class="p">():</span>
	<span class="s1">&#39;&#39;&#39;
</span><span class="s1">	Gets a list of pipelines which can be used by update_pipeline.
</span><span class="s1">	&#39;&#39;&#39;</span>
	<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://jenkins:9999/api/xml&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">),</span> <span class="n">stream</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
	<span class="n">job_list_xml</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span>

	<span class="n">xmldoc</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">job_list_xml</span><span class="p">)</span>
	<span class="n">itemlist</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>

	<span class="n">dev_job_list</span> <span class="o">=</span> <span class="p">[]</span>

	<span class="n">restricted_jobs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;yourpipelinedelimiter-dev-pipeline1&#34;</span><span class="p">,</span> <span class="s2">&#34;yourpipelinedelimiter-dev-pipeline2&#34;</span><span class="p">,</span> <span class="s2">&#34;yourpipelinedelimiter-dev-pipeline3&#34;</span><span class="p">]</span>
	<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">itemlist</span><span class="p">:</span>
	    <span class="k">if</span> <span class="p">(</span><span class="s2">&#34;yourpipelinedelimiter-dev&#34;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">nodeValue</span><span class="p">)</span> <span class="p">:</span>
	    	<span class="n">value</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">firstChild</span><span class="o">.</span><span class="n">nodeValue</span>
	    	<span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">restricted_jobs</span><span class="p">):</span>
	    		<span class="n">dev_job_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

	<span class="k">return</span> <span class="n">dev_job_list</span>


<span class="n">job_to_update</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">config_to_use</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">dev_pipeline</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span><span class="p">;</span> <span class="mi">3</span><span class="p">:</span>
	<span class="k">print</span><span class="p">(</span><span class="s2">&#34;Args length:&#34;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">))</span>
	<span class="n">dev_pipeline</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

<span class="n">update_pipeline</span><span class="p">(</span><span class="n">get_dev_pipelines</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">dev_pipeline</span> <span class="k">else</span> <span class="n">dev_pipeline</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Thanks for reading.</p>
<p>Gergely.</p>
]]></description>
    </item>
    
    <item>
      <title>Python Course Review</title>
      <link>https://skarlso.github.io/2014/08/25/python-course-review/</link>
      <pubDate>Mon, 25 Aug 2014 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2014/08/25/python-course-review/</guid>
      <description><![CDATA[<p>Hello Everybody.</p>
<p>Today I&rsquo;d like to write a little bit about a python course I did.</p>
<p>It&rsquo;s an 8 week course on algorithmic programming with fun little projects. I&rsquo;d like to write down some of my solutions with pseudo code for my own better understanding and for the sake of sharing knowledge. I won&rsquo;t, however, share full projects since that would be against the honour code.</p>
<p>Let&rsquo;s begin.</p>
<p><strong>Week Zero</strong></p>
<p>This week was all about getting the hang out of reading the posts and the documentation and the questions and getting used to the wordings. The tutors really out did themselves. They tried to make a course that can be both funny and teach something at the same time which is anything but easy.</p>
<p>Even though the tasks that were given were interesting al-bight at times a little bit far stretched and could have been easier done if used something else to complete them. But if we would have done that, what&rsquo;s the point of it all then?</p>
<p>So I&rsquo;ll try to recall everything solely based on my notes taken in those 8 weeks. Let&rsquo;s see how much I truly learned.</p>
<p><strong>Assignment of week one</strong></p>
<p>We were to build the game 2048 which if you played you know what it is all about.</p>
<p><img src="http://ironyca.files.wordpress.com/2014/03/2048-game.jpg" alt="2048"></p>
<p>The goal is to add up numbers so that higher and higher numbers are created. There is no real &ldquo;end&rdquo; of the game. You can continue as long as you have space left although the intended goal is to create 2048. There are a couple of clones of this game and we were supposed to write one this time of our own.</p>
<p>We approached this game with the intention of refreshing our memory about Python. Handling matrices python syntax, counting indices and a bit of assessment about the general understanding of Mathematics and programming from the populace.</p>
<p>I must say it was hard. It was hard to get back into the habit of properly thinking about something at first. It was hard to get used to Math again which I missed for a very long time. I forgot many things and as English is not my first language many things written about Math in English were extremely hard to understand in the beginning.</p>
<p>But thankfully for my trusty mathematics Bible in Hungarian I was saved.</p>
<p><img src="http://s02.static.libri.hu/cover/9f/3/818403_5.jpg" alt="math book"></p>
<p>This book is 1448 pages long but contained all the information necessary to get my mind back into the game. And oh boy was it worth the initial trouble. I had to first realize that I forgot so much it was very painful and immensely disappointing, frustrating and shameful. But you should never give up and so I fought my way through it.</p>
<p>And it was extremely helpful to do Tests First. As the grading was based on how many of a given set of Unit Tests were passing it was very helpful to start tests first which were leading the design of the program. Also it was crucial to work in as little chunks as possible since one could easily lost himself trying to grasp a problem proving to be too large to look at from afar.</p>
<p>The hard part about this project was the Merging of the numbers and creating the proper grid which results from the Merge. Here are some examples:</p>
<ul>
<li><code>[2, 0, 2, 4]</code> should return <code>[4, 4, 0, 0]</code></li>
<li><code>[0, 0, 2, 2]</code> should return <code>[4, 0, 0, 0]</code></li>
<li><code>[2, 2, 0, 0]</code> should return <code>[4, 0, 0, 0]</code></li>
<li><code>[2, 2, 2, 2]</code> should return <code>[4, 4, 0, 0]</code></li>
<li><code>[8, 16, 16, 8]</code> should return <code>[8, 32, 8, 0]</code></li>
</ul>
<p>In order to achieve this you must trim the zeros like this <code>[2,2,4]</code> and than produce the result which is <code>[4,4]</code> and put a couple of zeros at the end <code>[4,4,0,0]</code>. My first though was to use the Deque class in Python in order to achieve this but that was an outside module which was not allowed.</p>
<p>It was an interesting way to begin the course. Many people left at this point and were leaving afterwards too. Most of them in frustration that they were missing the python knowledge the rest out of frustration of not knowing the necessary math. At the end though it was getting easier to follow the problems after we got used to the conventions and sentence structures. The professors were also helpful and sometimes re-worded some of the descriptions to better describe what they wanted.</p>
<p><strong>Week One</strong></p>
<p>So after a hard start we moved on to a very interesting week one. This one got me into a certain game I don&rsquo;t want to see ever again. It&rsquo;s name: <strong><a title="Cookie Clicker" href="http://orteil.dashnet.org/cookieclicker/" target="_blank">Cookie Clicker</a>.</strong></p>
<p><img src="http://img2.wikia.nocookie.net/__cb20130827014912/cookieclicker/images/5/5a/PerfectCookie.png" alt="cookie"></p>
<p>We sort of had to re-create the cookie clicker but without the clicking. We only were supposed to re-create the buying of upgrades and simulate a sequence of clicks via the means of a cycle.</p>
<p>In this week the description of the tasks was, at the least, confusing. They started to use the term _time _which lead many to believe that we were somehow supposed to use python&rsquo;s date / time methods and libraries. But after a couple of re-reads it was apparent that by _time _they actually were referring to <em><strong>cycle count.</strong></em>** **</p>
<p>Knowing this made the task at hand a lot easier. This time around our main focus were the following:</p>
<ul>
<li>Mathematical Sums</li>
<li>Finding the Max</li>
<li>Higher - Order functions</li>
<li>Plotting with Python</li>
</ul>
<p>The course just went into overdrive. We were looking lot at things like these:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">∑n i=0 α^i = α^0 + α^1 + α^2 + ... + α^n = α^(n+1) − 1 / α − 1
</code></pre></td></tr></table>
</div>
</div><p>(2021 Hindsight): It&rsquo;s funny how I&rsquo;m looking at this now, and it immeditely makes perfect sense. I love how evolved in that regard over the time.</p>
<p>It was rather awesome though frustrating at first like I wrote earlier. These were the easier one.</p>
<p>Finding the maximum is trivial. Especially if you are using a built in **max **provided by Python. But if you mix it with Higher-Order functions it gets interesting. If you want to do anything else as well and not just a max, for example getting the index of the maximum item as well, you usually end up writing a custom Max any ways.</p>
<p>Plotting in Python was exquisite interesting. The garphs which were produced showed as an insight into how powerful a solution really is or how effective. Here came in the Big-O notations almost. To see if a function was exponential, logarithmic or plain polynomial. O(n), O(n^2), O(logn) etc, etc.</p>
<p>This resulted in very interesting graphs like this:</p>
<p><strong>Week Two</strong></p>
<p>So last week we had plotting and counting this week was even more interesting. Week Two&rsquo;s main focus was <strong>Probability</strong>. Specifically the <a href="http://en.wikipedia.org/wiki/Monte_Carlo_method" target="_blank"><strong>Monte Carlo</strong> <strong>methods</strong></a>. Tl;dr; it describes that if you try something enough times you can derive a result that will be, with very high probability, the one you are looking for (expected value).</p>
<p>We tried out this algorithm by playing a nice game of tic-tac-toe.</p>
<p><img class="alignleft" src="http://www.janetkruskamp.com/Images/TicTacToe.jpg" alt="" width="227" height="227" /></p>
<p>The point of this exercise was to create a machine player which, after running a 1000 or so random scenarios, was choosing the best option given a certain game state. It was difficult to get the results to always return a correct answer. At this point last weeks plotting became important since if your Monet Carlo algorithm was not fast enough the program was running increasingly slower and slower.</p>
<p>I was not very satisfied with my solution. It worked, but it was very slow and it wasn&rsquo;t always returning the best option.</p>
<p><strong>Week Three</strong></p>
<p>So what comes after probability? Correct. **Combinatorics. **</p>
<p>The next hill to climb was combinatorics. Fortunately for me I love probability and combinatorics so this was a little bit easier for me. I was getting the hang out of function calculation as well so I wrote better homework and better projects at this point. Which is the aim of the course, right?</p>
<p>The game we used for this approach was <a href="http://en.wikipedia.org/wiki/Yahtzee" target="_blank"><strong>Yahtzee</strong></a>.</p>
<p><img class="alignleft" src="http://playpop.com/medias/images/splashscreens/yahtzee_en.png" alt="" width="279" height="201" /></p>
<p>Now let me say this without too much remorse. I truly, fully and with all my heart, hate Yahtzee. I think it&rsquo;s stupid. I&rsquo;m sorry. I truly do. The only thing I can think of when I hear yahtzee is the South Park version of it.</p>
<p>South Park Version of Yahtzee + Tron:</p>
<p>I share the enthusiastic look of Stan here.</p>
<p>Anyhow, moving on. Thank to the coursera Gods we weren&rsquo;t suppose to write a whole game of Yathzee just a very simplified version of it. We were supposed to count the upper combinations on the second throw. So you already have one throw and you must choose how many die you want to hold on to to maximise the possibility of the best outcome possible. Huh. come again?</p>
<p>So you already had a hand. And now the program was to determine which die you were supposed to hold on too in order to maximise the score you can achieve with the remaining two throws.</p>
<p>There were a few interesting things that came in with this task. For example this was the first time I could use a Dict init from a list with a zip.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">hand_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">hand</span><span class="p">),</span> <span class="p">[]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">hand</span><span class="p">)))</span>
</code></pre></td></tr></table>
</div>
</div><p>And this was the point in course were I found perhaps the most interesting thing. I found an actual use for reduce which was working. I was beginning to get into the habit of using map, filter, reduce.</p>
<p>This was the beauty:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">my_list</span> <span class="o">=</span> <span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">z</span> <span class="o">+</span> <span class="p">[</span><span class="n">y</span> <span class="o">+</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">z</span><span class="p">],</span> <span class="n">hand</span><span class="p">,</span> <span class="p">[[]])</span>
</code></pre></td></tr></table>
</div>
</div><p>This piece of code produced all the combinations of a given hand which was a list of Tuples. It merged them into a list of lists which I created a list of Tuples out from. After this my life was never ever the same again.</p>
<p><strong>Week Four</strong></p>
<p>For me this was the most interesting part of the course. I LOVED this task. Focus was:</p>
<ul>
<li>Python Generators</li>
<li>Stacks / Queues</li>
<li>Inheritance in Python</li>
<li>Girds</li>
<li>Grid Search / <a href="http://en.wikipedia.org/wiki/Breadth-first_search" target="_blank">Breadth First Search</a></li>
</ul>
<p>And the task with which we were supposed to achieve this was..</p>
<p>Zombie Apocalypse. It was sort of like <strong>Conway&rsquo;s Game of Life</strong>. Given a grid in which there were Zombies, Humans and Obstacles.</p>
<p>The Zombies could only move up, down, left, right. The humans could flee diagonally and none of them could penetrate an obstacle. It was very much fun to write this. The most challenge was to learn the proper implementation of the breadth first search algorithm as the Zombies had to detect the nearest Humans to move towards to and the Humans needed to see the nearest Zombies to flee from.</p>
<p><strong>Week Five</strong></p>
<p>Halfway through it was become difficult to maintain the time needed for this course. I was finding myself applying a few late days here and there. This was a two months course after all. I did not have all the time in the world at my disposal. But I managed to submit everything without penalties.</p>
<p>So this weeks task was rather mundane. It was a <strong>world wrangler</strong>. Which means given a word generate valid words from the letters in the provided word.</p>
<p>The algorithm we were supposed to use though was for me a bit of a challenge. I&rsquo;ll be honest with you, for me, it was a little bit hard to wrap my head around this one. But eventually I succeeded.</p>
<p>It was Merge-Sort and Recursion. Let me tell you this now, I hate merge-sort. Recursion I do love though. What I never learned though and was very interesting for me to learn now was recurrences in mathematics. Well never learned is a bit harsh since I knew Fibonacci already and Pascal&rsquo;s Triangle but the mathematical definition was a refreshing new view. I&rsquo;m talking about <a href="http://en.wikipedia.org/wiki/Recurrence_relation" target="_blank"><strong>Recurrence Relations</strong></a>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">F(n) = F(n-1) + F(n-2)
</code></pre></td></tr></table>
</div>
</div><p>This is the Recurrence relation of the famous Fibonacci. Easy, right? Well the hard part is when you are trying to get the <a href="http://en.wikipedia.org/wiki/Binet_formula#Closed-form_expression" target="_blank"><strong>closed-form-expression</strong></a> of a Recurrence.</p>
<p><strong>Week Six</strong></p>
<p>Finally it was coming to an end. The last week was easy so this week had to have a punch. And oh boy it did. This weeks focus:</p>
<ul>
<li>Trees</li>
<li>Lambdas</li>
<li>Illustration of Trees</li>
<li><a href="http://en.wikipedia.org/wiki/Minimax" target="_blank">Minimax</a></li>
<li><a href="http://en.wikipedia.org/wiki/Depth-first_search" target="_blank">Depth First Search</a></li>
</ul>
<p>If I hated merge-sort I hated minimax more. I don&rsquo;t know why but it was again very hard for me to properly grasp this concept. I mean I understood what needed to be done of course but writing it done with code proved to be more difficult then I thought it would be.</p>
<p>After hours of research and reading finally I could come up with a solution which was working. I wouldn&rsquo;t say it was good. But it was working.</p>
<p>The game with which we were supposed to demonstrate this algorithm was. Tic-Tac-Toe. Turns out that it&rsquo;s rather common place to show off minimax with tic-tac-toe as it was fewer possibilities. The point of the exercise was the following.:</p>
<p><img class="alignnone" src="http://www.ocf.berkeley.edu/~yosenl/extras/alphabeta/alphabeta.jpg" alt="" width="516" height="405" /></p>
<p> </p>
<p>To create trees out of the possible moves given a certain game state. This time we wanted to make absolutely sure that if we can&rsquo;t win the game at least we won&rsquo;t loose it. And that&rsquo;s the point of minimax. It will minimize your losses.</p>
<p>Now there are several things about this algorithm that are hard.</p>
<p><strong>Performance of Minimax</strong></p>
<p>It has and always will be a very interesting task for programmers to try to achieve a better performance for these calculations. Since it&rsquo;s trying to build up a tree with all the possible combinations a game can have it will end up with a huge tree which will take ages to traverse.</p>
<p>A few of the solutions could be to exit the search once you have a definitive answer. If you find a winning move there is no point of looking any further. You just stop.</p>
<p>You can create the tree dynamically. You can make it somehow intelligent enough to predict a possible best first move and then use minimax on the rest. Or use <a href="http://en.wikipedia.org/wiki/Alpha-beta_pruning" target="_blank"><strong>Alpha-beta pruning</strong></a>.</p>
<p><strong>Week Seven</strong></p>
<p>And so we are coming to an end. Last weeks assignment was basically to put all the previous weeks knowledge together to create the application called 15 puzzle.</p>
<p><img class="alignleft" src="http://kociemba.org/fifteen/pics/puz.jpg" alt="" width="183" height="183" /></p>
<p>Now, there was however a little addition to the previous knowledge. It was <a href="http://en.wikipedia.org/wiki/Invariant_(computer_science)" target="_blank"><strong>invariants</strong></a>. Now, I love Logic. And I&rsquo;ve been actually using invariants in computer science programming and testing for a long time so this part was not really a problem.</p>
<p>An example of an invariant in python would be something like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">while</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">:</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></td></tr></table>
</div>
</div><p>This is a loop invariant example. In you find a very useful invariant in your program you can write an assert for it which will help you debug your code and work in small chunks. Invariants will make refactoring your code a hell of a lot easier. As if your invariant is suddenly false you need to check what went wrong.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">while</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">:</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="k">assert</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">6</span>
</code></pre></td></tr></table>
</div>
</div><p>This assert will make sure that if your invariant for whatever reason isn&rsquo;t true your code fails immediately.</p>
<p><strong>End Credits</strong></p>
<p>So this was the end of the course. I learned a a lot from this course and I&rsquo;m very proud of myself for completing it. I took away a lot from this course. I took away confidence and logical thinking. I took away greater trust in my Python knowledge and that it&rsquo;s very important to keep my skills from deteriorating.</p>
<p>And I think math is important for proper, deep understanding of programming as a science. I think refreshing my math skills gave me at least a deeper trust in my ability to write a piece of code however complicated it might appear. After writing a minimax algorithm I think some Hibernate with DIP and SRP will prove to be less of a problem. Or at least a different category of a problem.. Hehe.</p>
<p>Thanks for reading!
Gergely.</p>]]></description>
    </item>
    
    <item>
      <title>How to check content header on unknown number of items – Python</title>
      <link>https://skarlso.github.io/2014/02/11/how-to-check-content-header-on-unknown-number-of-items-python/</link>
      <pubDate>Tue, 11 Feb 2014 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2014/02/11/how-to-check-content-header-on-unknown-number-of-items-python/</guid>
      <description><![CDATA[<p>Hello guys.</p>
<p>I&rsquo;d like to share a little something with you. It&rsquo;s what I cooked up in Python to check an unknown number of content items in a web application.</p>
<p>Basically the script runs from a script folder under Grails. It goes through all the configured folders where there is static content like images, javascript, css and so on and so forth.</p>
<p>And then with curl it calls these items up in using their respective paths'. This works best on localhost if you have your local environment configured to access these elements because in some places direct access is restricted.</p>
<p>This script only check static content. Dynamically generated content would have to be hard coded to check.</p>
<p>It only generated a file currently with ERROR on a not match an success on match and not found if it encounters an item which it doesn&rsquo;t know about.</p>
<p>So without further ado. The Script:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/python</span>

<span class="kn">import</span> <span class="nn">pycurl</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">urllib</span>

<span class="k">class</span> <span class="nc">Storage</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contents</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buf</span><span class="p">):</span>
	<span class="k">if</span> <span class="s1">&#39;Content-Type&#39;</span> <span class="ow">in</span> <span class="n">buf</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">contents</span> <span class="o">=</span> <span class="n">buf</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span>

<span class="c1">#print retrieved_headers</span>

<span class="n">filesInDir</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">headerRestrictions</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;.css&#39;</span><span class="p">:</span> <span class="s1">&#39;Content-Type: text/css&#39;</span><span class="p">,</span> <span class="s1">&#39;.jpg&#39;</span><span class="p">:</span> <span class="s1">&#39;Content-Type: image/jpeg&#39;</span><span class="p">,</span> <span class="s1">&#39;.ico&#39;</span><span class="p">:</span> <span class="s1">&#39;image/vnd.microsoft.icon&#39;</span><span class="p">,</span> <span class="s1">&#39;.html&#39;</span><span class="p">:</span> <span class="s1">&#39;Content-Type: text/html&#39;</span><span class="p">,</span> <span class="s1">&#39;.js&#39;</span><span class="p">:</span> <span class="s1">&#39;Content-Type: application/javascript&#39;</span><span class="p">,</span> <span class="s1">&#39;.gif&#39;</span><span class="p">:</span> <span class="s1">&#39;Content-Type: image/gif&#39;</span><span class="p">,</span> <span class="s1">&#39;.png&#39;</span><span class="p">:</span> <span class="s1">&#39;Content-Type: image/png&#39;</span><span class="p">,</span> <span class="s1">&#39;.swf&#39;</span><span class="p">:</span> <span class="s1">&#39;Content-Type: application/x-shockwave-flash&#39;</span><span class="p">,</span> <span class="s1">&#39;.json&#39;</span><span class="p">:</span> <span class="s1">&#39;Content-Type: application/json&#39;</span><span class="p">,</span> <span class="s1">&#39;.htc&#39;</span><span class="p">:</span> <span class="s1">&#39;Content-Type: text/x-component&#39;</span><span class="p">,</span> <span class="s1">&#39;.xml&#39;</span><span class="p">:</span> <span class="s1">&#39;Content-Type: application/xml&#39;</span><span class="p">}</span>

<span class="k">for</span> <span class="n">dirname</span><span class="p">,</span> <span class="n">dirnames</span><span class="p">,</span> <span class="n">filenames</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="s1">&#39;../web-app&#39;</span><span class="p">):</span>
    <span class="c1"># editing the &#39;dirnames&#39; list will stop os.walk() from recursing into there.</span>
    <span class="k">if</span> <span class="s1">&#39;.git&#39;</span> <span class="ow">in</span> <span class="n">dirnames</span><span class="p">:</span>
        <span class="c1"># don&#39;t go into any .git directories.</span>
        <span class="n">dirnames</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;.git&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s1">&#39;WEB-INF&#39;</span> <span class="ow">in</span> <span class="n">dirnames</span><span class="p">:</span>
        <span class="c1"># don&#39;t go into any WEB-INF directories.</span>
        <span class="n">dirnames</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;WEB-INF&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s1">&#39;test&#39;</span> <span class="ow">in</span> <span class="n">dirnames</span><span class="p">:</span>
        <span class="c1"># don&#39;t go into any test directories.</span>
        <span class="n">dirnames</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s1">&#39;META-INF&#39;</span> <span class="ow">in</span> <span class="n">dirnames</span><span class="p">:</span>
        <span class="c1"># don&#39;t go into any META-INF directories.</span>
        <span class="n">dirnames</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;META-INF&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
	<span class="n">trimmedDir</span> <span class="o">=</span> <span class="n">dirname</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;web-app/&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)</span>
	<span class="n">trimmedDir</span> <span class="o">=</span> <span class="n">trimmedDir</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;../&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)</span>
	<span class="n">filesInDir</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">trimmedDir</span><span class="p">,</span> <span class="n">filename</span><span class="p">))</span>
    <span class="c1">#    print os.path.join(dirname, filename)</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;headersandfiles.txt&#34;</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">fileName</span> <span class="ow">in</span> <span class="n">filesInDir</span><span class="p">:</span>
    <span class="n">retrieved_body</span> <span class="o">=</span> <span class="n">Storage</span><span class="p">()</span>
    <span class="n">retrieved_headers</span> <span class="o">=</span> <span class="n">Storage</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">pycurl</span><span class="o">.</span><span class="n">Curl</span><span class="p">()</span>
    <span class="n">fileName</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="p">,</span> <span class="s2">&#34;%20&#34;</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:8080/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">fileName</span>
    <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
    <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">WRITEFUNCTION</span><span class="p">,</span> <span class="n">retrieved_body</span><span class="o">.</span><span class="n">store</span><span class="p">)</span>
    <span class="n">c</span><span class="o">.</span><span class="n">setopt</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">HEADERFUNCTION</span><span class="p">,</span> <span class="n">retrieved_headers</span><span class="o">.</span><span class="n">store</span><span class="p">)</span>
    <span class="n">c</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>
    <span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">fileLine</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
    <span class="n">fileNameBase</span><span class="p">,</span> <span class="n">fileExtension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">headerRestrictions</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">fileExtension</span><span class="p">):</span>
<span class="c1">#	print &#34;Header:%s, Content:%s&#34; % (headerRestrictions[fileExtension], retrieved_headers.__str__())</span>
        <span class="n">fileLine</span> <span class="o">=</span> <span class="s2">&#34;CORRECT: Content: </span><span class="si">%s</span><span class="s2">; Header: </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">retrieved_headers</span><span class="p">)</span> <span class="k">if</span> <span class="n">headerRestrictions</span><span class="p">[</span><span class="n">fileExtension</span><span class="p">]</span> <span class="o">==</span> <span class="n">retrieved_headers</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&#34;ERROR: Content: </span><span class="si">%s</span><span class="s2">; Header: </span><span class="si">%s</span><span class="s2">; URL: </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">retrieved_headers</span><span class="p">,</span> <span class="s2">&#34;http://localhost:8080/</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">fileName</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
	<span class="n">fileLine</span> <span class="o">=</span> <span class="s2">&#34;NOT FOUND: Content: </span><span class="si">%s</span><span class="s2">; Header: </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="n">retrieved_headers</span><span class="p">)</span>

    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fileLine</span><span class="p">)</span>
    <span class="n">headers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">retrieved_headers</span><span class="o">.</span><span class="fm">__str__</span><span class="p">())</span>

<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>Hope you like it. Feel free to improve however you want.</p>
<p>Thanks for reading,</p>
<p>Gergely.</p>
]]></description>
    </item>
    
  </channel>
</rss>