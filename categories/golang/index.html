<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Golang | Ramblings of a cloud engineer</title>
<meta name="keywords" content="">
<meta name="description" content="Welcome to my little corner of the internet">
<meta name="author" content="Gergely Brautigam">
<link rel="canonical" href="https://skarlso.github.io/categories/golang/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css" integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://skarlso.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://skarlso.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://skarlso.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://skarlso.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://skarlso.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://skarlso.github.io/categories/golang/index.xml">
<link rel="alternate" hreflang="en" href="https://skarlso.github.io/categories/golang/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Golang">
<meta property="og:description" content="Welcome to my little corner of the internet">
<meta property="og:type" content="website">
<meta property="og:url" content="https://skarlso.github.io/categories/golang/">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Golang">
<meta name="twitter:description" content="Welcome to my little corner of the internet">

</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://skarlso.github.io/" accesskey="h" title="Ramblings of a cloud engineer (Alt + H)">Ramblings of a cloud engineer</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://skarlso.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://skarlso.github.io/search/" title="Search">
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://skarlso.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://skarlso.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://skarlso.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://skarlso.github.io/categories/">Categories</a></div>
  <h1>
    Golang
    <a href="/categories/golang/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Update your CRDs with confidence
    </h2>
  </header>
  <div class="entry-content">
    <p>Update your CRDs with confidence Hello.
I would like to write about a release for crd-to-sample-yaml1. It’s the release version v0.8.02.
This version brings with it a feature to test the validity of your CRD changes.
It means that if you change your CRD it will test if the changes do not break working samples of that version.
This is achieved by a helm unittest type of YAML based test scenarios and snapshot generation.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-08-21 01:01:00 +0100 +0100'>August 21, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Update your CRDs with confidence" href="https://skarlso.github.io/2024/08/21/update-your-crds-with-confidence/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Discoverable functional options pattern
    </h2>
  </header>
  <div class="entry-content">
    <p>Hello.
Today’s will be a quick post. Everyone knows and loves/hates functional options1 in Go.
The biggest gripe people get with it is, that the options aren’t discoverable and that there is no IDE support for nicely auto-completing options.
My thought about this was that, what if we would just hang it on a struct? Let’s see how that looks.
Consider this normal server builder with options:
type Server struct { Name string Address string Port int } func WithName(name string) ServerOptFn { return func(s *Server) { s.Name = name } } func WithAddress(address string) ServerOptFn { return func(s *Server) { s.Address = address } } func WithPort(port int) ServerOptFn { return func(s *Server) { s.Port = port } } type ServerOptFn func(*Server) func NewServer(opts ...ServerOptFn) *Server { s := &amp;Server{} for _, o := range opts { o(s) } return s } Now, what if you would like to retain the niceness of the clean options pattern where you don’t have to specify and empty struct but still could use a struct to gather the options together?
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-07-01 01:01:00 +0100 +0100'>July 1, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Discoverable functional options pattern" href="https://skarlso.github.io/2024/07/01/discoverable-functional-options/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">crd-to-yaml now supports HTML as an output format
    </h2>
  </header>
  <div class="entry-content">
    <p>Hello!
Just wanted to give an update to my crd-to-sample-yaml tool. It, now, supports creating a standalone HTML output.
Why, you may ask? Well, now you can host the generated content as a static page on your website. That’s pretty handy.
Here is a sample output:
Go and get it while it’s hot in version v0.4.0.
That’s all. Thanks for reading!
</p>
  </div>
  <footer class="entry-footer"><span title='2024-05-09 01:01:00 +0100 +0100'>May 9, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to crd-to-yaml now supports HTML as an output format" href="https://skarlso.github.io/2024/05/09/crd-to-yaml-html-output/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Generic dig for map key using typed parameters
    </h2>
  </header>
  <div class="entry-content">
    <p>Generic dig for map key using typed parameters Hello!
I was fiddling with a way of getting out values from a map that is of format map[string]any. But I wanted my type safety as well. This was coming from digging out keys from a Metadata field.
The metadata was in a JSON format.
This is what I came up with:
/ FetchValueFromMetadata fetches a key from a metadata if it exists. It will recursively look in // embedded values as well. Must be a unique key, otherwise it will just return the first // occurrence. func FetchValueFromMetadata[T any](key string, data *apiextensionsv1.JSON, def T) (t T, _ error) { if data == nil { return def, nil } m := map[string]any{} if err := json.Unmarshal(data.Raw, &amp;m); err != nil { return t, fmt.Errorf(&#34;failed to parse JSON raw data: %w&#34;, err) } v, err := dig[T](key, m) if err != nil { if errors.Is(err, errKeyNotFound) { return def, nil } } return v, nil } func dig[T any](key string, data map[string]any) (t T, _ error) { if v, ok := data[key]; ok { c, k := v.(T) if !k { return t, fmt.Errorf(&#34;failed to convert value to the desired type; was: %T&#34;, v) } return c, nil } for _, v := range data { if ty, ok := v.(map[string]any); ok { return dig[T](key, ty) } } return t, errKeyNotFound } The interesting part is the dig method and the type assert to the desired part. Calling this with something like:
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-02-27 01:01:00 +0100 +0100'>February 27, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Generic dig for map key using typed parameters" href="https://skarlso.github.io/2024/02/27/generic-map-dig/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">CRD to YAML as WASM website
    </h2>
  </header>
  <div class="entry-content">
    <p>CRD to YAML as WASM website A while ago, I wrote about Generating Sample YAML files from CRDs.
It’s a tool I created that lives here. It has a front-end service as well for convenience.
I wrote it in a traditional client-server manner. It’s running from a Docker Swarm container.
But, as I was thinking about it, nothing in this service requires interaction with a server. It gets some user input, processes it, and has some output. I could have written it in plain Javascript. But, since I don’t know JavaScript, or don’t know it well enough, and I do know GO, and I wanted to become more familiar with WASM, this was the perfect learning opportunity.
...</p>
  </div>
  <footer class="entry-footer"><span title='2023-12-01 01:01:00 +0100 +0100'>December 1, 2023</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to CRD to YAML as WASM website" href="https://skarlso.github.io/2023/12/01/crd-to-yaml-as-wasm-website/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">How to deploy a Go (Golang) backend with a React frontend separately on Kubernetes - Part One
    </h2>
  </header>
  <div class="entry-content">
    <p>Intro Welcome. This is a longer post about how to deploy a Go backend with a React frontend on Kubernetes as separate entities. Instead of the usual compiled together single binary Go application, we are going to separate the two. Why? Because usually a React frontend is just a “static” SPA app with very little requirements in terms of resources, while the Go backend does most of the leg work, requiring a lot more resources.
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-07-23 21:01:00 +0100 +0100'>July 23, 2020</span>&nbsp;·&nbsp;14 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to How to deploy a Go (Golang) backend with a React frontend separately on Kubernetes - Part One" href="https://skarlso.github.io/2020/07/23/kubernetes-deploy-golang-react-apps-separately-part1/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">How to do a good code review
    </h2>
  </header>
  <div class="entry-content">
    <p>Intro Hi folks.
This time, I would like to talk a little bit about code reviews.
How do you do code reviews? Don’t hesitate to share it in the comments.
How do I do code reviews? Well read on if you would like to know.
The Top Down approach If I’m dealing with a small code change, a couple of lines here and there in the odd file first, I’ll try to understand why the review is there? What was it trying to achieve? What’s the goal of the change? Is there a ticket/issue I can read for background info? Or an RFC?
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-05-11 21:01:00 +0100 +0100'>May 11, 2020</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to How to do a good code review" href="https://skarlso.github.io/2020/05/11/good-code-reviews/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">How to Make SPA refresh work with a Go backend
    </h2>
  </header>
  <div class="entry-content">
    <p>Intro Hi folks.
Today I would like to share a quick “fix” for a problem I’ve seen popping up here and there.
That is, if you have a react frontend which is a SPA app but you still want refresh to work. What do I mean by that? Consider the following…
The problem You have a SPA app with a react router which navigates the user around. The app calls to a backend api which serves content of some kind. You have the following routes…. login, signup, reset, archive.
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-02-17 21:01:00 +0100 +0100'>February 17, 2020</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to How to Make SPA refresh work with a Go backend" href="https://skarlso.github.io/2020/02/17/making-spa-refresh-work-with-go-backend/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Summary of Practical Go workshop from Dave Cheney
    </h2>
  </header>
  <div class="entry-content">
    <p>Intro Hi folks.
So there is this workshop from Dave Cheney.
And I thought I’d draw a sort of summary of that workshop.
Right-click-&gt;Open Image for higher resolution.
Cheers, Gergely.
</p>
  </div>
  <footer class="entry-footer"><span title='2019-10-10 21:01:00 +0100 +0100'>October 10, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Summary of Practical Go workshop from Dave Cheney" href="https://skarlso.github.io/2019/10/10/practical-go-summary/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Efferent and Afferent metrics in Go
    </h2>
  </header>
  <div class="entry-content">
    <p>Intro Hi folks!
Today I would like to write about a metric that I read in a book called Clean Architecture from Robert Cecil Martin ( Uncle Bob ).
Abstract The metrics I mean are Efferent and Afferent coupling in packages. So you, dear reader, don’t have to navigate away from this page, here are the descriptions pasted in:
Afferent couplings (Ca): The number of classes in other packages that depend upon classes within the package is an indicator of the package’s responsibility. Afferent couplings signal inward. (Affected by this package) (Fan-In).
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-04-21 21:01:00 +0100 +0100'>April 21, 2019</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Efferent and Afferent metrics in Go" href="https://skarlso.github.io/2019/04/21/efferent-and-afferent-metrics-in-go/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="https://skarlso.github.io/categories/golang/page/2/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://skarlso.github.io/">Ramblings of a cloud engineer</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
