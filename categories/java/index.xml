<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>java on Ramblings of a cloud engineer</title>
    <link>https://skarlso.github.io/categories/java/</link>
    <description>Recent content in java on Ramblings of a cloud engineer</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Sat, 06 Jun 2015 00:00:00 +0000</lastBuildDate><atom:link href="https://skarlso.github.io/categories/java/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Docker &#43; Java &#43; Vagrant&#43; GO.CD</title>
      <link>https://skarlso.github.io/2015/06/06/docker-ruby-lotus-go-cd/</link>
      <pubDate>Sat, 06 Jun 2015 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2015/06/06/docker-ruby-lotus-go-cd/</guid>
      <description>&lt;p&gt;Hello folks.&lt;/p&gt;
&lt;p&gt;Today, I would like to write about something interesting and close to me at the moment. I&amp;rsquo;m going to setup Go.cd with Docker, and I&amp;rsquo;m going to get a Ruby Lotus app running. Let&amp;rsquo;s get started.&lt;/p&gt;</description>
      <content type="html"><![CDATA[<p>Hello folks.</p>
<p>Today, I would like to write about something interesting and close to me at the moment. I&rsquo;m going to setup Go.cd with Docker, and I&rsquo;m going to get a Ruby Lotus app running. Let&rsquo;s get started.</p>
<h1 id="fluff">Fluff</h1>
<p>Now, obviously, you don&rsquo;t really need Go.Cd or Docker to setup a Java Gradle application, since it&rsquo;s dead easy. But I&rsquo;m going to do it just for the heck of it.</p>
<h1 id="setup">Setup</h1>
<p>Okay, lets start with Vagrant. Docker&rsquo;s strength is coming from Linux&rsquo;s process isolation capabilities it&rsquo;s not yet properly working on OSX or Windows. You have a couple of options if you&rsquo;d like to try never the less, like boot2docker, or a Tiny Linux kernel, but at that point, I think it&rsquo;s easier to use a VM.</p>
<h4 id="vagrant">Vagrant</h4>
<p>So, let&rsquo;s start with my small Vagrantfile.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby">
<span class="c1"># -*- mode: ruby -*-</span>
<span class="c1"># vi: set ft=ruby :</span>

<span class="c1"># All Vagrant configuration is done below. The &#34;2&#34; in Vagrant.configure</span>
<span class="c1"># configures the configuration version (we support older styles for</span>
<span class="c1"># backwards compatibility). Please don&#39;t change it unless you know what</span>
<span class="c1"># you&#39;re doing.</span>
<span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="c1"># The most common configuration options are documented and commented below.</span>
  <span class="c1"># For a complete reference, please see the online documentation at</span>
  <span class="c1"># https://docs.vagrantup.com.</span>

  <span class="c1"># Every Vagrant development environment requires a box. You can search for</span>
  <span class="c1"># boxes at https://atlas.hashicorp.com/search.</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&#34;trusty&#34;</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_url</span> <span class="o">=</span> <span class="s2">&#34;https://cloud-images.ubuntu.com/vagrant/trusty/current/trusty-server-cloudimg-amd64-vagrant-disk1.box&#34;</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&#34;forwarded_port&#34;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">2300</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">2300</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&#34;forwarded_port&#34;</span><span class="p">,</span> <span class="ss">guest</span><span class="p">:</span> <span class="mi">8153</span><span class="p">,</span> <span class="ss">host</span><span class="p">:</span> <span class="mi">8153</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="s2">&#34;shell&#34;</span><span class="p">,</span> <span class="ss">path</span><span class="p">:</span> <span class="s2">&#34;setup.sh&#34;</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&#34;virtualbox&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">v</span><span class="o">|</span>
    <span class="n">v</span><span class="o">.</span><span class="n">memory</span> <span class="o">=</span> <span class="mi">8192</span>
    <span class="n">v</span><span class="o">.</span><span class="n">cpus</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>Very simple. I&rsquo;m setting up a trusty64(because docker requires 3.10 &lt;= x) box and then doing a simple shell provision. Also, I gave it a bit juice, since go-server requires a raw power. Here is the shell script:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">
!#/bin/bash
sudo apt-get update
sudo apt-get install -y software-properties-common python-software-properties
sudo apt-get update
sudo apt-get install -y vim
sudo add-apt-repository -y <span class="s2">&#34;ppa:webupd8team/java&#34;</span>
sudo apt-get update
<span class="nb">echo</span> debconf shared/accepted-oracle-license-v1-1 <span class="k">select</span> <span class="nb">true</span> <span class="p">|</span> sudo debconf-set-selections <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> <span class="nb">echo</span> debconf shared/accepted-oracle-license-v1-1 seen <span class="nb">true</span> <span class="p">|</span> sudo debconf-set-selections
sudo apt-get install -y oracle-java8-installer
sudo apt-get update
wget -qO- https://get.docker.com/ <span class="p">|</span> sh
route add -net 172.17.0.0 netmask 255.255.255.0 gw 172.17.42.1
</code></pre></td></tr></table>
</div>
</div><p>The debconf at the end accepts java8&rsquo;s terms and conditions. And the last line installs docker in my box. This runs for a little while.</p>
<p>The routing on the end routes every traffic from 172.17.*.* to my vagrant box, which in turn I&rsquo;ll be able to use from my mac local, like 127.0.0.1:8153/go/home.</p>
<p>After a vagrant up, my box is ready to be used.</p>
<h4 id="docker">Docker</h4>
<p>When that&rsquo;s finished, we can move on to the next part, which is writing a little Dockerfile for our image. Go.cd will require java and a couple of other things, so let&rsquo;s automate the installation of that so we don&rsquo;t have to do it by hand.</p>
<p>Here is a Dockerfile I came up with:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Dockerfile" data-lang="Dockerfile"><span class="err">
</span><span class="err"></span><span class="k">FROM</span><span class="s"> ubuntu</span><span class="err">
</span><span class="err"></span><span class="k">MAINTAINER</span><span class="s"> Skarlso</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="c">############ SETUP #############</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get update<span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get install -y software-properties-common python-software-properties<span class="err">
</span><span class="err"></span><span class="k">RUN</span> add-apt-repository -y <span class="s2">&#34;ppa:webupd8team/java&#34;</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> <span class="nb">echo</span> debconf shared/accepted-oracle-license-v1-1 <span class="k">select</span> <span class="nb">true</span> <span class="p">|</span> sudo debconf-set-selections <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> <span class="nb">echo</span> debconf shared/accepted-oracle-license-v1-1 seen <span class="nb">true</span> <span class="p">|</span> sudo debconf-set-selections<span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get update<span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get install -y oracle-java8-installer<span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get install -y vim<span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get install -y unzip<span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get install -y git<span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>So, our docker images have to be setup with Java as well for go.cd which I&rsquo;m taking care of here, and a little bit extra, to add vim, and unzip, which is required for dpkg later.</p>
<p>At this point run: <strong>docker build -t ubuntu:go .</strong> -&gt; This will use the dockerfile and create the ubuntu:go image. Note the **. **at the end.</p>
<h4 id="gocd">Go.cd</h4>
<p>Now, I&rsquo;m creating two containers. One, go-server, will be the go server, and the other, go-agent, will be the go agent.</p>
<p>First, go-server:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
docker run -i -t --name go-server --hostname=go-server -p 8153:8153 ubuntu:go /bin/bash
wget http://download.go.cd/gocd-deb/go-server-15.1.0-1863.deb
dpkg -i go-server-15.1.0-1863.deb
</code></pre></td></tr></table>
</div>
</div><p>Pretty straight forward, no? We forward 8153 to vagrant (which forwards it to my mac), so after we start go-server service we should be able to visit: http://127.0.0.1:8153/go/home.</p>
<p>Lo', and behold, go server. Let&rsquo;s add an agent too.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker run -i -t --name go-agent --hostname=go-agent ubuntu:go /bin/bash
wget http://download.go.cd/gocd-deb/go-agent-15.1.0-1863.deb
dpkg -i go-agent-15.1.0-1863.deb
vim /etc/default/go-agent
GO_SERVER=172.17.0.1
service go-agent start
</code></pre></td></tr></table>
</div>
</div><p>No need to forward anything here. And as you can see, my agent was added successfully.</p>
<p>All nice, and dandy. The agent is there, and I enabled it, so it&rsquo;s ready to work. Let&rsquo;s give it something to do, shall we?</p>
<h1 id="the-app">The App</h1>
<p>I&rsquo;m going to use my gradle project which is on github. This one =&gt; https://github.com/Skarlso/DataMung.git.</p>
<p>Very basic setup. Just check it out and then build &amp; run tests. Easy, right?</p>
<p>First step in this process, define the pipeline. I&rsquo;m going to keep it simple. Name the pipeline DataMunger. Group is Linux. Now, in go.cd you have to define something called, an <strong>environment</strong>. Environment can be anything you want, I&rsquo;m going to go with Linux. You have to assign <strong>agents</strong> to this environment who fulfil it and the pipeline which will use that environment. More on that you can read in the go.cd documentation. This is how you would handle a pipeline which uses linux, and a windows environment at the same time.</p>
<p>In step one you have to define something called the <strong>Material</strong>. That will be the source on which the agent will work. This can be multiple, in different folders within the confines of the pipeline, or singular.</p>
<p>I defined my git project and tested the connection OK. Next up is the first **Stage **and the initial **Job **to perform. This, for me, will be a compile or an assemble, and later on a test run.</p>
<p>Now, Go is awesome in parallelising jobs. If my project would be large enough, I could have multiple jobs here. But for now, I&rsquo;ll use stages because they run subsequently. So, first stage, compile. Next stage, testing and archiving the results.</p>
<p>I added the next stage and defined the artefact. Go supports test-reports. If you define the path to a test artefact than go will parse it and create a nice report out of it.</p>
<p>Now, let&rsquo;s run it. It will probably fail on something. 😉</p>
<p>Well, I&rsquo;ll be. It worked on the first run.</p>
<p>And here are the test results.</p>
<h1 id="wrap-up">Wrap-up</h1>
<p>Well, that&rsquo;s it folks. Gradle project, with vagrant, docker, and go.cd. I hope you all enjoyed reading about it as much as I did doing it.</p>
<p>Any questions, please feel free to ask it in the comment section below.</p>
<p>Cheers,
Have a nice weekend,
Gergely.</p>]]></content>
    </item>
    
    <item>
      <title>Example when to use the Strategy Pattern</title>
      <link>https://skarlso.github.io/2014/02/19/example-when-to-use-the-strategy-pattern/</link>
      <pubDate>Wed, 19 Feb 2014 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2014/02/19/example-when-to-use-the-strategy-pattern/</guid>
      <description>&lt;p&gt;Hello folks.&lt;/p&gt;
&lt;p&gt;A quick post about an interesting idea.&lt;/p&gt;
&lt;p&gt;I want to elaborate on a possibility to use the Strategy Design pattern.&lt;/p&gt;</description>
      <content type="html"><![CDATA[<p>Hello folks.</p>
<p>A quick post about an interesting idea.</p>
<p>I want to elaborate on a possibility to use the Strategy Design pattern.</p>
<p>There are many clues that you need one. One is for example if your object has a boolean variable which you use a lot in other classes to determine behavior. Then there is perhaps time to implement a Strategy.</p>
<p>Example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">	<span class="kd">class</span> <span class="nc">SomeClass</span> <span class="o">{</span>
		<span class="kd">private</span> <span class="kt">boolean</span> <span class="n">stateChange</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

		<span class="kd">public</span> <span class="nf">SomeClass</span> <span class="o">(</span><span class="n">stateChange</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">this</span><span class="o">.</span><span class="na">stateChange</span> <span class="o">=</span> <span class="n">stateChange</span><span class="o">;</span>
		<span class="o">}</span>

		<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">getStateChange</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">stateChange</span><span class="o">;</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="kd">class</span> <span class="nc">SomeUserClass</span> <span class="o">{</span>
		<span class="kd">private</span> <span class="n">SomeClass</span> <span class="n">foo</span><span class="o">;</span>

		<span class="kd">public</span> <span class="nf">SomeUserClass</span><span class="o">()</span> <span class="o">{</span>
			<span class="n">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SomeClass</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="kd">public</span> <span class="n">String</span> <span class="nf">someMethod</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">foo</span><span class="o">.</span><span class="na">getStateChange</span><span class="o">())</span> <span class="o">{</span>
				<span class="k">return</span> <span class="s">&#34;Some string&#34;</span><span class="o">;</span>
			<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
				<span class="k">return</span> <span class="s">&#34;Some string else&#34;</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="kd">class</span> <span class="nc">SomeOtherUserClass</span> <span class="o">{</span>
		<span class="kd">private</span> <span class="n">SomeClass</span> <span class="n">foo</span><span class="o">;</span>

		<span class="kd">public</span> <span class="nf">SomeOtherUserClass</span><span class="o">()</span> <span class="o">{</span>
			<span class="n">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SomeClass</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="kd">public</span> <span class="n">String</span> <span class="nf">someMethodTwo</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">foo</span><span class="o">.</span><span class="na">getStateChange</span><span class="o">())</span> <span class="o">{</span>
				<span class="k">return</span> <span class="s">&#34;Some string&#34;</span><span class="o">;</span>
			<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
				<span class="k">return</span> <span class="s">&#34;Some string else&#34;</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>So you have two classes which do something based on some boolean coming from a class. So what you can do in this case, simply extract out that change in state.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">
	<span class="kd">class</span> <span class="nc">Foo</span> <span class="kd">implements</span> <span class="n">Base</span> <span class="o">{</span>
		<span class="kd">public</span> <span class="n">String</span> <span class="nf">getMyString</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">return</span> <span class="s">&#34;Some string&#34;</span><span class="o">;</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="kd">class</span> <span class="nc">Bar</span> <span class="kd">implements</span> <span class="n">Base</span> <span class="o">{</span>
		<span class="kd">public</span> <span class="n">String</span> <span class="nf">getMyString</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">return</span> <span class="s">&#34;Some string else&#34;</span><span class="o">;</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="kd">interface</span> <span class="nc">Base</span> <span class="o">{</span>
		<span class="n">String</span> <span class="nf">getMyString</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="kd">class</span> <span class="nc">FooStrategy</span> <span class="o">{</span>

		<span class="kd">public</span> <span class="kd">static</span> <span class="n">Base</span> <span class="nf">getMeAClass</span><span class="o">(</span><span class="kd">enum</span> <span class="n">classChooser</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">switch</span> <span class="n">classChooser</span> <span class="o">{</span>
				<span class="k">case</span> <span class="n">classChooser</span><span class="o">.</span><span class="na">FOO</span> <span class="o">:</span> <span class="k">return</span> <span class="k">new</span> <span class="n">Foo</span><span class="o">();</span> <span class="k">break</span><span class="o">;</span>
				<span class="k">case</span> <span class="n">classChooser</span><span class="o">.</span><span class="na">BAR</span> <span class="o">:</span> <span class="k">return</span> <span class="k">new</span> <span class="n">Bar</span><span class="o">();</span> <span class="k">break</span><span class="o">;</span>
				<span class="k">default</span> <span class="o">:</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">//yeah yeah I know but I&#39;m writing this in notepad... :)
</span><span class="c1"></span>			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="kd">class</span> <span class="nc">SomeUserClass</span> <span class="o">{</span>
		<span class="kd">private</span> <span class="n">Base</span> <span class="n">foo</span><span class="o">;</span>

		<span class="kd">public</span> <span class="nf">SomeUserClass</span><span class="o">()</span> <span class="o">{</span>
			<span class="n">foo</span> <span class="o">=</span> <span class="n">FooStrategy</span><span class="o">.</span><span class="na">getMeAClass</span><span class="o">(</span><span class="n">ClassChooser</span><span class="o">.</span><span class="na">FOO</span><span class="o">);</span>
		<span class="o">}</span>

		<span class="kd">public</span> <span class="n">String</span> <span class="nf">someMethod</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">foo</span><span class="o">.</span><span class="na">getMyString</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="kd">class</span> <span class="nc">SomeOtherUserClass</span> <span class="o">{</span>
		<span class="kd">private</span> <span class="n">Base</span> <span class="n">bar</span><span class="o">;</span>

		<span class="kd">public</span> <span class="nf">SomeUserClass</span><span class="o">()</span> <span class="o">{</span>
			<span class="n">bar</span> <span class="o">=</span> <span class="n">FooStrategy</span><span class="o">.</span><span class="na">getMeAClass</span><span class="o">(</span><span class="n">ClassChooser</span><span class="o">.</span><span class="na">BAR</span><span class="o">);</span>
		<span class="o">}</span>

		<span class="kd">public</span> <span class="n">String</span> <span class="nf">someMethod</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">bar</span><span class="o">.</span><span class="na">getMyString</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Now I know this looks like a lot of more code. However imagine this on a much larger scale with lots of implementations for Foo and Bar. Your if statements will get very convulated very quickly. This way you abstract away the choice into a Factory. And you can add as many implementations of Base as you like with as many variants as you like without changing the logic anywhere else but the Factory and the Enum. And the Enum could be a Configuration file and you do something like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">	<span class="kd">public</span> <span class="kd">static</span> <span class="n">Base</span> <span class="nf">getMeAClass</span><span class="o">(</span><span class="n">String</span> <span class="n">className</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">//Where className could be coming from a configuration file
</span><span class="c1"></span>        <span class="n">Class</span> <span class="n">clazz</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">className</span><span class="o">);</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">Base</span><span class="o">)</span> <span class="n">clazz</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
	<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>This way you don&rsquo;t even need the Enum anymore. Just use some configuration to determine what class you need at which point in your implementation without using an If statement at all.</p>
<p>Hope this helps.</p>
<p>I whipped this up from memory so please feel free to tell me if I missed something or have a syntax error in there somewhere.</p>
<p>As always,</p>
<p>Thanks for reading!</p>
<p>Gergely.</p>]]></content>
    </item>
    
    <item>
      <title>Cucumber-Jvm And @AfterAll</title>
      <link>https://skarlso.github.io/2013/04/18/cucumber-jvm-and-afterall/</link>
      <pubDate>Thu, 18 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2013/04/18/cucumber-jvm-and-afterall/</guid>
      <description>Hey folks.
I find out something new about cucumber-jvm every day.
If you want something that is executed after all of the tests have finished you must use the Java shutdownHook. It&amp;rsquo;s simple really you add in a block of code that can run right before the JVM quits. I know I know. It sounds awful but I found out that this is the actual way of doing this with java / cucumber.</description>
      <content type="html"><![CDATA[<p>Hey folks.</p>
<p>I find out something new about cucumber-jvm every day.</p>
<p>If you want something that is executed after all of the tests have finished you must use the Java shutdownHook. It&rsquo;s simple really you add in a block of code that can run right before the JVM quits. I know I know. It sounds awful but I found out that this is the actual way of doing this with java / cucumber.</p>
<p>Anyways.</p>
<p>Here is something to do when all of your test quit-&gt;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">attachShutDownHook</span><span class="o">(){</span>
        <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="n">Thread</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">Properties</span> <span class="n">properties</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperties</span><span class="o">();</span>
                <span class="n">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">properties</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&#34;filename&#34;</span><span class="o">);</span>
                <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="n">properties</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&#34;path&#34;</span><span class="o">);</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">Story</span><span class="o">&gt;</span> <span class="n">stories</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>

                <span class="n">Path</span> <span class="n">file</span> <span class="o">=</span> <span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">path</span> <span class="o">+</span> <span class="n">filename</span><span class="o">);</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">Files</span><span class="o">.</span><span class="na">exists</span><span class="o">(</span><span class="n">file</span><span class="o">))</span> <span class="o">{</span>
                        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">Files</span><span class="o">.</span><span class="na">readAllLines</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">Charset</span><span class="o">.</span><span class="na">defaultCharset</span><span class="o">());</span>
                        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">line</span> <span class="o">:</span> <span class="n">lines</span><span class="o">)</span> <span class="o">{</span>
                            <span class="c1">//add file lines to a report here
</span><span class="c1"></span>                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&#34;Exception occurred: &#34;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getLocalizedMessage</span><span class="o">());</span>
                <span class="o">}</span>
                    <span class="c1">//send report to a remote location here
</span><span class="c1"></span>                    <span class="c1">//since this is a shutdown hook this should take only a few seconds.
</span><span class="c1"></span>            <span class="o">}</span>
        <span class="o">});</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">infor</span><span class="o">(</span><span class="s">&#34;Shut Down Hook Attached.&#34;</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>So there you go. You would need to call this in a @BeforeClass to have it attached. This is a small hook attached after each test has run which would submit a report built up from a file. Why not use a listener or a custom report generator or whatever? Because maybe you have the report done in a remote place where you need to place a csv file which will be available to everybody to look at. And you want the report to be sent and generated dynamically. Or you have some clean up to do after your suit is done.</p>
<p>In ruby the @AfterAll is actually equivalent to this which in ruby land would be at_exit.</p>
<p>For example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby">  <span class="nb">at_exit</span> <span class="k">do</span>
    <span class="c1"># Global teardown</span>
    <span class="no">TempFileManager</span><span class="o">.</span><span class="n">clean_up</span>
  <span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>So there it is. Hope this helped.</p>
<p>Cheers,</p>
<p>And as always,</p>
<p>Have a nice day!</p>
<p>G.</p>
]]></content>
    </item>
    
    <item>
      <title>Cucumber Test Name and Tags on Feature</title>
      <link>https://skarlso.github.io/2013/04/15/cucumber-test-name-and-tags-on-feature/</link>
      <pubDate>Mon, 15 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2013/04/15/cucumber-test-name-and-tags-on-feature/</guid>
      <description>Hello everybody.
I would like to show you a gem today that I found out.
Apparently there is no easy way to get to the name of an executing cucumber scenario in cucumber-jvm
You can try something like that:
1 2 3 4  @After //this is cucumbers @Afters public static void afterExecution(Scenario scenario) { logger.log(&amp;#34;The status of the test is: &amp;#34; + scenario.getStatus()); }   But that isn&amp;rsquo;t giving you too much now is it?</description>
      <content type="html"><![CDATA[<p>Hello everybody.</p>
<p>I would like to show you a gem today that I found out.</p>
<p>Apparently there is no easy way to get to the name of an executing cucumber scenario in cucumber-jvm</p>
<p>You can try something like that:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@After</span> <span class="c1">//this is cucumbers @Afters
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">afterExecution</span><span class="o">(</span><span class="n">Scenario</span> <span class="n">scenario</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">logger</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&#34;The status of the test is: &#34;</span> <span class="o">+</span> <span class="n">scenario</span><span class="o">.</span><span class="na">getStatus</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>But that isn&rsquo;t giving you too much now is it? And the API of scenario is as small as it can get. It offers you four options:</p>
<ul>
<li>Ember</li>
<li>getStatus</li>
<li>isFailed</li>
<li>write</li>
</ul>
<p>That doesn&rsquo;t help me. I wanted to get the name of the executed feature and the tags on that particular feature. I thought that&rsquo;s got to be as easy as just getting a scenario accessing the feature and get the tags. Hooooowww boy I was wrong.</p>
<p>I ended up with this..</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">Field</span> <span class="n">f</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">&#34;reporter&#34;</span><span class="o">);</span>
<span class="n">f</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">JUnitReporter</span> <span class="n">reporter</span> <span class="o">=</span> <span class="o">(</span><span class="n">JUnitReporter</span><span class="o">)</span> <span class="n">f</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">scenario</span><span class="o">);</span>

<span class="n">Field</span> <span class="n">executionRunnerField</span> <span class="o">=</span> <span class="n">reporter</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">&#34;executionUnitRunner&#34;</span><span class="o">);</span>
<span class="n">executionRunnerField</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">ExecutionUnitRunner</span> <span class="n">executionUnitRunner</span> <span class="o">=</span> <span class="o">(</span><span class="n">ExecutionUnitRunner</span><span class="o">)</span> <span class="n">executionRunnerField</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">reporter</span><span class="o">);</span>

<span class="n">Field</span> <span class="n">cucumberScenarioField</span> <span class="o">=</span> <span class="n">executionUnitRunner</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">&#34;cucumberScenario&#34;</span><span class="o">);</span>
<span class="n">cucumberScenarioField</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">CucumberScenario</span> <span class="n">cucumberScenario</span> <span class="o">=</span> <span class="o">(</span><span class="n">CucumberScenario</span><span class="o">)</span> <span class="n">cucumberScenarioField</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">executionUnitRunner</span><span class="o">);</span>

<span class="n">Field</span> <span class="n">cucumberBackgroundField</span> <span class="o">=</span> <span class="n">cucumberScenario</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">&#34;cucumberBackground&#34;</span><span class="o">);</span>
<span class="n">cucumberBackgroundField</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">CucumberBackground</span> <span class="n">cucumberBackground</span> <span class="o">=</span> <span class="o">(</span><span class="n">CucumberBackground</span><span class="o">)</span> <span class="n">cucumberBackgroundField</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">cucumberScenario</span><span class="o">);</span>

<span class="n">Field</span> <span class="n">cucumberFeatureField</span> <span class="o">=</span> <span class="n">cucumberBackground</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getSuperclass</span><span class="o">().</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">&#34;cucumberFeature&#34;</span><span class="o">);</span>
<span class="n">cucumberFeatureField</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">CucumberFeature</span> <span class="n">cucumberFeature</span> <span class="o">=</span> <span class="o">(</span><span class="n">CucumberFeature</span><span class="o">)</span> <span class="n">cucumberFeatureField</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">cucumberBackground</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>Ohhhhh yes! The fields which I wanted were all private and not accessible. I&rsquo;m sure there was a reason behind this decision but if it was sensible it eludes me. But in the world of programming nothing is impossible they say so there.</p>
<p>In cucumberFeature there will be everything what you need. Tags, Names, Tests, Execution time. Everything.</p>
<p>I know that cucumber runs with jUnit so if there is a better way to do this please for the love of my sanity share it with me.</p>
<p>Thank you for reading.</p>
<p>And as always,</p>
<p>Have a nice day.</p>
<p>G.</p>
]]></content>
    </item>
    
    <item>
      <title>How to eliminate a parameter boom</title>
      <link>https://skarlso.github.io/2012/10/09/how-to-eliminate-a-parameter-boom/</link>
      <pubDate>Tue, 09 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2012/10/09/how-to-eliminate-a-parameter-boom/</guid>
      <description>Hello folks.
Today I want to write about a little trick I learned.
If you are working with legacy code and you don&amp;rsquo;t have the chance to eliminate core design problems, you can use this little pattern to help you out.
Problem
Problem is that you have a class that has a gazillion collaborators and at some point in time one of the clever devs thought it would be a cool idea to do dependancy injection via the constructor.</description>
      <content type="html"><![CDATA[<p>Hello folks.</p>
<p>Today I want to write about a little trick I learned.</p>
<p>If you are working with legacy code and you don&rsquo;t have the chance to eliminate core design problems, you can use this little pattern to help you out.</p>
<p><strong>Problem</strong></p>
<p>Problem is that you have a class that has a gazillion collaborators and at some point in time one of the clever devs thought it would be a cool idea to do dependancy injection via the constructor. We all know that doing this makes the class immutable which is very good for a number of reasons. However it doesn&rsquo;t provide a flexible solution if you want to leave out one or two collabs. For that your would have to create Adapter constructors and chain them upwards which would get very ugly very fast. While using JavaBeans getters and setters can leave your class in a harmful state like not at all or partially initialised.</p>
<p>So what&rsquo;s a good solution then?</p>
<p><strong>Solution</strong></p>
<p>One possible solution would be to use some kind of initialisation framework like Springs @Autowired. But cluttering your classes with that isn&rsquo;t really pretty either. But it&rsquo;s A solution.</p>
<p>Another solution is the usage of a builder pattern.</p>
<p>Consider this class:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">VeryImportantService</span> <span class="o">{</span>

        <span class="kd">public</span> <span class="nf">VeryImportantService</span><span class="o">(</span><span class="n">CollabOne</span> <span class="n">collabOne</span><span class="o">,</span> <span class="n">CollabTwo</span> <span class="n">collabTwo</span><span class="o">,</span> <span class="n">CollabThree</span> <span class="n">collabThree</span><span class="o">,</span> <span class="n">CollabFour</span> <span class="n">collabFour</span><span class="o">,</span>
            <span class="n">CollabFive</span> <span class="n">collabFive</span><span class="o">,</span> <span class="n">CollabSix</span> <span class="n">collabSix</span><span class="o">)</span> <span class="o">{</span>
            <span class="o">.</span>
            <span class="o">.</span>
            <span class="o">.</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Don&rsquo;t forget that we want these to be optional. I would like to leave out two or three here and there.</p>
<p>The builder let&rsquo;s you do that. It looks something like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">VeryImportantService</span> <span class="o">{</span>

        <span class="kd">private</span> <span class="n">CollabOne</span> <span class="n">collabOne</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">CollabTwo</span> <span class="n">collabTwo</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">CollabThree</span> <span class="n">collabThree</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">CollabFour</span> <span class="n">collabFour</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">CollabFive</span> <span class="n">collabFive</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">CollabSix</span> <span class="n">collabSix</span><span class="o">;</span>


        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nf">Builder</span><span class="o">()</span> <span class="o">{</span>
            <span class="kd">private</span> <span class="n">CollabOne</span> <span class="n">collabOne</span><span class="o">;</span>
            <span class="kd">private</span> <span class="n">CollabTwo</span> <span class="n">collabTwo</span><span class="o">;</span>
            <span class="kd">private</span> <span class="n">CollabThree</span> <span class="n">collabThree</span><span class="o">;</span>
            <span class="kd">private</span> <span class="n">CollabFour</span> <span class="n">collabFour</span><span class="o">;</span>
            <span class="kd">private</span> <span class="n">CollabFive</span> <span class="n">collabFive</span><span class="o">;</span>
            <span class="kd">private</span> <span class="n">CollabSix</span> <span class="n">collabSix</span><span class="o">;</span>

            <span class="kd">public</span> <span class="nf">Builder</span><span class="o">()</span> <span class="o">{}</span>

            <span class="kd">public</span> <span class="n">Builder</span> <span class="nf">collabOne</span><span class="o">(</span><span class="n">CollabOne</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">collabOne</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
                <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="kd">public</span> <span class="n">Builder</span> <span class="nf">collabTwo</span><span class="o">(</span><span class="n">CollabTwo</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">collabTwo</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
                <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="o">.</span>
            <span class="o">.</span>
            <span class="o">.</span>

            <span class="kd">public</span> <span class="n">VeryImportantService</span> <span class="nf">build</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">VeryImportantService</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
            <span class="o">}</span>

        <span class="o">}</span>

        <span class="c1">//private constructor
</span><span class="c1"></span>        <span class="kd">private</span> <span class="nf">VeryImportantService</span><span class="o">(</span><span class="n">Builder</span> <span class="n">builder</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">collabOne</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">collabOne</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">collabTwo</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">collabTwo</span><span class="o">;</span>
            <span class="o">.</span>
            <span class="o">.</span>
            <span class="o">.</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Now. calling this would look something like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">VeryImportantService</span> <span class="n">veryImportantService</span> <span class="o">=</span> <span class="k">new</span> <span class="n">VeryImportantService</span><span class="o">.</span><span class="na">Builder</span><span class="o">().</span><span class="na">collabOne</span><span class="o">(</span><span class="n">someValueOne</span><span class="o">).</span><span class="na">collabTwo</span><span class="o">(</span><span class="n">someValueTwo</span><span class="o">).</span><span class="na">collabFive</span><span class="o">(</span><span class="n">someValueFive</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>This enables you to be flexible HOWEVER!! I HATE train wrecks. So I would probably tweak it not to return things, but set them. Then you would end up calling then line by line. Which is still not the best but better then the alternative.</p>
<p><strong>End words</strong></p>
<p>So there you go. This is A solution not THE solution obviously. The best would be to NOT design such a monster at all. If you have any better ideas please feel free to share. I would gladly put them on my blog.</p>
<p>As always,</p>
<p>Thanks for reading,</p>
<p>Gergely.</p>
]]></content>
    </item>
    
    <item>
      <title>TDD and Game of Life</title>
      <link>https://skarlso.github.io/2012/07/12/tdd-and-game-of-life/</link>
      <pubDate>Thu, 12 Jul 2012 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2012/07/12/tdd-and-game-of-life/</guid>
      <description>So today at 8-12PM I had a great session with two friends of mine. It was awesome. Like a mini code retreat.
We set down in a musky bar, drank wine and beer and cider, and decided to practice some TDD with the well known problem of Conway&amp;rsquo;s Game of Life. This challenge is really interesting. I never done it before, ever. So it was a really good practice for me.</description>
      <content type="html"><![CDATA[<p>So today at 8-12PM I had a great session with two friends of mine. It was awesome. Like a mini code retreat.</p>
<p>We set down in a musky bar, drank wine and beer and cider, and decided to practice some TDD with the well known problem of <a href="http://en.wikipedia.org/wiki/Conway's_Game_of_Life" target="_blank">Conway&rsquo;s Game of Life</a>. This challenge is really interesting. I never done it before, ever. So it was a really good practice for me.</p>
<p>So.</p>
<p><strong>In the beginning there was Test</strong></p>
<p>One of my friends and I started out by developing the implementation for the game while the second one was mentoring and couching us. As with any problem I&rsquo;m facing now days, I started with writing a failing test first. I didn&rsquo;t write any kind of production code yet. I wrote a test testing for having the class called game of life.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldHaveClassForGameOfLife</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">GameOfLife</span> <span class="n">gameOfLife</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GameOfLife</span><span class="o">();</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>This wasn&rsquo;t compiling of course because I didn&rsquo;t have any kind of GameOfLife class. But intelliJ is so intelligent that I simply pressed Alt+Enter and created the class immediately. The class didn&rsquo;t have anything in it, but I already had a passing test.</p>
<p>So this went on and on and I created one test after another while my other coding friend did the same.</p>
<p><strong>Now the amazing part</strong></p>
<p>I begun working on the Grid. A simple octagonal coordinating system. This was represented in the beginning with a simple two dimensional array with Cells in it.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">    <span class="n">Cells</span><span class="o">[][]</span> <span class="n">cells</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Cells</span><span class="o">[</span><span class="n">50</span><span class="o">][</span><span class="n">50</span><span class="o">];</span>
</code></pre></td></tr></table>
</div>
</div><p>This of course wasn&rsquo;t dynamic. I didn&rsquo;t care about that yet. I had my grid of cells. These cells were initially all dead.</p>
<p>Now, the interesting part is that as I developed my Grid finding out the Cells neighbours and counting them, my friend worked on the Cells themselves and getting their next state and killing them based on the rules.</p>
<p>We never talked to each other, didn&rsquo;t agree on roles or directions or anything. And even so at the and. We were at a stage where we met in the middle and could merge our codes! Our little game of life evolved with a push of a button. ( Three actually. )</p>
<p>This was simply amazing. Without ever talking about the direction we want to go we created a working code base that could be merged!</p>
<p><strong>It just works</strong></p>
<p>Before TDD I would have tackled this problem much differently. And it would have taken me much more time too. This was like an hour or so.</p>
<p>TDD helped me break down the job into small, manageable tasks. I created and deleted and rewrote tests as I went on and on and developed the algorithm for my Grid and Cell. And eventually the problem slowly unfolded itself right before my eyes. I began to see the connections. I began to see the beauty. I began to understand! This is something I rarely enjoyed previously without using TDD.</p>
<p><strong>Summary</strong></p>
<p>I recommend for you guys to do the same. Just sit down, find a problem, find a coding kata and just do it with TDD. With PROPER TDD.</p>
<p>Here are some good sites for katas and problems:</p>
<p><a href="http://codekata.pragprog.com/" target="_blank"><a href="http://codekata.pragprog.com/">http://codekata.pragprog.com/</a></a></p>
<p><a href="http://www.spoj.pl/problems/classical/" target="_blank"><a href="http://www.spoj.pl/problems/classical/">http://www.spoj.pl/problems/classical/</a></a></p>
<p>Just select a problem and then start cracking on it. Do this every time you have some free time. Like a martial art trainee doing basic exercises and you will get better at problem solving and at TDD too. I promise.</p>
<p>Happy coding and good night!</p>
<p>Gergely.</p>
]]></content>
    </item>
    
    <item>
      <title>Solution to Wrap Kata</title>
      <link>https://skarlso.github.io/2012/06/26/solution-to-wrap-kata/</link>
      <pubDate>Tue, 26 Jun 2012 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2012/06/26/solution-to-wrap-kata/</guid>
      <description>My solution to the String Wrap Kata. The goal is to have it wrap a text on a given column width.
It is not the best solution but this is my first try. I did it with TDD so there were tests first, which I&amp;rsquo;m not going to copy in..
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  public class WrapKata { public String wrap(String input, int columnSize) { if (input.</description>
      <content type="html"><![CDATA[<p>My solution to the String Wrap Kata. The goal is to have it wrap a text on a given column width.</p>
<p>It is not the best solution but this is my first try. I did it with TDD so there were tests first, which I&rsquo;m not going to copy in..</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WrapKata</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">wrap</span><span class="o">(</span><span class="n">String</span> <span class="n">input</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnSize</span><span class="o">)</span> <span class="o">{</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="n">columnSize</span><span class="o">)</span>
            <span class="k">return</span> <span class="n">input</span><span class="o">;</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">wrapLines</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="n">columnSize</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="nf">wrapLines</span><span class="o">(</span><span class="n">String</span> <span class="n">input</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnSize</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">breakPoint</span> <span class="o">=</span> <span class="n">getBreakPoint</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="n">columnSize</span><span class="o">);</span>

        <span class="n">String</span> <span class="n">head</span> <span class="o">=</span> <span class="n">createHead</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="n">breakPoint</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">createTail</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="n">breakPoint</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">head</span> <span class="o">+=</span> <span class="s">&#34;\n&#34;</span> <span class="o">+</span> <span class="n">wrap</span><span class="o">(</span><span class="n">tail</span><span class="o">,</span> <span class="n">columnSize</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="nf">createTail</span><span class="o">(</span><span class="n">String</span> <span class="n">input</span><span class="o">,</span> <span class="kt">int</span> <span class="n">breakPoint</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">input</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">breakPoint</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="nf">createHead</span><span class="o">(</span><span class="n">String</span> <span class="n">input</span><span class="o">,</span> <span class="kt">int</span> <span class="n">breakPoint</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">input</span><span class="o">.</span><span class="na">substring</span><span class="o">(,</span> <span class="n">breakPoint</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">getBreakPoint</span><span class="o">(</span><span class="n">String</span> <span class="n">input</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnSize</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">&#34; &#34;</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">input</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="sc">&#39; &#39;</span><span class="o">,</span> <span class="n">columnSize</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">columnSize</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div>]]></content>
    </item>
    
    <item>
      <title>Don’t throw Exception</title>
      <link>https://skarlso.github.io/2012/06/13/dont-throw-exception/</link>
      <pubDate>Wed, 13 Jun 2012 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2012/06/13/dont-throw-exception/</guid>
      <description>Hi.
Today I want to talk about a common problem in many frameworks I encountered over the course of my carrier as a Java dev / automation engineer, whatnot.
Throwing Exceptions. That is in your method you have something like this:
1  public void insertMethodNameHere(String param) throws Exception {}   This is bad. And I will tell you in short forms why.
Hides exceptions
This one should be obvious.</description>
      <content type="html"><![CDATA[<p>Hi.</p>
<p>Today I want to talk about a common problem in many frameworks I encountered over the course of my carrier as a Java dev / automation engineer, whatnot.</p>
<p>Throwing Exceptions. That is in your method you have something like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertMethodNameHere</span><span class="o">(</span><span class="n">String</span> <span class="n">param</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{}</span>
</code></pre></td></tr></table>
</div>
</div><p>This is bad. And I will tell you in short forms why.</p>
<p><strong>Hides exceptions</strong></p>
<p>This one should be obvious. When a method throws exception you can never be sure what kind of exceptions it handles. It will hide what problems it can encounter. It will hide possible threats and will generally mean nothing to you when it fails.</p>
<p><strong>Hides functionality</strong></p>
<p>One of the things you can do will come up with a method that throws at least six exception. Well guess what. That will tell you that the method has DESIGN ISSUES! The first rule of software development is that a method should do only one thing! Well if it throws six exceptions chances are it does more then one.</p>
<p><strong>Hard to debug</strong></p>
<p>You wont have a meaning full exception if it fails immediately. You will have to go through lines of codes and stack traces to find out what the hell happened and what threw what kind of exception where. That is just simply stupid. Why give yourself a hard time?</p>
<p><strong>So what to do instead?</strong></p>
<p><strong>Meaning full exceptions</strong></p>
<p>If you have to throw. Throw meaning full exceptions. Things like: LoginFailedExpcetion(String username, String password); In the message write:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;Failed login with username: %s; password: %s&#34;</span><span class="o">,</span> <span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>When this fails you will immediately know what happened without miles of stack trace to run through.</p>
<p>When you go ahead and start to re-factor your code to handle exceptions properly you will end up with methods throwing six - seven exceptions. Don&rsquo;t be afraid. That means that you finally are able to see that your code is doing many things that it is not supposed to do. Start by extracting bits and pieces of your code into smaller segments that throw a max of two exceptions. Write unit tests around the function and start running them as you re-factor. See what fails so you can track your changes as you go.</p>
<p>A general good advice is that your method should throw a maximum of <strong>TWO</strong> exception. If you have more, you are doing something more then you should. Refactor / Extract that bit into a smaller function.</p>
<p><strong>Handling exceptions</strong></p>
<p>What you really want to do is create a Layer that you will be using to capture and handle exceptions. You can than take that layer and hide it deep deep into your framework so that you never ever see it again. Just like with switch.</p>
<p>As you go you will have layers of layers of exceptions. You will have features that depend on each other and talk to each other in some ways.</p>
<p>Meaning full exception will help you find out what broke why. For example you have Login that throws a Login exception. On top of that you have an order that handles OrderFailedException. You will have an easy time seeing that the order failed because the login failed. Because you handled your login exception in the Login Layer. And you handled your OrderException in the order layer. There are no mixes. Keep it clean and keep it where it belongs.</p>
<p><strong>Conclusion</strong></p>
<p>Exceptions are part of Java just like String or int or long is. You use these wisely so why don&rsquo;t you apply that same logic to your Exception handling? Don&rsquo;t be afraid of having 20-25 exception classes. Group them together or leave them in their respective packages or have them in a deep layer but HAVE THEM. They WILL save time and time is always money. So they will save you money in the end when an error occurs. And errors will always occur.</p>
<p>Thanks for reading,</p>
<p>Gergely.</p>
]]></content>
    </item>
    
    <item>
      <title>JMS Connection setup and Framework</title>
      <link>https://skarlso.github.io/2012/03/04/jms-connection-setup-and-framework/</link>
      <pubDate>Sun, 04 Mar 2012 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2012/03/04/jms-connection-setup-and-framework/</guid>
      <description>Hello chumps.
Today I want to write about jms connection testing with a small framework. I wrote a small thing using a factory object model. It&amp;rsquo;s a lead, a proof of concept. You can use this to go onward.
First, let&amp;rsquo;s begin with the JMS connection it self.
JMS Connection
First rule of thumb is: &amp;ldquo;Don&amp;rsquo;t wait for a response when dealing with JMS queues.&amp;rdquo; How so? Because, a JMS queue is asynchronous so you wont get back anything.</description>
      <content type="html"><![CDATA[<p>Hello chumps.</p>
<p>Today I want to write about jms connection testing with a small framework. I wrote a small thing using a factory object model. It&rsquo;s a lead, a proof of concept. You can use this to go onward.</p>
<p>First, let&rsquo;s begin with the JMS connection it self.</p>
<p><strong>JMS Connection</strong></p>
<p>First rule of thumb is: &ldquo;Don&rsquo;t wait for a response when dealing with JMS queues.&rdquo; How so? Because, a JMS queue is asynchronous so you wont get back anything. There are however two ways of checking if it was a success or not.</p>
<p>1: Check your database. The service you are trying out probably records something in the database, right? Check it. You can use a simple JDBC connection, or a Postgres connection or whatever your choice of database is.</p>
<p>2: You can monitor use the log of your choice of service provider. If there is an exception the moment you send something, you can be sure it is received. Just the format is not correct. This is of course based on how your service handles exceptions.</p>
<p>So let&rsquo;s get down to business.</p>
<p>First, there is a really good article on how to create a JMS connection.</p>
<p>This is the link for it: <a href="http://www.javablogging.com/simple-guide-to-java-message-service-jms-using-activemq" title="Simple JMS How To">Simple Guide to Java message service JMS using ActiveMQ</a></p>
<p>Itt will tell you everything you need to know about creating a connection and waiting for a response.</p>
<p>I will tell you now how to use this information in a real live environment.</p>
<p>In a real environment you will be using a queue which has certain settings that will not allow you to &ldquo;join&rdquo; it, or creating it. And you need to get the name of the queue and certain settings, like the destination URL.</p>
<p>First, the tool you are going to use is called JConsole. JConsole is a tool to monitor applications. It&rsquo;s tool to monitor the JVM. I wont go into details about it since there are numerous descriptions about it. It is part of the java installation.</p>
<p>So after firing it up and giving it a connection url which would look like this: &lsquo;service:jmx:rmi:///jndi/rmi://hostName:portNum/jmxrmi&rsquo;, you would go ahead and search on the TAB:<strong>Threads</strong>.</p>
<p>Look for a Thread that is labelled like this: <YourConnectionLayer> Transport Server: tcp://0.0.0.0: <port></p>
<p>This will be your destination url.</p>
<p>In the blog the guy is using ActiveMQ. It&rsquo;s your best guess. It&rsquo;s lightweight, it&rsquo;s fast it&rsquo;s easy. Go for it.</p>
<p>So your Destination would look like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">    <span class="n">ConnectionFactory</span> <span class="n">connectionFactory</span> <span class="o">=</span>
            <span class="k">new</span> <span class="n">ActiveMQConnectionFactory</span><span class="o">(</span><span class="s">&#34;&lt;yourserviceparameter&gt;://tcp://0.0.0.0:&lt;port&gt;&#34;</span><span class="o">);</span>
    <span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">connectionFactory</span><span class="o">.</span><span class="na">createConnection</span><span class="o">();</span>
    <span class="n">connection</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</code></pre></td></tr></table>
</div>
</div><p>After that you will need the queue name which you can get as easy as this. Go to the TAB <strong>MBeans</strong>. There you can see, if you are using ActiveMQ, you will see something like this : org.active.activemq. Open this up and you will see under localhost a number of queues that your server has configured. Open up one of them and copy the queue name in the createQueue.</p>
<p>Use it like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">    <span class="n">Destination</span> <span class="n">destination</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">createQueue</span><span class="o">(</span><span class="s">&#34;&lt;queue name&gt;&#34;</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>Of course if your service is configured properly you wont have any access to it. Use the connection like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">    <span class="n">connection</span> <span class="o">=</span> <span class="n">connectionFactory</span><span class="o">.</span><span class="na">createConnection</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">,</span> <span class="s">&#34;password&#34;</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p>You will have now logged in with the proper user.</p>
<p>Now you can send the message. You have everything configured.</p>
<p><strong>Framework</strong></p>
<p>Let&rsquo;s speak about the framework you will need to properly use this technology.</p>
<p>One of the paradigms for programming is design to interfaces. If you need a proper working framework, your ave to design with the mind set to changing pieces of code. Thinking about what would change the most. Your connection settings. You want a framework which can use any kind of connection. Not just JMS but whatever connection you would like. It could be a synchronous one. Or a database one. Or a JMS. Doesn&rsquo;t matter. You are only interested in a message sent or a connection, or whatever you want.</p>
<p>So let&rsquo;s get to it.</p>
<p>Interface:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">IConnection</span> <span class="o">{</span>
	<span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>This is sample connection interface. You could have numerous templates here.</p>
<p>You will be using an object factory pattern here. Your implementer will be taken for a Java Property file. But it can be taken from whatever configuration you like. XML maybe, or a database even.</p>
<p>Let&rsquo;s see you connection factory:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConnFactory</span> <span class="o">{</span>

	<span class="kd">static</span> <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Logger</span><span class="o">();</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="n">IConnection</span> <span class="nf">getImplementer</span><span class="o">()</span>
	<span class="o">{</span>
		<span class="n">Properties</span> <span class="n">prop</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Properties</span><span class="o">();</span>

		<span class="k">try</span>
		<span class="o">{</span>
			<span class="n">prop</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;conf/implementer.property&#34;</span><span class="o">));</span>
		<span class="o">}</span>
		<span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">io</span><span class="o">)</span>
		<span class="o">{</span>
			<span class="n">logger</span><span class="o">.</span><span class="na">Log</span><span class="o">(</span><span class="s">&#34;Could not find property file: &#34;</span> <span class="o">+</span> <span class="n">io</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
		<span class="o">}</span>

		<span class="n">String</span> <span class="n">implementerClass</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&#34;implementer&#34;</span><span class="o">);</span>

		<span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">iConnect</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

		<span class="k">try</span>
		<span class="o">{</span>
			<span class="n">iConnect</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">implementerClass</span><span class="o">);</span>
		<span class="o">}</span>
		<span class="k">catch</span> <span class="o">(</span><span class="n">ClassNotFoundException</span> <span class="n">ce</span><span class="o">)</span>
		<span class="o">{</span>
			<span class="n">logger</span><span class="o">.</span><span class="na">Log</span><span class="o">(</span><span class="s">&#34;Class could not be found: &#34;</span> <span class="o">+</span> <span class="n">ce</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
		<span class="o">}</span>

		<span class="n">IConnection</span> <span class="n">connection</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

		<span class="k">try</span>
		<span class="o">{</span>
			<span class="n">connection</span> <span class="o">=</span> <span class="o">(</span><span class="n">IConnection</span><span class="o">)</span> <span class="n">iConnect</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="k">catch</span> <span class="o">(</span><span class="n">IllegalAccessException</span> <span class="n">ie</span><span class="o">)</span>
		<span class="o">{</span>
			<span class="n">logger</span><span class="o">.</span><span class="na">Log</span><span class="o">(</span><span class="s">&#34;Illegal access excpetion: &#34;</span> <span class="o">+</span> <span class="n">ie</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>

		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InstantiationException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

			<span class="n">logger</span><span class="o">.</span><span class="na">Log</span><span class="o">(</span><span class="s">&#34;Instatiation exception occured. &#34;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
		<span class="o">}</span>

		<span class="k">return</span> <span class="n">connection</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Easy enough, right? Class.forname will instantiate the class name you have in the property file. This could be something like this: com.packagename.ClassName. Doesn&rsquo;t matter to you. You can add some typeof checks, or instanceof checks, whatever you like. Or you can use <Type> generics.</p>
<p>Let&rsquo;s get to the concrete implementation:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JMSConnectionImpl</span> <span class="kd">implements</span> <span class="n">IConnection</span> <span class="o">{</span>
    <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Logger</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">()</span>
    <span class="o">{</span>

   	<span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">.</span>
        <span class="o">.</span>
        <span class="o">.</span>
        <span class="k">finally</span>
        <span class="o">{</span>
            <span class="n">connection</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Simple enough. Here you have a concrete implementation of your collection and your sender class.</p>
<p>And the simple usage facility of this is. simple too:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">    <span class="n">IConnection</span> <span class="n">iConnection</span> <span class="o">=</span> <span class="n">ConnFactory</span><span class="o">.</span><span class="na">getImplementer</span><span class="o">();</span>

    <span class="n">iConnection</span><span class="o">.</span><span class="na">sendMessage</span><span class="o">();</span>
</code></pre></td></tr></table>
</div>
</div><p>Simple enough too, right? So what happens here? You have a factory that will give you back any kind of implementation you are writing in you property file. You don&rsquo;t care what the implementation is in your test. You don&rsquo;t care what it&rsquo;s name is. You don&rsquo;t care what it&rsquo;s result is. Okay, you care about the result, but that&rsquo;s another history since you will check that elsewhere.</p>
<p>There you go. If any question occurs, please don&rsquo;t hesitate to ask.</p>
<p>Thanks for reading!</p>
]]></content>
    </item>
    
    <item>
      <title>Configuration</title>
      <link>https://skarlso.github.io/2012/02/27/configuration/</link>
      <pubDate>Mon, 27 Feb 2012 00:00:00 +0000</pubDate>
      
      <guid>https://skarlso.github.io/2012/02/27/configuration/</guid>
      <description>When I see something like this:
1 2 3 4 5 6  public class Config { public static final string DATABASELINK = &amp;#34;linkhere&amp;#34;; . . . }   It sends a small, but chilling shiver down my spine. Just. don&amp;rsquo;t. There are a lot of possibilities to use configuration in Java. Java property files. Xml. Xml serialization. CSV file. Whatever suits you best, but this? DON&amp;rsquo;T!</description>
      <content type="html"><![CDATA[<p>When I see something like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Config</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">string</span> <span class="n">DATABASELINK</span> <span class="o">=</span> <span class="s">&#34;linkhere&#34;</span><span class="o">;</span>
        <span class="o">.</span>
        <span class="o">.</span>
        <span class="o">.</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>It sends a small, but chilling shiver down my spine. Just. don&rsquo;t. There are a lot of possibilities to use configuration in Java. Java property files. Xml. Xml serialization. CSV file. Whatever suits you best, but this? DON&rsquo;T!</p>
]]></content>
    </item>
    
  </channel>
</rss>