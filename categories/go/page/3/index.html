<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Go | Ramblings of a cloud engineer</title>
<meta name="keywords" content="">
<meta name="description" content="Welcome to my little corner of the internet">
<meta name="author" content="Gergely Brautigam">
<link rel="canonical" href="https://skarlso.github.io/categories/go/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css" integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://skarlso.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://skarlso.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://skarlso.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://skarlso.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://skarlso.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://skarlso.github.io/categories/go/index.xml">
<link rel="alternate" hreflang="en" href="https://skarlso.github.io/categories/go/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Go">
<meta property="og:description" content="Welcome to my little corner of the internet">
<meta property="og:type" content="website">
<meta property="og:url" content="https://skarlso.github.io/categories/go/">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Go">
<meta name="twitter:description" content="Welcome to my little corner of the internet">

</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://skarlso.github.io/" accesskey="h" title="Ramblings of a cloud engineer (Alt + H)">Ramblings of a cloud engineer</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://skarlso.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://skarlso.github.io/search/" title="Search">
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://skarlso.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://skarlso.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://skarlso.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://skarlso.github.io/categories/">Categories</a></div>
  <h1>
    Go
    <a href="/categories/go/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Global variable for never changing regex
    </h2>
  </header>
  <div class="entry-content">
    <p>Quick reminder. If you have a never changing regex in Go, do NOT put it into a frequently called function. ALWAYS put it into a global variable. I’ll show you why.
Benchmark for code with a variable in a frequently called function:
BenchmarkNumber-8 30000	41633 ns/op BenchmarkAreaCode-8 50000	27736 ns/op BenchmarkFormat-8 50000	29263 ns/op PASS ok _/phone-number	5.110s Benchmark for code with the same variable outside in a global scope:
BenchmarkNumber-8 300000	5618 ns/op BenchmarkAreaCode-8 500000	3884 ns/op BenchmarkFormat-8 300000	4696 ns/op PASS ok _/phone-number	5.197s Notice the magnitude change in ns/op! That’s something to keep an eye out for.
...</p>
  </div>
  <footer class="entry-footer"><span title='2016-08-16 00:00:00 +0000 UTC'>August 16, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Global variable for never changing regex" href="https://skarlso.github.io/2016/08/16/never-changing-regex/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">How to do Google sign-in with Go
    </h2>
  </header>
  <div class="entry-content">
    <p>Hi folks.
Today, I would like to write up a step - by - step guide with a sample web app on how to do Google Sign-In and authorization.
...</p>
  </div>
  <footer class="entry-footer"><span title='2016-06-12 00:00:00 +0000 UTC'>June 12, 2016</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to How to do Google sign-in with Go" href="https://skarlso.github.io/2016/06/12/google-signin-with-go/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Wercker Fixed
    </h2>
  </header>
  <div class="entry-content">
    <p>Hi Folks.
So Wercker was not working. After a minor modification it seems to be okay now. The config file needed for it to work looks like this:
box: golang build: steps: - arjen/hugo-build: theme: redlounge deploy: steps: - install-packages: packages: git - leipert/git-push: gh_oauth: $GIT_TOKEN repo: skarlso/skarlso.github.io branch: master basedir: public The modification is the box type to golang and removed ssh-client from packages.
...</p>
  </div>
  <footer class="entry-footer"><span title='2016-03-09 00:00:00 +0000 UTC'>March 9, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Wercker Fixed" href="https://skarlso.github.io/2016/03/09/wercker-fixed/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Wercker Test
    </h2>
  </header>
  <div class="entry-content">
    <p>Basics This is a wercker Test.
</p>
  </div>
  <footer class="entry-footer"><span title='2016-03-04 00:00:00 +0000 UTC'>March 4, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Wercker Test" href="https://skarlso.github.io/2016/03/04/wercker-test-2/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Wercker Test
    </h2>
  </header>
  <div class="entry-content">
    <p>Basics This is a wercker Test.
</p>
  </div>
  <footer class="entry-footer"><span title='2016-02-10 00:00:00 +0000 UTC'>February 10, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Wercker Test" href="https://skarlso.github.io/2016/02/10/wercker-test/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Doing CORS in Go with Gin and JSON
    </h2>
  </header>
  <div class="entry-content">
    <p>Basics Hello folks.
This will be a quick post about how to do CORS with jQuery, Gin in Go with a very simple ajax GET and Json.
I’m choosing JSON here because basically I don’t really like JSONP. And actually, it’s not very complicated to do CORS, it’s just hidden enough so that it doesn’t become transparent.
First, what is CORS? It’s Cross-Platform Resource Sharing. It has been invented so that without your explicit authorization in the header of a request, Javascript can’t reach outside of your domain and be potentially harmful to your visitors.
...</p>
  </div>
  <footer class="entry-footer"><span title='2016-02-02 00:00:00 +0000 UTC'>February 2, 2016</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Doing CORS in Go with Gin and JSON" href="https://skarlso.github.io/2016/02/02/doing-cors-in-go-with-gin-and-json/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">My Journey in advent of code
    </h2>
  </header>
  <div class="entry-content">
    <p>Hello folks.
I wanted to share with you my tale of working through the problems with Advent Of Code.
It is a nice tale and there are a few things I learned from it, especially in Go, since I used that solve all of the problems. So, let’s get started.
Solving the problems The most important lesson I learned while doing these exercises was, how to solve these problems. A couple of them were simple enough to not have to over think it, but most of them got very tricky. I could have gone with a brute force attempt, but as we see later, that wasn’t always a very good solution. And people who used that, actually just got lucky finding their solutions.
...</p>
  </div>
  <footer class="entry-footer"><span title='2016-01-22 00:00:00 +0000 UTC'>January 22, 2016</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to My Journey in advent of code" href="https://skarlso.github.io/2016/01/22/my-journey-in-advent-of-code/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Improving performance with byte slice and int map
    </h2>
  </header>
  <div class="entry-content">
    <p>Hello Folks.
Today I would like to share with you my little tale of refactoring my solution to Advent Of Code Day 13.
It’s a lovely tale of action, adventure, drama, and comedy.
Let’s being with my first iteration of the problem.
package main import ( &#34;bufio&#34; &#34;fmt&#34; &#34;math&#34; &#34;os&#34; &#34;strconv&#34; &#34;strings&#34; &#34;github.com/skarlso/goutils/arrayutils&#34; ) var seatingCombinations = make([][]string, 0) var table = make(map[string][]map[string]int) var keys = make([]string, 0) //Person a person type Person struct { // neighbour *Person name string like int } func main() { file, _ := os.Open(&#34;input.txt&#34;) defer file.Close() scanner := bufio.NewScanner(file) for scanner.Scan() { line := scanner.Text() split := strings.Split(line, &#34; &#34;) like, _ := strconv.Atoi(split[3]) //If lose -&gt; * -1 if split[2] == &#34;lose&#34; { like *= -1 } table[split[0]] = append(table[split[0]], map[string]int{strings.Trim(split[10], &#34;.&#34;): like}) if !arrayutils.ContainsString(keys, split[0]) { keys = append(keys, split[0]) } } generatePermutation(keys, len(keys)) fmt.Println(&#34;Best seating efficiency:&#34;, calculateSeatingEfficiancy()) } func generatePermutation(s []string, n int) { if n == 1 { news := make([]string, len(s)) copy(news, s) seatingCombinations = append(seatingCombinations, news) } for i := 0; i &lt; n; i&#43;&#43; { s[i], s[n-1] = s[n-1], s[i] generatePermutation(s, n-1) s[i], s[n-1] = s[n-1], s[i] } } func calculateSeatingEfficiancy() int { bestSeating := math.MinInt64 for _, v := range seatingCombinations { calculatedOrder := 0 for i := range v { left := (i - 1) % len(v) //This is to work around the fact that in Go //modulo of a negative number will not return a positive number. //So -1 % 4 will not return 3 but -1. In that case we add length. if left &lt; 0 { left &#43;= len(v) } right := (i &#43; 1) % len(v) // fmt.Printf(&#34;Left: %d; Right: %d\n&#34;, left, right) leftLike := getLikeForTargetConnect(v[i], v[left]) rightLike := getLikeForTargetConnect(v[i], v[right]) // fmt.Printf(&#34;Name: %s; Left:%d; Right:%d\n&#34;, v[i], leftLike, rightLike) calculatedOrder &#43;= leftLike &#43; rightLike } // fmt.Printf(&#34;Order for: %v; Calc:%d\n&#34;, v, calculatedOrder) if calculatedOrder &gt; bestSeating { bestSeating = calculatedOrder } } return bestSeating } func getLikeForTargetConnect(name string, neighbour string) int { neighbours := table[name] for _, t := range neighbours { if v, ok := t[neighbour]; ok { return v } } return 0 } This is quiet large. And takes a bit of explaining. So what is happening here? We are putting the names which correspond with numbers and neighbours into a map which has a map as a value. The map contains seating information for a person. For example, next to Alice, a bunch of people can sit, and they have a certain relationship to Alice, represented by a number.
...</p>
  </div>
  <footer class="entry-footer"><span title='2016-01-05 00:00:00 +0000 UTC'>January 5, 2016</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Improving performance with byte slice and int map" href="https://skarlso.github.io/2016/01/05/improving-performance-with-byte-slice-and-int-map/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Byte arrays and Channels
    </h2>
  </header>
  <div class="entry-content">
    <p>Hi folks and a Happy new Year!
Today, I would like to show you some interesting things you can do with channels. Consider the following simple example.
package main import &#34;fmt&#34; func main() { generatedPassword := make(chan int, 100) correctPassword := make(chan int) defer close(generatedPassword) defer close(correctPassword) go passwordIncrement(generatedPassword) go checkPassword(generatedPassword, correctPassword) pass := &lt;-correctPassword fmt.Println(pass) } func checkPassword(input &lt;-chan int, output chan&lt;- int) { for { p := &lt;-input //Introduce lengthy operation here // time.Sleep(time.Second) fmt.Println(&#34;Checking p:&#34;, p) if p &gt; 100000 { output &lt;- p } } } func passwordIncrement(out chan&lt;- int) { p := 0 for { p&#43;&#43; out &lt;- p } } The premise is as follows. It launches two go routines. One, which generates passwords, and an other which checks for validity. The two routines talk to each other through the channel generatedPassword. That’s the providing connections between them. The channel correctPassword provides output for the checkPassword routine.
...</p>
  </div>
  <footer class="entry-footer"><span title='2016-01-01 00:00:00 +0000 UTC'>January 1, 2016</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Byte arrays and Channels" href="https://skarlso.github.io/2016/01/01/byte-arrays-and-channels/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Use Byte Array Instead of Strings
    </h2>
  </header>
  <div class="entry-content">
    <p>Hello Folks.
This is just a quick post on the topic and a reminder for myself and everybody to ALWAYS USE []BYTE INSTEAD OF STRINGS.
[]Byte is marginally faster than a simple Strings. In fact, I would say using []byte should be the standard instead of strings.
Sample code:
package solutions import &#34;fmt&#34; const ( //INPUT input INPUT = &#34;1321131112&#34; //LIMIT limit LIMIT = 50 ) //LookAndSay translates numbers according to Look and Say algo func LookAndSay(s string, c chan string) { charCount := 1 look := &#34;&#34; for i := range s { if i&#43;1 &lt; len(s) { if s[i] == s[i&#43;1] { charCount&#43;&#43; } else { look &#43;= fmt.Sprintf(&#34;%d%s&#34;, charCount, string(s[i])) charCount = 1 } } else { look &#43;= fmt.Sprintf(&#34;%d%s&#34;, charCount, string(s[i])) } } c &lt;- look } //GetLengthOfLookAndSay Retrieve the Length of a lookandsay done Limit times func GetLengthOfLookAndSay() { c := make(chan string, 0) go LookAndSay(INPUT, c) finalString := &lt;-c for i := 0; i &lt;= LIMIT-2; i&#43;&#43; { go LookAndSay(finalString, c) finalString = &lt;-c // fmt.Println(finalString) } fmt.Println(&#34;Lenght of final String:&#34;, len(finalString)) } This, with the limit raised to 50 run for ~1 hour. Even with the routines although they were just for show since they had to wait for each others input.
...</p>
  </div>
  <footer class="entry-footer"><span title='2015-12-29 00:00:00 +0000 UTC'>December 29, 2015</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;hannibal</footer>
  <a class="entry-link" aria-label="post link to Use Byte Array Instead of Strings" href="https://skarlso.github.io/2015/12/29/use-byte-array-instead-of-strings/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://skarlso.github.io/categories/go/page/2/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="https://skarlso.github.io/categories/go/page/4/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://skarlso.github.io/">Ramblings of a cloud engineer</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
