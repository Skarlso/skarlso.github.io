<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>programming &middot; Ramblings of a cloud engineer</title>

    <meta name="description" content="Ramblings of a Cloud Engineer">

    <meta name="generator" content="Hugo 0.54-DEV" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="programming &middot; Ramblings of a cloud engineer">
    <meta name="twitter:description" content="Ramblings of a Cloud Engineer">

    <meta property="og:type" content="article">
    <meta property="og:title" content="programming &middot; Ramblings of a cloud engineer">
    <meta property="og:description" content="Ramblings of a Cloud Engineer">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">

    <link rel="stylesheet" href="https://skarlso.github.io//css/all.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Ramblings of a cloud engineer" href="https://skarlso.github.io//index.xml" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="https://skarlso.github.io/">Ramblings of a cloud engineer</a></h1>
            <h2 class="brand-tagline"> Ramblings of a Cloud Engineer </h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://skarlso.github.io//index.xml"><i class="fa fa-rss"></i> rss</a>
                </li></br>
                <div style="box-shadow: 0px 0px 0px 1px #000; overflow-y: scroll; height:250px;" align="left">
                    
                        <a href="https://skarlso.github.io/2015/11/20/go-jira-api-client/">Go JIRA API client</a></br>
                    
                        <a href="https://skarlso.github.io/2015/11/20/go-jira-api-client/">Go JIRA API client</a></br>
                    
                        <a href="https://skarlso.github.io/2015/11/15/the-one-hundred-day-github-challenge/">The One Hundred Day GitHub Challenge</a></br>
                    
                        <a href="https://skarlso.github.io/2015/11/15/the-one-hundred-day-github-challenge/">The One Hundred Day GitHub Challenge</a></br>
                    
                        <a href="https://skarlso.github.io/2015/11/09/go-progress-quest/">Go Progress Quest</a></br>
                    
                        <a href="https://skarlso.github.io/2015/11/09/go-progress-quest/">Go Progress Quest</a></br>
                    
                        <a href="https://skarlso.github.io/2015/10/15/circular-buffer-in-go/">Circular buffer in Go</a></br>
                    
                        <a href="https://skarlso.github.io/2015/10/15/circular-buffer-in-go/">Circular buffer in Go</a></br>
                    
                        <a href="https://skarlso.github.io/2015/10/15/jenkins-job-dsl-and-groovy-goodness/">Jenkins Job DSL and Groovy goodness</a></br>
                    
                        <a href="https://skarlso.github.io/2015/10/15/jenkins-job-dsl-and-groovy-goodness/">Jenkins Job DSL and Groovy goodness</a></br>
                    
                        <a href="https://skarlso.github.io/2015/10/04/datamunger-kata-with-go/">DataMunger Kata with Go</a></br>
                    
                        <a href="https://skarlso.github.io/2015/10/04/datamunger-kata-with-go/">DataMunger Kata with Go</a></br>
                    
                        <a href="https://skarlso.github.io/2015/07/30/sieve-of-eratosthenes-in-go/">Sieve of Eratosthenes in Go</a></br>
                    
                        <a href="https://skarlso.github.io/2015/07/30/sieve-of-eratosthenes-in-go/">Sieve of Eratosthenes in Go</a></br>
                    
                        <a href="https://skarlso.github.io/2015/07/19/converting-numbers-into-string-representations/">Converting numbers into string representations</a></br>
                    
                        <a href="https://skarlso.github.io/2015/07/19/converting-numbers-into-string-representations/">Converting numbers into string representations</a></br>
                    
                        <a href="https://skarlso.github.io/2015/07/15/bitwise-operator/">Bitwise &amp; Operator</a></br>
                    
                        <a href="https://skarlso.github.io/2015/07/15/bitwise-operator/">Bitwise &amp; Operator</a></br>
                    
                        <a href="https://skarlso.github.io/2015/04/21/django-rpg-part-3/">Django – RPG – Part 3</a></br>
                    
                        <a href="https://skarlso.github.io/2015/04/21/django-rpg-part-3/">Django – RPG – Part 3</a></br>
                    
                        <a href="https://skarlso.github.io/2015/04/12/django-rpg-part-2/">Django – RPG – Part 2</a></br>
                    
                        <a href="https://skarlso.github.io/2015/04/12/django-rpg-part-2/">Django – RPG – Part 2</a></br>
                    
                        <a href="https://skarlso.github.io/2015/04/10/django-rpg-2/">Django – RPG – Part 1</a></br>
                    
                        <a href="https://skarlso.github.io/2015/04/10/django-rpg-2/">Django – RPG – Part 1</a></br>
                    
                        <a href="https://skarlso.github.io/2015/04/10/small-python-gui-to-calculate-lever-distance/">Small Python GUI to Calculate Lever Distance</a></br>
                    
                        <a href="https://skarlso.github.io/2015/04/10/small-python-gui-to-calculate-lever-distance/">Small Python GUI to Calculate Lever Distance</a></br>
                    
                        <a href="https://skarlso.github.io/2015/03/15/python-and-my-math-commitment/">Python and my Math commitment</a></br>
                    
                        <a href="https://skarlso.github.io/2015/03/15/python-and-my-math-commitment/">Python and my Math commitment</a></br>
                    
                        <a href="https://skarlso.github.io/2015/03/02/sphere-judge-online-python-kivy-android-app-part-2/">Sphere Judge Online – Python Kivy Android app – Part 2</a></br>
                    
                        <a href="https://skarlso.github.io/2015/03/02/sphere-judge-online-python-kivy-android-app-part-2/">Sphere Judge Online – Python Kivy Android app – Part 2</a></br>
                    
                        <a href="https://skarlso.github.io/2015/02/26/sphere-judge-online-python-kivy-android-app/">Sphere Judge Online – Python Kivy Android app</a></br>
                    
                        <a href="https://skarlso.github.io/2015/02/26/sphere-judge-online-python-kivy-android-app/">Sphere Judge Online – Python Kivy Android app</a></br>
                    
                        <a href="https://skarlso.github.io/2015/02/01/building-an-rpg-app-with-meteor-part-one-the-struggle/">Building an RPG App with Meteor – Part One – The struggle</a></br>
                    
                        <a href="https://skarlso.github.io/2015/02/01/building-an-rpg-app-with-meteor-part-one-the-struggle/">Building an RPG App with Meteor – Part One – The struggle</a></br>
                    
                        <a href="https://skarlso.github.io/2015/01/29/javascript-web-framework-meteor/">JavaScript Web Framework – Meteor</a></br>
                    
                        <a href="https://skarlso.github.io/2015/01/29/javascript-web-framework-meteor/">JavaScript Web Framework – Meteor</a></br>
                    
                        <a href="https://skarlso.github.io/2014/11/15/why-the-expressiveness-of-your-tests-is-important-part-one/">Why the expressiveness of your Tests is important – Part One</a></br>
                    
                        <a href="https://skarlso.github.io/2014/11/15/why-the-expressiveness-of-your-tests-is-important-part-one/">Why the expressiveness of your Tests is important – Part One</a></br>
                    
                        <a href="https://skarlso.github.io/2014/08/25/python-course-review/">Python Course Review</a></br>
                    
                        <a href="https://skarlso.github.io/2014/08/25/python-course-review/">Python Course Review</a></br>
                    
                        <a href="https://skarlso.github.io/2014/05/31/five-reasons-why-a-tester-should-learn-sql/">Five reasons why a tester should learn SQL</a></br>
                    
                        <a href="https://skarlso.github.io/2014/05/31/five-reasons-why-a-tester-should-learn-sql/">Five reasons why a tester should learn SQL</a></br>
                    
                        <a href="https://skarlso.github.io/2014/05/26/tdd-is-dead-not-really/">TDD is Dead – Not really</a></br>
                    
                        <a href="https://skarlso.github.io/2014/05/26/tdd-is-dead-not-really/">TDD is Dead – Not really</a></br>
                    
                        <a href="https://skarlso.github.io/2014/05/23/five-reasons-why-a-front-end-tester-should-learn-javascript/">Five reasons why a front-end tester should learn Javascript</a></br>
                    
                        <a href="https://skarlso.github.io/2014/05/23/five-reasons-why-a-front-end-tester-should-learn-javascript/">Five reasons why a front-end tester should learn Javascript</a></br>
                    
                        <a href="https://skarlso.github.io/2014/05/18/using-chrome-search-engine-multiple-search-params/">Using Chrome Search Engine – Multiple Search Params</a></br>
                    
                        <a href="https://skarlso.github.io/2014/05/18/using-chrome-search-engine-multiple-search-params/">Using Chrome Search Engine – Multiple Search Params</a></br>
                    
                        <a href="https://skarlso.github.io/2014/02/19/example-when-to-use-the-strategy-pattern/">Example when to use the Strategy Pattern</a></br>
                    
                        <a href="https://skarlso.github.io/2014/02/19/example-when-to-use-the-strategy-pattern/">Example when to use the Strategy Pattern</a></br>
                    
                        <a href="https://skarlso.github.io/2014/02/11/how-to-check-content-header-on-unknown-number-of-items-python/">How to check content header on unknown number of items – Python</a></br>
                    
                        <a href="https://skarlso.github.io/2014/02/11/how-to-check-content-header-on-unknown-number-of-items-python/">How to check content header on unknown number of items – Python</a></br>
                    
                        <a href="https://skarlso.github.io/2013/11/02/why-you-should-care-about-the-quality-of-your-test-code/">Why you should care about the quality of your test code</a></br>
                    
                        <a href="https://skarlso.github.io/2013/11/02/why-you-should-care-about-the-quality-of-your-test-code/">Why you should care about the quality of your test code</a></br>
                    
                        <a href="https://skarlso.github.io/2013/04/15/cucumber-test-name-and-tags-on-feature/">Cucumber Test Name and Tags on Feature</a></br>
                    
                        <a href="https://skarlso.github.io/2013/04/15/cucumber-test-name-and-tags-on-feature/">Cucumber Test Name and Tags on Feature</a></br>
                    
                        <a href="https://skarlso.github.io/2013/04/11/groovy-and-grails-course-summary/">Groovy and Grails course summary</a></br>
                    
                        <a href="https://skarlso.github.io/2013/04/11/groovy-and-grails-course-summary/">Groovy and Grails course summary</a></br>
                    
                        <a href="https://skarlso.github.io/2013/01/21/what-you-really-need-to-become-a-testing-expert/">What you really need to know to become a Testing Expert</a></br>
                    
                        <a href="https://skarlso.github.io/2013/01/21/what-you-really-need-to-become-a-testing-expert/">What you really need to know to become a Testing Expert</a></br>
                    
                        <a href="https://skarlso.github.io/2012/10/09/how-to-eliminate-a-parameter-boom/">How to eliminate a parameter boom</a></br>
                    
                        <a href="https://skarlso.github.io/2012/10/09/how-to-eliminate-a-parameter-boom/">How to eliminate a parameter boom</a></br>
                    
                        <a href="https://skarlso.github.io/2012/09/30/89/">Coderetreat London</a></br>
                    
                        <a href="https://skarlso.github.io/2012/09/30/89/">Coderetreat London</a></br>
                    
                        <a href="https://skarlso.github.io/2012/09/09/learning-programming-with-a-visual-mind/">Learning programming with a visual mind</a></br>
                    
                        <a href="https://skarlso.github.io/2012/09/09/learning-programming-with-a-visual-mind/">Learning programming with a visual mind</a></br>
                    
                        <a href="https://skarlso.github.io/2012/06/28/journey-into-an-unknown-system/">Journey into an unknown system</a></br>
                    
                        <a href="https://skarlso.github.io/2012/06/28/journey-into-an-unknown-system/">Journey into an unknown system</a></br>
                    
                        <a href="https://skarlso.github.io/2012/06/26/solution-to-wrap-kata/">Solution to Wrap Kata</a></br>
                    
                        <a href="https://skarlso.github.io/2012/06/26/solution-to-wrap-kata/">Solution to Wrap Kata</a></br>
                    
                        <a href="https://skarlso.github.io/2012/06/13/dont-throw-exception/">Don’t throw Exception</a></br>
                    
                        <a href="https://skarlso.github.io/2012/06/13/dont-throw-exception/">Don’t throw Exception</a></br>
                    
                        <a href="https://skarlso.github.io/2012/06/13/making-your-code-understandable/">Making your code understandable</a></br>
                    
                        <a href="https://skarlso.github.io/2012/06/13/making-your-code-understandable/">Making your code understandable</a></br>
                    
                        <a href="https://skarlso.github.io/2012/03/04/jms-connection-setup-and-framework/">JMS Connection setup and Framework</a></br>
                    
                        <a href="https://skarlso.github.io/2012/03/04/jms-connection-setup-and-framework/">JMS Connection setup and Framework</a></br>
                    
                        <a href="https://skarlso.github.io/2012/02/27/configuration/">Configuration</a></br>
                    
                        <a href="https://skarlso.github.io/2012/02/27/configuration/">Configuration</a></br>
                    
                        <a href="https://skarlso.github.io/2012/02/26/testing-code-tag/">Testing ‘code’ tag.</a></br>
                    
                        <a href="https://skarlso.github.io/2012/02/26/testing-code-tag/">Testing ‘code’ tag.</a></br>
                    
                </div>
            </ul>
        </nav>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                <h1 class="content-subhead">12 Apr 2015, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2015/04/12/django-rpg-part-2/" class="post-title">Django – RPG – Part 2</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-Python" href="https://skarlso.github.io//categories/python">Python</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Hello.</p>

<p>Continuing where we left off with the Django RPG project. Next up is implementing a rudimentary registration and adding the ability to create a character. Maybe even, design the database through django&#8217;s modelling.</p>

<p>Since we are using Django&#8217;s very own authentication model, I think we are covered in terms of users. Let&#8217;s add two things for now. An Index page, where there is a link to login and a link to registration.</p>

<p>Adding the index first. Later I would like to switch to a base template model, but for now, I created a simple index.html page. That only contains the two links to the two views. The views are a simple function call in the views.py too which the URLConfig will later point to.</p>

<p>For now, the index function looks like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> index<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span>:
    title <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"My RPG"</span>
    <span style="color: #ff7700;font-weight:bold;">return</span> render_to_response<span style="color: black;">&#40;</span><span style="color: #483d8b;">'index.html'</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">'title'</span>:title<span style="color: black;">&#125;</span><span style="color: black;">&#41;</span>
myrpg/rpg/views.<span style="color: black;">py</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Note, that the title here is utterly unimportant but because I want to switch to a base.html template I&#8217;ll leave it here for later usage.</p>

<p>That concludes the index. Now, let&#8217;s create the registration. That is a little more complex, but still rather easy. We are just checking of the user already exists or not, if so, display and error, if not, create the user.</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> registration<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span>:
    state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Please register."</span>
    username <span style="color: #66cc66;">=</span> password <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">email</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">''</span>
    <span style="color: #ff7700;font-weight:bold;">if</span> request.<span style="color: black;">POST</span>:
        username <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'username'</span><span style="color: black;">&#41;</span>
        <span style="color: #dc143c;">email</span> <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'email'</span><span style="color: black;">&#41;</span>
        password <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'password'</span><span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">if</span> User.<span style="color: black;">objects</span>.<span style="color: #008000;">filter</span><span style="color: black;">&#40;</span>username <span style="color: #66cc66;">=</span> username<span style="color: black;">&#41;</span>.<span style="color: black;">exists</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
            <span style="color: #808080; font-style: italic;"># raise forms.ValidationError("Username %s is already in use." % username)</span>
            state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Username %s is already in use. Please try another."</span> % username
        <span style="color: #ff7700;font-weight:bold;">else</span>:
            <span style="color: #ff7700;font-weight:bold;">try</span>:
                <span style="color: #dc143c;">user</span> <span style="color: #66cc66;">=</span> User.<span style="color: black;">objects</span>.<span style="color: black;">create_user</span><span style="color: black;">&#40;</span>username <span style="color: #66cc66;">=</span> username<span style="color: #66cc66;">,</span> <span style="color: #dc143c;">email</span> <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">email</span><span style="color: #66cc66;">,</span> password <span style="color: #66cc66;">=</span> password<span style="color: black;">&#41;</span>
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Thank you for registering with us %s!"</span> % <span style="color: #dc143c;">user</span>.<span style="color: black;">username</span> 
            <span style="color: #ff7700;font-weight:bold;">except</span>:
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Unexpected error occured: %s"</span> % <span style="color: #dc143c;">sys</span>.<span style="color: black;">exc_info</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;"></span><span style="color: black;">&#93;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">return</span> render_to_response<span style="color: black;">&#40;</span><span style="color: #483d8b;">'registration.html'</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">'state'</span>: state<span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span> context_instance <span style="color: #66cc66;">=</span> RequestContext<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
myrpg/rpg/views.<span style="color: black;">py</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Here, I&#8217;m checking to see of the username already exists with the filter. This is by using Django&#8217;s model which models the database like hibernate. It&#8217;s a simple query. And I&#8217;m doing this, because this is faster than raising an exception. Later on, I&#8217;ll be switching to a validation framework and django&#8217;s own auth view. Because, why not.</p>

<p>The URL conf looks like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">conf</span>.<span style="color: black;">urls</span> <span style="color: #ff7700;font-weight:bold;">import</span> url
&nbsp;
<span style="color: #ff7700;font-weight:bold;">from</span> . <span style="color: #ff7700;font-weight:bold;">import</span> views
&nbsp;
urlpatterns <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span>
    url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^$'</span><span style="color: #66cc66;">,</span> views.<span style="color: black;">index</span><span style="color: #66cc66;">,</span> name<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'index'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
    url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^login/$'</span><span style="color: #66cc66;">,</span> views.<span style="color: black;">login_user</span><span style="color: #66cc66;">,</span> name<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'login'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
    url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^registration/$'</span><span style="color: #66cc66;">,</span> views.<span style="color: black;">registration</span><span style="color: #66cc66;">,</span> name<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'registration'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
<span style="color: black;">&#93;</span>
myrpg/rpg/urls.<span style="color: black;">py</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>And this now, resides in a file under the RPG app and not the main one. The main one includes this one, like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">conf</span>.<span style="color: black;">urls</span> <span style="color: #ff7700;font-weight:bold;">import</span> include<span style="color: #66cc66;">,</span> url
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">contrib</span> <span style="color: #ff7700;font-weight:bold;">import</span> admin
&nbsp;
urlpatterns <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span>
    <span style="color: #808080; font-style: italic;"># Examples:</span>
    <span style="color: #808080; font-style: italic;"># url(r'^$', 'myrpg.views.home', name='home'),</span>
    <span style="color: #808080; font-style: italic;"># url(r'^blog/', include('blog.urls')),</span>
&nbsp;
    url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^admin/'</span><span style="color: #66cc66;">,</span> include<span style="color: black;">&#40;</span>admin.<span style="color: #dc143c;">site</span>.<span style="color: black;">urls</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
    url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^rpg/'</span><span style="color: #66cc66;">,</span> include<span style="color: black;">&#40;</span><span style="color: #483d8b;">'rpg.urls'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
<span style="color: black;">&#93;</span>
myrpg/urls.<span style="color: black;">py</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>That&#8217;s it for now. As always, you can check out the code under github.</p>

<p>Tune in next time, when I&#8217;ll attempt to create a view to create a Character for a logged in user and link it to the user. I&#8217;ll do this with django&#8217;s model framework.</p>

<p>Thanks for reading,</p>

<p>Gergely.</p>
                    </div>
                </section>
                
                <h1 class="content-subhead">12 Apr 2015, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2015/04/12/django-rpg-part-2/" class="post-title">Django – RPG – Part 2</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-Python" href="https://skarlso.github.io//categories/python">Python</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Hello.</p>

<p>Continuing where we left off with the Django RPG project. Next up is implementing a rudimentary registration and adding the ability to create a character. Maybe even, design the database through django&#8217;s modelling.</p>

<p>Since we are using Django&#8217;s very own authentication model, I think we are covered in terms of users. Let&#8217;s add two things for now. An Index page, where there is a link to login and a link to registration.</p>

<p>Adding the index first. Later I would like to switch to a base template model, but for now, I created a simple index.html page. That only contains the two links to the two views. The views are a simple function call in the views.py too which the URLConfig will later point to.</p>

<p>For now, the index function looks like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> index<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span>:
    title <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"My RPG"</span>
    <span style="color: #ff7700;font-weight:bold;">return</span> render_to_response<span style="color: black;">&#40;</span><span style="color: #483d8b;">'index.html'</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">'title'</span>:title<span style="color: black;">&#125;</span><span style="color: black;">&#41;</span>
myrpg/rpg/views.<span style="color: black;">py</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Note, that the title here is utterly unimportant but because I want to switch to a base.html template I&#8217;ll leave it here for later usage.</p>

<p>That concludes the index. Now, let&#8217;s create the registration. That is a little more complex, but still rather easy. We are just checking of the user already exists or not, if so, display and error, if not, create the user.</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">def</span> registration<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span>:
    state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Please register."</span>
    username <span style="color: #66cc66;">=</span> password <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">email</span> <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">''</span>
    <span style="color: #ff7700;font-weight:bold;">if</span> request.<span style="color: black;">POST</span>:
        username <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'username'</span><span style="color: black;">&#41;</span>
        <span style="color: #dc143c;">email</span> <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'email'</span><span style="color: black;">&#41;</span>
        password <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'password'</span><span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">if</span> User.<span style="color: black;">objects</span>.<span style="color: #008000;">filter</span><span style="color: black;">&#40;</span>username <span style="color: #66cc66;">=</span> username<span style="color: black;">&#41;</span>.<span style="color: black;">exists</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>:
            <span style="color: #808080; font-style: italic;"># raise forms.ValidationError("Username %s is already in use." % username)</span>
            state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Username %s is already in use. Please try another."</span> % username
        <span style="color: #ff7700;font-weight:bold;">else</span>:
            <span style="color: #ff7700;font-weight:bold;">try</span>:
                <span style="color: #dc143c;">user</span> <span style="color: #66cc66;">=</span> User.<span style="color: black;">objects</span>.<span style="color: black;">create_user</span><span style="color: black;">&#40;</span>username <span style="color: #66cc66;">=</span> username<span style="color: #66cc66;">,</span> <span style="color: #dc143c;">email</span> <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">email</span><span style="color: #66cc66;">,</span> password <span style="color: #66cc66;">=</span> password<span style="color: black;">&#41;</span>
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Thank you for registering with us %s!"</span> % <span style="color: #dc143c;">user</span>.<span style="color: black;">username</span> 
            <span style="color: #ff7700;font-weight:bold;">except</span>:
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Unexpected error occured: %s"</span> % <span style="color: #dc143c;">sys</span>.<span style="color: black;">exc_info</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;"></span><span style="color: black;">&#93;</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">return</span> render_to_response<span style="color: black;">&#40;</span><span style="color: #483d8b;">'registration.html'</span><span style="color: #66cc66;">,</span> <span style="color: black;">&#123;</span><span style="color: #483d8b;">'state'</span>: state<span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span> context_instance <span style="color: #66cc66;">=</span> RequestContext<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
myrpg/rpg/views.<span style="color: black;">py</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Here, I&#8217;m checking to see of the username already exists with the filter. This is by using Django&#8217;s model which models the database like hibernate. It&#8217;s a simple query. And I&#8217;m doing this, because this is faster than raising an exception. Later on, I&#8217;ll be switching to a validation framework and django&#8217;s own auth view. Because, why not.</p>

<p>The URL conf looks like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">conf</span>.<span style="color: black;">urls</span> <span style="color: #ff7700;font-weight:bold;">import</span> url
&nbsp;
<span style="color: #ff7700;font-weight:bold;">from</span> . <span style="color: #ff7700;font-weight:bold;">import</span> views
&nbsp;
urlpatterns <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span>
    url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^$'</span><span style="color: #66cc66;">,</span> views.<span style="color: black;">index</span><span style="color: #66cc66;">,</span> name<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'index'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
    url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^login/$'</span><span style="color: #66cc66;">,</span> views.<span style="color: black;">login_user</span><span style="color: #66cc66;">,</span> name<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'login'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
    url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^registration/$'</span><span style="color: #66cc66;">,</span> views.<span style="color: black;">registration</span><span style="color: #66cc66;">,</span> name<span style="color: #66cc66;">=</span><span style="color: #483d8b;">'registration'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
<span style="color: black;">&#93;</span>
myrpg/rpg/urls.<span style="color: black;">py</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>And this now, resides in a file under the RPG app and not the main one. The main one includes this one, like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">conf</span>.<span style="color: black;">urls</span> <span style="color: #ff7700;font-weight:bold;">import</span> include<span style="color: #66cc66;">,</span> url
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">contrib</span> <span style="color: #ff7700;font-weight:bold;">import</span> admin
&nbsp;
urlpatterns <span style="color: #66cc66;">=</span> <span style="color: black;">&#91;</span>
    <span style="color: #808080; font-style: italic;"># Examples:</span>
    <span style="color: #808080; font-style: italic;"># url(r'^$', 'myrpg.views.home', name='home'),</span>
    <span style="color: #808080; font-style: italic;"># url(r'^blog/', include('blog.urls')),</span>
&nbsp;
    url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^admin/'</span><span style="color: #66cc66;">,</span> include<span style="color: black;">&#40;</span>admin.<span style="color: #dc143c;">site</span>.<span style="color: black;">urls</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
    url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^rpg/'</span><span style="color: #66cc66;">,</span> include<span style="color: black;">&#40;</span><span style="color: #483d8b;">'rpg.urls'</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span>
<span style="color: black;">&#93;</span>
myrpg/urls.<span style="color: black;">py</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>That&#8217;s it for now. As always, you can check out the code under github.</p>

<p>Tune in next time, when I&#8217;ll attempt to create a view to create a Character for a logged in user and link it to the user. I&#8217;ll do this with django&#8217;s model framework.</p>

<p>Thanks for reading,</p>

<p>Gergely.</p>
                    </div>
                </section>
                
                <h1 class="content-subhead">10 Apr 2015, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2015/04/10/django-rpg-2/" class="post-title">Django – RPG – Part 1</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-Python" href="https://skarlso.github.io//categories/python">Python</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Hi folks.</p>

<p>So last time, we tried to implement a little RPG of mine using Meteor, which failed miserably. This time we are going to try and use Django. Let&#8217;s have at it, shall we?</p>

<p>If you don&#8217;t know what django is (than you are probably not reading this blog entry anyways&#8230; ), have a look =&gt; <a href="https://www.djangoproject.com/" target="_blank">Link</a>. It&#8217;s a Python Web Framework.</p>

<h1 id="in-the-beginning">In the beginning</h1>

<p>So here we are again. I&#8217;m starting off by creating the skeleton for my RPG. First, the welcome page with a tiny login capability. Which means session tracking. For now, on the same page.</p>

<p>To create the skeleton I just run this little command:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">django-admin.py startproject myrpg</pre>
      </td>
    </tr>
  </table>
</div>

<p>Easy enough, right? Basic directory structure is created. You can read that in django&#8217;s own documentation: <a href="https://docs.djangoproject.com/en/1.8/intro/tutorial01/" target="_blank"><a href="https://docs.djangoproject.com/en/1.8/intro/tutorial01/">https://docs.djangoproject.com/en/1.8/intro/tutorial01/</a></a></p>

<p>I&#8217;m using Sublime Text 3 to build this app. I was thinking of pycharm, but that would take away too much fun.</p>

<p>By default Django uses SQLlite and I&#8217;m okay with that.</p>

<p>The basics are there. Let&#8217;s move to higher ground. The next step can be to design the login page. I&#8217;m not much of a designer so I&#8217;ll leave that part to people who care more / understand it better. I&#8217;m only looking for a simple Login with a username and a password. Nothing fancy. And I&#8217;m going to use Django&#8217;s auth system for users: <tt class="xref py py-mod docutils literal"><span class="pre"><a class="reference internal" title="django.contrib.auth: Django's authentication framework." href="https://docs.djangoproject.com/en/1.8/topics/auth/#module-django.contrib.auth" target="_blank">django.contrib.auth</a>.</span></tt></p>

<p>It&#8217;s pretty good, has lots of features and can auth a user pretty quickly given a username and password, which is all I want for now.</p>

<p>I running a migrate command to create all the necessary tables and data:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">python manage.<span style="color: black;">py</span> migrate</pre>
      </td>
    </tr>
  </table>
</div>

<p>A quick check with sqlite3 and running <strong>.schema </strong>showed me that the tables are indeed created and filled with default data for all the <strong>INSTALLED_APPS </strong>django has at the moment.</p>

<p>I did a quick check with <em>python manage.py runserver</em> and everything seems to work fine.</p>

<h1 id="the-rpg-app">The RPG App</h1>

<p>So, that concludes the setup. Following the tutorial, django has this notion of apps and projects. In short, a project is a set of configurations and applications which forms a website. Hence, I&#8217;m going to create an RPG APP for now. The tutorial continues with a Poll type of App, but I&#8217;m sure I can apply the same things to a login page.</p>

<p>First, let&#8217;s create the App using the command:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">python manage.<span style="color: black;">py</span> startapp rpg</pre>
      </td>
    </tr>
  </table>
</div>

<p>That creates the skeleton for the app. The tutorial then suggests to define the database first. Which I think is a bad idea; usually when doing design, you don&#8217;t want to start with the database model. But for now, I shall comply. We want a login page and we are using the auth module, which means, for now, I don&#8217;t care about the database. Skip.</p>

<p>I&#8217;m going to go off corse for now, since I only want to create a basic login. For that, I have to read up on views and models a little bit in order to create a simple login page. Be right back&#8230;</p>

<p>I&#8217;m fighting the basic auth system at the moment. Everything seems to be working fine. In the Admin screen I was able to add a basic user to do some debugging, but for now, the login seems to not work with this error:</p>

<p><strong><span style="color: #ff6600;">CSRF verification failed. Request aborted.</span></strong></p>

<p>This is the CSRF protection which came out with Django. I did a bit of more document reading and setup the CSRF as was described here:</p>

<p><a href="https://docs.djangoproject.com/en/1.8/ref/csrf/" target="_blank"><a href="https://docs.djangoproject.com/en/1.8/ref/csrf/">https://docs.djangoproject.com/en/1.8/ref/csrf/</a></a></p>

<p>However, I&#8217;m still facing the same problem. Let&#8217;s research further&#8230; Ahh yes. I wasn&#8217;t returning the request context I&#8217;ve set up. Before:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">shortcuts</span> <span style="color: #ff7700;font-weight:bold;">import</span> render_to_response
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">contrib</span>.<span style="color: black;">auth</span> <span style="color: #ff7700;font-weight:bold;">import</span> authenticate<span style="color: #66cc66;">,</span> login
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">template</span>.<span style="color: black;">context_processors</span> <span style="color: #ff7700;font-weight:bold;">import</span> csrf
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> login_user<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span>:
    c <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span>
    c.<span style="color: black;">update</span><span style="color: black;">&#40;</span>csrf<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
    state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Please log in below..."</span>
    username <span style="color: #66cc66;">=</span> password <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">''</span>
    <span style="color: #ff7700;font-weight:bold;">if</span> request.<span style="color: black;">POST</span>:
        username <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'username'</span><span style="color: black;">&#41;</span>
        password <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'password'</span><span style="color: black;">&#41;</span>
&nbsp;
        <span style="color: #dc143c;">user</span> <span style="color: #66cc66;">=</span> authenticate<span style="color: black;">&#40;</span>username<span style="color: #66cc66;">=</span>username<span style="color: #66cc66;">,</span> password<span style="color: #66cc66;">=</span>password<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #dc143c;">user</span> <span style="color: #ff7700;font-weight:bold;">is</span> <span style="color: #ff7700;font-weight:bold;">not</span> <span style="color: #008000;">None</span>:
            <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #dc143c;">user</span>.<span style="color: black;">is_active</span>:
                login<span style="color: black;">&#40;</span>request<span style="color: #66cc66;">,</span> <span style="color: #dc143c;">user</span><span style="color: black;">&#41;</span>
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"You're successfully logged in!"</span>
            <span style="color: #ff7700;font-weight:bold;">else</span>:
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Your account is not active, please contact the site admin."</span>
        <span style="color: #ff7700;font-weight:bold;">else</span>:
            state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Your username and/or password were incorrect."</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">return</span> render_to_response<span style="color: black;">&#40;</span><span style="color: #483d8b;">'auth.html'</span><span style="color: #66cc66;">,</span><span style="color: black;">&#123;</span><span style="color: #483d8b;">'state'</span>:state<span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'username'</span>: username<span style="color: black;">&#125;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>After:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">shortcuts</span> <span style="color: #ff7700;font-weight:bold;">import</span> render_to_response
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">contrib</span>.<span style="color: black;">auth</span> <span style="color: #ff7700;font-weight:bold;">import</span> authenticate<span style="color: #66cc66;">,</span> login
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">template</span>.<span style="color: black;">context_processors</span> <span style="color: #ff7700;font-weight:bold;">import</span> csrf
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">template</span> <span style="color: #ff7700;font-weight:bold;">import</span> RequestContext
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> login_user<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span>:
    state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Please log in below..."</span>
    username <span style="color: #66cc66;">=</span> password <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">''</span>
    <span style="color: #ff7700;font-weight:bold;">if</span> request.<span style="color: black;">POST</span>:
        username <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'username'</span><span style="color: black;">&#41;</span>
        password <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'password'</span><span style="color: black;">&#41;</span>
&nbsp;
        <span style="color: #dc143c;">user</span> <span style="color: #66cc66;">=</span> authenticate<span style="color: black;">&#40;</span>username<span style="color: #66cc66;">=</span>username<span style="color: #66cc66;">,</span> password<span style="color: #66cc66;">=</span>password<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #dc143c;">user</span> <span style="color: #ff7700;font-weight:bold;">is</span> <span style="color: #ff7700;font-weight:bold;">not</span> <span style="color: #008000;">None</span>:
            <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #dc143c;">user</span>.<span style="color: black;">is_active</span>:
                login<span style="color: black;">&#40;</span>request<span style="color: #66cc66;">,</span> <span style="color: #dc143c;">user</span><span style="color: black;">&#41;</span>
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"You're successfully logged in!"</span>
            <span style="color: #ff7700;font-weight:bold;">else</span>:
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Your account is not active, please contact the site admin."</span>
        <span style="color: #ff7700;font-weight:bold;">else</span>:
            state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Your username and/or password were incorrect."</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">return</span> render_to_response<span style="color: black;">&#40;</span><span style="color: #483d8b;">'auth.html'</span><span style="color: #66cc66;">,</span><span style="color: black;">&#123;</span><span style="color: #483d8b;">'state'</span>:state<span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'username'</span>: username<span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span> context_instance<span style="color: #66cc66;">=</span>RequestContext<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Notice that now I&#8217;m returning the request context at the end when I&#8217;m rendering the response. And lo&#8217; and behold, my login is now working.</p>

<h1 id="progress-so-far">Progress so far</h1>

<p>&nbsp;</p>

<p>So, I&#8217;ve set up a user using the Admin portal accessible from the app / admin. Created my default rpg app, and added my default auth view into a template folder. Configured the URL setting in <strong>urls.py</strong> to look like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^login/$'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'rpg.views.login_user'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Very basic for now, but when I return to it, we are going to clean it up and then continue with implementing the main screen which will greet the user and display some stats about his/her character.</p>

<p>The whole code is under github here =&gt; <a href="https://github.com/Skarlso/myrpg" target="_blank"><a href="https://github.com/Skarlso/myrpg">https://github.com/Skarlso/myrpg</a></a></p>

<p>Bye for now,</p>

<p>And thanks for reading.</p>

<p>Gergely.</p>
                    </div>
                </section>
                
                <h1 class="content-subhead">10 Apr 2015, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2015/04/10/django-rpg-2/" class="post-title">Django – RPG – Part 1</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-Python" href="https://skarlso.github.io//categories/python">Python</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Hi folks.</p>

<p>So last time, we tried to implement a little RPG of mine using Meteor, which failed miserably. This time we are going to try and use Django. Let&#8217;s have at it, shall we?</p>

<p>If you don&#8217;t know what django is (than you are probably not reading this blog entry anyways&#8230; ), have a look =&gt; <a href="https://www.djangoproject.com/" target="_blank">Link</a>. It&#8217;s a Python Web Framework.</p>

<h1 id="in-the-beginning">In the beginning</h1>

<p>So here we are again. I&#8217;m starting off by creating the skeleton for my RPG. First, the welcome page with a tiny login capability. Which means session tracking. For now, on the same page.</p>

<p>To create the skeleton I just run this little command:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">django-admin.py startproject myrpg</pre>
      </td>
    </tr>
  </table>
</div>

<p>Easy enough, right? Basic directory structure is created. You can read that in django&#8217;s own documentation: <a href="https://docs.djangoproject.com/en/1.8/intro/tutorial01/" target="_blank"><a href="https://docs.djangoproject.com/en/1.8/intro/tutorial01/">https://docs.djangoproject.com/en/1.8/intro/tutorial01/</a></a></p>

<p>I&#8217;m using Sublime Text 3 to build this app. I was thinking of pycharm, but that would take away too much fun.</p>

<p>By default Django uses SQLlite and I&#8217;m okay with that.</p>

<p>The basics are there. Let&#8217;s move to higher ground. The next step can be to design the login page. I&#8217;m not much of a designer so I&#8217;ll leave that part to people who care more / understand it better. I&#8217;m only looking for a simple Login with a username and a password. Nothing fancy. And I&#8217;m going to use Django&#8217;s auth system for users: <tt class="xref py py-mod docutils literal"><span class="pre"><a class="reference internal" title="django.contrib.auth: Django's authentication framework." href="https://docs.djangoproject.com/en/1.8/topics/auth/#module-django.contrib.auth" target="_blank">django.contrib.auth</a>.</span></tt></p>

<p>It&#8217;s pretty good, has lots of features and can auth a user pretty quickly given a username and password, which is all I want for now.</p>

<p>I running a migrate command to create all the necessary tables and data:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">python manage.<span style="color: black;">py</span> migrate</pre>
      </td>
    </tr>
  </table>
</div>

<p>A quick check with sqlite3 and running <strong>.schema </strong>showed me that the tables are indeed created and filled with default data for all the <strong>INSTALLED_APPS </strong>django has at the moment.</p>

<p>I did a quick check with <em>python manage.py runserver</em> and everything seems to work fine.</p>

<h1 id="the-rpg-app">The RPG App</h1>

<p>So, that concludes the setup. Following the tutorial, django has this notion of apps and projects. In short, a project is a set of configurations and applications which forms a website. Hence, I&#8217;m going to create an RPG APP for now. The tutorial continues with a Poll type of App, but I&#8217;m sure I can apply the same things to a login page.</p>

<p>First, let&#8217;s create the App using the command:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">python manage.<span style="color: black;">py</span> startapp rpg</pre>
      </td>
    </tr>
  </table>
</div>

<p>That creates the skeleton for the app. The tutorial then suggests to define the database first. Which I think is a bad idea; usually when doing design, you don&#8217;t want to start with the database model. But for now, I shall comply. We want a login page and we are using the auth module, which means, for now, I don&#8217;t care about the database. Skip.</p>

<p>I&#8217;m going to go off corse for now, since I only want to create a basic login. For that, I have to read up on views and models a little bit in order to create a simple login page. Be right back&#8230;</p>

<p>I&#8217;m fighting the basic auth system at the moment. Everything seems to be working fine. In the Admin screen I was able to add a basic user to do some debugging, but for now, the login seems to not work with this error:</p>

<p><strong><span style="color: #ff6600;">CSRF verification failed. Request aborted.</span></strong></p>

<p>This is the CSRF protection which came out with Django. I did a bit of more document reading and setup the CSRF as was described here:</p>

<p><a href="https://docs.djangoproject.com/en/1.8/ref/csrf/" target="_blank"><a href="https://docs.djangoproject.com/en/1.8/ref/csrf/">https://docs.djangoproject.com/en/1.8/ref/csrf/</a></a></p>

<p>However, I&#8217;m still facing the same problem. Let&#8217;s research further&#8230; Ahh yes. I wasn&#8217;t returning the request context I&#8217;ve set up. Before:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">shortcuts</span> <span style="color: #ff7700;font-weight:bold;">import</span> render_to_response
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">contrib</span>.<span style="color: black;">auth</span> <span style="color: #ff7700;font-weight:bold;">import</span> authenticate<span style="color: #66cc66;">,</span> login
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">template</span>.<span style="color: black;">context_processors</span> <span style="color: #ff7700;font-weight:bold;">import</span> csrf
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> login_user<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span>:
    c <span style="color: #66cc66;">=</span> <span style="color: black;">&#123;</span><span style="color: black;">&#125;</span>
    c.<span style="color: black;">update</span><span style="color: black;">&#40;</span>csrf<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
    state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Please log in below..."</span>
    username <span style="color: #66cc66;">=</span> password <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">''</span>
    <span style="color: #ff7700;font-weight:bold;">if</span> request.<span style="color: black;">POST</span>:
        username <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'username'</span><span style="color: black;">&#41;</span>
        password <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'password'</span><span style="color: black;">&#41;</span>
&nbsp;
        <span style="color: #dc143c;">user</span> <span style="color: #66cc66;">=</span> authenticate<span style="color: black;">&#40;</span>username<span style="color: #66cc66;">=</span>username<span style="color: #66cc66;">,</span> password<span style="color: #66cc66;">=</span>password<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #dc143c;">user</span> <span style="color: #ff7700;font-weight:bold;">is</span> <span style="color: #ff7700;font-weight:bold;">not</span> <span style="color: #008000;">None</span>:
            <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #dc143c;">user</span>.<span style="color: black;">is_active</span>:
                login<span style="color: black;">&#40;</span>request<span style="color: #66cc66;">,</span> <span style="color: #dc143c;">user</span><span style="color: black;">&#41;</span>
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"You're successfully logged in!"</span>
            <span style="color: #ff7700;font-weight:bold;">else</span>:
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Your account is not active, please contact the site admin."</span>
        <span style="color: #ff7700;font-weight:bold;">else</span>:
            state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Your username and/or password were incorrect."</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">return</span> render_to_response<span style="color: black;">&#40;</span><span style="color: #483d8b;">'auth.html'</span><span style="color: #66cc66;">,</span><span style="color: black;">&#123;</span><span style="color: #483d8b;">'state'</span>:state<span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'username'</span>: username<span style="color: black;">&#125;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>After:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">shortcuts</span> <span style="color: #ff7700;font-weight:bold;">import</span> render_to_response
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">contrib</span>.<span style="color: black;">auth</span> <span style="color: #ff7700;font-weight:bold;">import</span> authenticate<span style="color: #66cc66;">,</span> login
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">template</span>.<span style="color: black;">context_processors</span> <span style="color: #ff7700;font-weight:bold;">import</span> csrf
<span style="color: #ff7700;font-weight:bold;">from</span> django.<span style="color: black;">template</span> <span style="color: #ff7700;font-weight:bold;">import</span> RequestContext
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> login_user<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span>:
    state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Please log in below..."</span>
    username <span style="color: #66cc66;">=</span> password <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">''</span>
    <span style="color: #ff7700;font-weight:bold;">if</span> request.<span style="color: black;">POST</span>:
        username <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'username'</span><span style="color: black;">&#41;</span>
        password <span style="color: #66cc66;">=</span> request.<span style="color: black;">POST</span>.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'password'</span><span style="color: black;">&#41;</span>
&nbsp;
        <span style="color: #dc143c;">user</span> <span style="color: #66cc66;">=</span> authenticate<span style="color: black;">&#40;</span>username<span style="color: #66cc66;">=</span>username<span style="color: #66cc66;">,</span> password<span style="color: #66cc66;">=</span>password<span style="color: black;">&#41;</span>
        <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #dc143c;">user</span> <span style="color: #ff7700;font-weight:bold;">is</span> <span style="color: #ff7700;font-weight:bold;">not</span> <span style="color: #008000;">None</span>:
            <span style="color: #ff7700;font-weight:bold;">if</span> <span style="color: #dc143c;">user</span>.<span style="color: black;">is_active</span>:
                login<span style="color: black;">&#40;</span>request<span style="color: #66cc66;">,</span> <span style="color: #dc143c;">user</span><span style="color: black;">&#41;</span>
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"You're successfully logged in!"</span>
            <span style="color: #ff7700;font-weight:bold;">else</span>:
                state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Your account is not active, please contact the site admin."</span>
        <span style="color: #ff7700;font-weight:bold;">else</span>:
            state <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">"Your username and/or password were incorrect."</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">return</span> render_to_response<span style="color: black;">&#40;</span><span style="color: #483d8b;">'auth.html'</span><span style="color: #66cc66;">,</span><span style="color: black;">&#123;</span><span style="color: #483d8b;">'state'</span>:state<span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'username'</span>: username<span style="color: black;">&#125;</span><span style="color: #66cc66;">,</span> context_instance<span style="color: #66cc66;">=</span>RequestContext<span style="color: black;">&#40;</span>request<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Notice that now I&#8217;m returning the request context at the end when I&#8217;m rendering the response. And lo&#8217; and behold, my login is now working.</p>

<h1 id="progress-so-far">Progress so far</h1>

<p>&nbsp;</p>

<p>So, I&#8217;ve set up a user using the Admin portal accessible from the app / admin. Created my default rpg app, and added my default auth view into a template folder. Configured the URL setting in <strong>urls.py</strong> to look like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">url<span style="color: black;">&#40;</span>r<span style="color: #483d8b;">'^login/$'</span><span style="color: #66cc66;">,</span> <span style="color: #483d8b;">'rpg.views.login_user'</span><span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Very basic for now, but when I return to it, we are going to clean it up and then continue with implementing the main screen which will greet the user and display some stats about his/her character.</p>

<p>The whole code is under github here =&gt; <a href="https://github.com/Skarlso/myrpg" target="_blank"><a href="https://github.com/Skarlso/myrpg">https://github.com/Skarlso/myrpg</a></a></p>

<p>Bye for now,</p>

<p>And thanks for reading.</p>

<p>Gergely.</p>
                    </div>
                </section>
                
                <h1 class="content-subhead">10 Apr 2015, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2015/04/10/small-python-gui-to-calculate-lever-distance/" class="post-title">Small Python GUI to Calculate Lever Distance</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-Python" href="https://skarlso.github.io//categories/python">Python</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Hi folks.</p>

<p>Just a small script which calculates your distance from a lever focal point if you know your weight, the object&#8217;s weight and the object&#8217;s and the distance the object has from the focal point of the lever.</p>

<p>Like this:</p>

<p>This script will give you D1. And this is how it will look like in doing so:</p>

<p>So, in order for me (77kg) to lift an object of 80kg which is on a, by default, 1 meter long lever, I have to stand back ~1.03meters. Which is totally cool, right?</p>

<p>Here is the code:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">Tkinter</span> <span style="color: #ff7700;font-weight:bold;">import</span> *
<span style="color: #ff7700;font-weight:bold;">import</span> ttk
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> calculate<span style="color: black;">&#40;</span>*args<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">try</span>:
        your_weight_value <span style="color: #66cc66;">=</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>your_weight.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
        object_weight_value <span style="color: #66cc66;">=</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>object_weight.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
        object_distance_value <span style="color: #66cc66;">=</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>object_distance.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
        your_distance.<span style="color: #008000;">set</span><span style="color: black;">&#40;</span><span style="color: black;">&#40;</span>object_weight_value * object_distance_value<span style="color: black;">&#41;</span> / your_weight_value<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">ValueError</span>:
        <span style="color: #ff7700;font-weight:bold;">pass</span>
&nbsp;
root <span style="color: #66cc66;">=</span> Tk<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
root.<span style="color: black;">title</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"Lever distance counter"</span><span style="color: black;">&#41;</span>
&nbsp;
mainframe <span style="color: #66cc66;">=</span> ttk.<span style="color: black;">Frame</span><span style="color: black;">&#40;</span>root<span style="color: #66cc66;">,</span> padding<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"4 4 12 12"</span><span style="color: black;">&#41;</span>
mainframe.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span><span style="color: black;">&#40;</span>N<span style="color: #66cc66;">,</span> W<span style="color: #66cc66;">,</span> E<span style="color: #66cc66;">,</span> S<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
mainframe.<span style="color: black;">columnconfigure</span><span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> weight<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span>
mainframe.<span style="color: black;">rowconfigure</span><span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> weight<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span>
&nbsp;
your_weight <span style="color: #66cc66;">=</span> StringVar<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
object_weight <span style="color: #66cc66;">=</span> StringVar<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
object_distance <span style="color: #66cc66;">=</span> StringVar<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
your_distance <span style="color: #66cc66;">=</span> StringVar<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
&nbsp;
object_distance.<span style="color: #008000;">set</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"1"</span><span style="color: black;">&#41;</span>
&nbsp;
your_weight_entry <span style="color: #66cc66;">=</span> ttk.<span style="color: black;">Entry</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> width<span style="color: #66cc66;">=</span><span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> textvariable<span style="color: #66cc66;">=</span>your_weight<span style="color: black;">&#41;</span>
your_weight_entry.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span><span style="color: black;">&#40;</span>W<span style="color: #66cc66;">,</span> E<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
object_weight_entry <span style="color: #66cc66;">=</span> ttk.<span style="color: black;">Entry</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> width<span style="color: #66cc66;">=</span><span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> textvariable<span style="color: #66cc66;">=</span>object_weight<span style="color: black;">&#41;</span>
object_weight_entry.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span><span style="color: black;">&#40;</span>W<span style="color: #66cc66;">,</span> E<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
object_distance_entry <span style="color: #66cc66;">=</span> ttk.<span style="color: black;">Entry</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> width<span style="color: #66cc66;">=</span><span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> textvariable<span style="color: #66cc66;">=</span>object_distance<span style="color: black;">&#41;</span>
object_distance_entry.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span><span style="color: black;">&#40;</span>W<span style="color: #66cc66;">,</span> E<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
&nbsp;
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> textvariable<span style="color: #66cc66;">=</span>your_distance<span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span><span style="color: black;">&#40;</span>W<span style="color: #66cc66;">,</span> E<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"Your weight"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"Object weight"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"Object Distance"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"Your Distance"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
&nbsp;
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"kg"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"kg"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"m"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"m"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
&nbsp;
ttk.<span style="color: black;">Button</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"Calculate"</span><span style="color: #66cc66;">,</span> command<span style="color: #66cc66;">=</span>calculate<span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">5</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">for</span> child <span style="color: #ff7700;font-weight:bold;">in</span> mainframe.<span style="color: black;">winfo_children</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>: child.<span style="color: black;">grid_configure</span><span style="color: black;">&#40;</span>padx<span style="color: #66cc66;">=</span><span style="color: #ff4500;">5</span><span style="color: #66cc66;">,</span> pady<span style="color: #66cc66;">=</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span>
&nbsp;
your_weight_entry.<span style="color: black;">focus</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
root.<span style="color: black;">bind</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">''</span><span style="color: #66cc66;">,</span> calculate<span style="color: black;">&#41;</span>
&nbsp;
root.<span style="color: black;">mainloop</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Please enjoy, and feel free to alter in any way. I&#8217;m using Tkinter and a grid layout which I find very easy to work with.</p>

<p>Thanks for reading,
Gergely.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">10 Apr 2015, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2015/04/10/small-python-gui-to-calculate-lever-distance/" class="post-title">Small Python GUI to Calculate Lever Distance</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-Python" href="https://skarlso.github.io//categories/python">Python</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Hi folks.</p>

<p>Just a small script which calculates your distance from a lever focal point if you know your weight, the object&#8217;s weight and the object&#8217;s and the distance the object has from the focal point of the lever.</p>

<p>Like this:</p>

<p>This script will give you D1. And this is how it will look like in doing so:</p>

<p>So, in order for me (77kg) to lift an object of 80kg which is on a, by default, 1 meter long lever, I have to stand back ~1.03meters. Which is totally cool, right?</p>

<p>Here is the code:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">Tkinter</span> <span style="color: #ff7700;font-weight:bold;">import</span> *
<span style="color: #ff7700;font-weight:bold;">import</span> ttk
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> calculate<span style="color: black;">&#40;</span>*args<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">try</span>:
        your_weight_value <span style="color: #66cc66;">=</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>your_weight.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
        object_weight_value <span style="color: #66cc66;">=</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>object_weight.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
        object_distance_value <span style="color: #66cc66;">=</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>object_distance.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
        your_distance.<span style="color: #008000;">set</span><span style="color: black;">&#40;</span><span style="color: black;">&#40;</span>object_weight_value * object_distance_value<span style="color: black;">&#41;</span> / your_weight_value<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">except</span> <span style="color: #008000;">ValueError</span>:
        <span style="color: #ff7700;font-weight:bold;">pass</span>
&nbsp;
root <span style="color: #66cc66;">=</span> Tk<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
root.<span style="color: black;">title</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"Lever distance counter"</span><span style="color: black;">&#41;</span>
&nbsp;
mainframe <span style="color: #66cc66;">=</span> ttk.<span style="color: black;">Frame</span><span style="color: black;">&#40;</span>root<span style="color: #66cc66;">,</span> padding<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"4 4 12 12"</span><span style="color: black;">&#41;</span>
mainframe.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span><span style="color: black;">&#40;</span>N<span style="color: #66cc66;">,</span> W<span style="color: #66cc66;">,</span> E<span style="color: #66cc66;">,</span> S<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
mainframe.<span style="color: black;">columnconfigure</span><span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> weight<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span>
mainframe.<span style="color: black;">rowconfigure</span><span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> weight<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span>
&nbsp;
your_weight <span style="color: #66cc66;">=</span> StringVar<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
object_weight <span style="color: #66cc66;">=</span> StringVar<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
object_distance <span style="color: #66cc66;">=</span> StringVar<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
your_distance <span style="color: #66cc66;">=</span> StringVar<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
&nbsp;
object_distance.<span style="color: #008000;">set</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"1"</span><span style="color: black;">&#41;</span>
&nbsp;
your_weight_entry <span style="color: #66cc66;">=</span> ttk.<span style="color: black;">Entry</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> width<span style="color: #66cc66;">=</span><span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> textvariable<span style="color: #66cc66;">=</span>your_weight<span style="color: black;">&#41;</span>
your_weight_entry.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span><span style="color: black;">&#40;</span>W<span style="color: #66cc66;">,</span> E<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
object_weight_entry <span style="color: #66cc66;">=</span> ttk.<span style="color: black;">Entry</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> width<span style="color: #66cc66;">=</span><span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> textvariable<span style="color: #66cc66;">=</span>object_weight<span style="color: black;">&#41;</span>
object_weight_entry.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span><span style="color: black;">&#40;</span>W<span style="color: #66cc66;">,</span> E<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
object_distance_entry <span style="color: #66cc66;">=</span> ttk.<span style="color: black;">Entry</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> width<span style="color: #66cc66;">=</span><span style="color: #ff4500;">7</span><span style="color: #66cc66;">,</span> textvariable<span style="color: #66cc66;">=</span>object_distance<span style="color: black;">&#41;</span>
object_distance_entry.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span><span style="color: black;">&#40;</span>W<span style="color: #66cc66;">,</span> E<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
&nbsp;
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> textvariable<span style="color: #66cc66;">=</span>your_distance<span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span><span style="color: black;">&#40;</span>W<span style="color: #66cc66;">,</span> E<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"Your weight"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"Object weight"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"Object Distance"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"Your Distance"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
&nbsp;
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"kg"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">1</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"kg"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">2</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"m"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
ttk.<span style="color: black;">Label</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"m"</span><span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">4</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
&nbsp;
ttk.<span style="color: black;">Button</span><span style="color: black;">&#40;</span>mainframe<span style="color: #66cc66;">,</span> text<span style="color: #66cc66;">=</span><span style="color: #483d8b;">"Calculate"</span><span style="color: #66cc66;">,</span> command<span style="color: #66cc66;">=</span>calculate<span style="color: black;">&#41;</span>.<span style="color: black;">grid</span><span style="color: black;">&#40;</span>column<span style="color: #66cc66;">=</span><span style="color: #ff4500;">3</span><span style="color: #66cc66;">,</span> row<span style="color: #66cc66;">=</span><span style="color: #ff4500;">5</span><span style="color: #66cc66;">,</span> sticky<span style="color: #66cc66;">=</span>W<span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">for</span> child <span style="color: #ff7700;font-weight:bold;">in</span> mainframe.<span style="color: black;">winfo_children</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>: child.<span style="color: black;">grid_configure</span><span style="color: black;">&#40;</span>padx<span style="color: #66cc66;">=</span><span style="color: #ff4500;">5</span><span style="color: #66cc66;">,</span> pady<span style="color: #66cc66;">=</span><span style="color: #ff4500;">5</span><span style="color: black;">&#41;</span>
&nbsp;
your_weight_entry.<span style="color: black;">focus</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
root.<span style="color: black;">bind</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">''</span><span style="color: #66cc66;">,</span> calculate<span style="color: black;">&#41;</span>
&nbsp;
root.<span style="color: black;">mainloop</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Please enjoy, and feel free to alter in any way. I&#8217;m using Tkinter and a grid layout which I find very easy to work with.</p>

<p>Thanks for reading,
Gergely.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">15 Mar 2015, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2015/03/15/python-and-my-math-commitment/" class="post-title">Python and my Math commitment</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-Python" href="https://skarlso.github.io//categories/python">Python</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Let&#8217;s talk about plans. It&#8217;s good to have one. For example, I have a plan for this year.</p>

<p>I kind of like math. So, I have this book:</p>

<p>It&#8217;s 1400 pages long and basically, has everything in it. It&#8217;s a rather exhaustive book. Hence, my plan is to finish the book by the end of 2015 and write a couple of python scripts that calculate something interesting.</p>

<p>For example, Newton&#8217;s law of cooling how I learned it is:</p>

<p><img src="http://www.forkosh.com/mathtex.cgi?t=k*log_{2.5}\frac{T_0-K}{T-K}" style="float:top;" border="0px" /></p>

<p>Where k =&gt; a material&#8217;s surface based constant. Tzero =&gt; initial temperature. T =&gt; target temperature. K =&gt; Environment&#8217;s temperature.</p>

<p>A simple python script for this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #808080; font-style: italic;"># Calculating Newton's law of Cooling</span>
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">__future__</span> <span style="color: #ff7700;font-weight:bold;">import</span> division
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">sys</span>
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">math</span> <span style="color: #ff7700;font-weight:bold;">import</span> log
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> calculation<span style="color: black;">&#40;</span>k<span style="color: #66cc66;">,</span> Tz<span style="color: #66cc66;">,</span> T<span style="color: #66cc66;">,</span> K<span style="color: black;">&#41;</span>:
    res <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span>Tz - K<span style="color: black;">&#41;</span>/<span style="color: black;">&#40;</span>T - K<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">return</span> k * <span style="color: black;">&#40;</span>log<span style="color: black;">&#40;</span>res<span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2.5</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
k <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">sys</span>.<span style="color: black;">argv</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span>
Tz <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">sys</span>.<span style="color: black;">argv</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span>
T <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">sys</span>.<span style="color: black;">argv</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span>
K <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">sys</span>.<span style="color: black;">argv</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"Calculating aproximate temperature for given parameters: k=%s, Tz=%sC, T=%sC, K=%sC"</span> % <span style="color: black;">&#40;</span>k<span style="color: #66cc66;">,</span> Tz<span style="color: #66cc66;">,</span> T<span style="color: #66cc66;">,</span> K<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>calculation<span style="color: black;">&#40;</span><span style="color: #008000;">float</span><span style="color: black;">&#40;</span>k<span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>Tz<span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>T<span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>K<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Enjoy.</p>

<p>And as always,
Thanks for reading!</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">15 Mar 2015, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2015/03/15/python-and-my-math-commitment/" class="post-title">Python and my Math commitment</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-Python" href="https://skarlso.github.io//categories/python">Python</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Let&#8217;s talk about plans. It&#8217;s good to have one. For example, I have a plan for this year.</p>

<p>I kind of like math. So, I have this book:</p>

<p>It&#8217;s 1400 pages long and basically, has everything in it. It&#8217;s a rather exhaustive book. Hence, my plan is to finish the book by the end of 2015 and write a couple of python scripts that calculate something interesting.</p>

<p>For example, Newton&#8217;s law of cooling how I learned it is:</p>

<p><img src="http://www.forkosh.com/mathtex.cgi?t=k*log_{2.5}\frac{T_0-K}{T-K}" style="float:top;" border="0px" /></p>

<p>Where k =&gt; a material&#8217;s surface based constant. Tzero =&gt; initial temperature. T =&gt; target temperature. K =&gt; Environment&#8217;s temperature.</p>

<p>A simple python script for this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #808080; font-style: italic;"># Calculating Newton's law of Cooling</span>
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">__future__</span> <span style="color: #ff7700;font-weight:bold;">import</span> division
<span style="color: #ff7700;font-weight:bold;">import</span> <span style="color: #dc143c;">sys</span>
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">math</span> <span style="color: #ff7700;font-weight:bold;">import</span> log
&nbsp;
<span style="color: #ff7700;font-weight:bold;">def</span> calculation<span style="color: black;">&#40;</span>k<span style="color: #66cc66;">,</span> Tz<span style="color: #66cc66;">,</span> T<span style="color: #66cc66;">,</span> K<span style="color: black;">&#41;</span>:
    res <span style="color: #66cc66;">=</span> <span style="color: black;">&#40;</span>Tz - K<span style="color: black;">&#41;</span>/<span style="color: black;">&#40;</span>T - K<span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">return</span> k * <span style="color: black;">&#40;</span>log<span style="color: black;">&#40;</span>res<span style="color: #66cc66;">,</span> <span style="color: #ff4500;">2.5</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
k <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">sys</span>.<span style="color: black;">argv</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">1</span><span style="color: black;">&#93;</span>
Tz <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">sys</span>.<span style="color: black;">argv</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">2</span><span style="color: black;">&#93;</span>
T <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">sys</span>.<span style="color: black;">argv</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">3</span><span style="color: black;">&#93;</span>
K <span style="color: #66cc66;">=</span> <span style="color: #dc143c;">sys</span>.<span style="color: black;">argv</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">4</span><span style="color: black;">&#93;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"Calculating aproximate temperature for given parameters: k=%s, Tz=%sC, T=%sC, K=%sC"</span> % <span style="color: black;">&#40;</span>k<span style="color: #66cc66;">,</span> Tz<span style="color: #66cc66;">,</span> T<span style="color: #66cc66;">,</span> K<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>calculation<span style="color: black;">&#40;</span><span style="color: #008000;">float</span><span style="color: black;">&#40;</span>k<span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>Tz<span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>T<span style="color: black;">&#41;</span><span style="color: #66cc66;">,</span> <span style="color: #008000;">float</span><span style="color: black;">&#40;</span>K<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Enjoy.</p>

<p>And as always,
Thanks for reading!</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">02 Mar 2015, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2015/03/02/sphere-judge-online-python-kivy-android-app-part-2/" class="post-title">Sphere Judge Online – Python Kivy Android app – Part 2</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-android" href="https://skarlso.github.io//categories/android">android</a><a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-Python" href="https://skarlso.github.io//categories/python">Python</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Here we are again. I will attempt to further this little journey of mine into the land of Android and Python.</p>

<p>This is the second part of the advanture you can read the first one a little bit back.</p>

<h1 style="text-align: center;">
  The Script
</h1>

<p>&nbsp;</p>

<p>We left off at a point where I successfully configured my environment and compiled my first hello world APK. At that point it took a little bit fiddling to get it to work on my phone.</p>

<p>Now, I have progressed a little bit into spoj&#8217;s page parsing. The code so far is as follows:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">__author__ <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'hannibal'</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> requests
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">random</span> <span style="color: #ff7700;font-weight:bold;">import</span> randint
<span style="color: #ff7700;font-weight:bold;">import</span> lxml.<span style="color: black;">html</span> <span style="color: #ff7700;font-weight:bold;">as</span> lh
&nbsp;
random_page_number <span style="color: #66cc66;">=</span> randint<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">63</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># 63 being the maximum page number at spoj</span>
r <span style="color: #66cc66;">=</span> requests.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"http://www.spoj.com/problems/classical/sort=0,start=%d"</span> % <span style="color: black;">&#40;</span>random_page_number * <span style="color: #ff4500;">50</span> - <span style="color: #ff4500;">50</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #808080; font-style: italic;"># Problem Div XPath =&gt; //[@class="problems"]</span>
&nbsp;
spoj_page <span style="color: #66cc66;">=</span> lh.<span style="color: black;">document_fromstring</span><span style="color: black;">&#40;</span>r.<span style="color: black;">text</span><span style="color: black;">&#41;</span>
links_to_problems <span style="color: #66cc66;">=</span> spoj_page<span style="color: black;">&#91;</span><span style="color: #ff4500;"></span><span style="color: black;">&#93;</span>.<span style="color: black;">xpath</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"//tr[@class='problemrow']/td[2]/a"</span><span style="color: black;">&#41;</span>
&nbsp;
current_link <span style="color: #66cc66;">=</span> links_to_problems<span style="color: black;">&#91;</span>randint<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> <span style="color: #008000;">len</span><span style="color: black;">&#40;</span>links_to_problems<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span>
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>current_link.<span style="color: black;">attrib</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'href'</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
r <span style="color: #66cc66;">=</span> requests.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"http://www.spoj.com/%s"</span> % current_link.<span style="color: black;">attrib</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'href'</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>r.<span style="color: black;">text</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"utf-8"</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>This is pretty straight forward so far. It gets the problems page, loads in all of the links and prints it out.</p>

<p>My goal is an application which looks something like this:</p>

<p>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>___</p>

<p>|   _<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>  |</p>

<p>|  |                                                                           | |</p>

<p>|  |                                                                           | |</p>

<p>|  |                    Display Problem Description               | |</p>

<p>|  |                                                                           | |</p>

<p>|  |                                                                           | |</p>

<p>|  |                                                                           | |</p>

<p>|  |_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_____ | |</p>

<p>|                                                                                 |</p>

<p>|                                                                                 |</p>

<p>|                         Button:Finish Problem                        |</p>

<p>|                                                                                 |</p>

<p>|                         Button:Next Problem                          |</p>

<p>|_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>__ |</p>

<p>It&#8217;s very basic. When it loads up, it will gather and display a new problem. You have two options, either get a new one, or save / finish this item, saying you never want to see it again.</p>

<p>Let&#8217;s put the first part into an android app. Just gather data, and get it disaplyed.</p>

<p>*Queue a days worth of hacking and frustrated cussing.*</p>

<p>So, turns out it&#8217;s not as easy as I would have liked it to be. I ran into some pretty nasty problems. Some of them I&#8217;ll write down below for the record, and an attempted solution as well.</p>

<h1 style="text-align: center;">
  Problems
</h1>

<p><strong>#1:</strong> <strong>Problem:</strong> Libraries. I&#8217;m using lxml and requests. Requests is a pure python library, but lxml is partially C. Which apparently is not very well supported yet.</p>

<p><strong>Solution (Partial):</strong> I could optain request by two ways, but the most simple one, was basically just building my distribution with the optional requests module like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">.<span style="color: #000000; font-weight: bold;">/</span>distribute.sh <span style="color: #660033;">-m</span> <span style="color: #ff0000;">"openssl pil requests kivy"</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Attempting to do the same with LXML resulted in a compile issue which I tracked down to something like: &#8220;sorry, but we don&#8217;t support OSX&#8221;. But it&#8217;s okay. There are other ways to parse an html page, I just really like the xpath filter. So I soldiered on with trying to get something to work at least.</p>

<p><strong>#3: Problem:</strong> <em>Bogus compile time exception.</em> There were some exceptions on the way when I was trying to compile with buildozer. <strong>Solution:</strong> It&#8217;s interesting because previously my solution to another compile time issue was to use a specific version of Cython. But this time the solution was to actually remove that version and install the latest one. Which is 0.22 as of the time of this writing. So:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sudo</span> pip update cython</pre>
      </td>
    </tr>
  </table>
</div>

<p><strong>#2: Problem:</strong> Connection. So now, I&#8217;m down to the bare bone. At this point, I just want to see a page source in a label. My code looks like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> kivy
kivy.<span style="color: black;">require</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'1.8.0'</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">lang</span> <span style="color: #ff7700;font-weight:bold;">import</span> Builder
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">uix</span>.<span style="color: black;">gridlayout</span> <span style="color: #ff7700;font-weight:bold;">import</span> GridLayout
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">properties</span> <span style="color: #ff7700;font-weight:bold;">import</span> NumericProperty
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">app</span> <span style="color: #ff7700;font-weight:bold;">import</span> App
&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> requests
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">random</span> <span style="color: #ff7700;font-weight:bold;">import</span> randint
<span style="color: #808080; font-style: italic;"># import lxml.html as lh</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># import sys</span>
<span style="color: #808080; font-style: italic;"># sys.path.append('/sdcard/com.googlecode.pythonforandroid/extras/python/site-packages')</span>
&nbsp;
&nbsp;
Builder.<span style="color: black;">load_string</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'''
:
    cols: 1
    Label:
        text: root.get_problem()
    Button:
        text: 'Click me! %d' % root.counter
        on_release: root.my_callback()
'''</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> SpojAppScreen<span style="color: black;">&#40;</span>GridLayout<span style="color: black;">&#41;</span>:
    counter <span style="color: #66cc66;">=</span> NumericProperty<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> my_callback<span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #483d8b;">'The button has been pushed'</span>
        <span style="color: #008000;">self</span>.<span style="color: black;">counter</span> +<span style="color: #66cc66;">=</span> <span style="color: #ff4500;">1</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">def</span> get_problem<span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        random_page_number <span style="color: #66cc66;">=</span> randint<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">63</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># 63 being the maximum page number at spoj</span>
        r <span style="color: #66cc66;">=</span> requests.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"http://www.spoj.com/problems/classical/sort=0,start=%d"</span> % <span style="color: black;">&#40;</span>random_page_number * <span style="color: #ff4500;">50</span> - <span style="color: #ff4500;">50</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
        <span style="color: #808080; font-style: italic;"># Problem Div XPath =&gt; //[@class="problems"]</span>
&nbsp;
        <span style="color: #808080; font-style: italic;"># spoj_page = lh.document_fromstring(r.text)</span>
        <span style="color: #808080; font-style: italic;"># links_to_problems = spoj_page[0].xpath("//tr[@class='problemrow']/td[2]/a")</span>
&nbsp;
        <span style="color: #808080; font-style: italic;"># current_link = links_to_problems[randint(0, len(links_to_problems))]</span>
        <span style="color: #808080; font-style: italic;"># print(current_link.attrib['href'])</span>
        <span style="color: #808080; font-style: italic;"># r = requests.get("http://www.spoj.com/%s" % current_link.attrib['href'])</span>
        <span style="color: #808080; font-style: italic;"># print(r.text.encode("utf-8"))</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> r.<span style="color: black;">text</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"utf-8"</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> SpojApp<span style="color: black;">&#40;</span>App<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">def</span> build<span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> SpojAppScreen<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">if</span> __name__ <span style="color: #66cc66;">==</span> <span style="color: #483d8b;">'__main__'</span>:
    SpojApp<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">run</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>However, running this results in a connection error in adb logcat:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  kivy.lang.BuilderException: Parser: File <span style="color: #ff0000;">""</span>, line <span style="color: #000000;">5</span>:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">3</span>:    cols: <span style="color: #000000;">1</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">4</span>:    Label:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  <span style="color: #000000; font-weight: bold;">&</span>gt;<span style="color: #000000; font-weight: bold;">&</span>gt;    <span style="color: #000000;">5</span>:        text: root.get_problem<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">6</span>:    Button:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">7</span>:        text: <span style="color: #ff0000;">'Click me! %d'</span> <span style="color: #000000; font-weight: bold;">%</span> root.counter
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  BuilderException: Parser: File <span style="color: #ff0000;">""</span>, line <span style="color: #000000;">5</span>:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">3</span>:    cols: <span style="color: #000000;">1</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">4</span>:    Label:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  <span style="color: #000000; font-weight: bold;">&</span>gt;<span style="color: #000000; font-weight: bold;">&</span>gt;    <span style="color: #000000;">5</span>:        text: root.get_problem<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">6</span>:    Button:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">7</span>:        text: <span style="color: #ff0000;">'Click me! %d'</span> <span style="color: #000000; font-weight: bold;">%</span> root.counter
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ConnectionError: <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #ff0000;">'Connection aborted.'</span>, gaierror<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">4</span>, <span style="color: #ff0000;">'non-recoverable failure in name resolution.'</span><span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p><strong>Solution:</strong> I tried simply putting out a random number at some point, which actullay worked, so I know it&#8217;s the connection. I&#8217;m guessing I need permission to access the network. Which would be this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="xml" style="font-family:monospace;">uses-permission android:name="android.permission.INTERNET"</pre>
      </td>
    </tr>
  </table>
</div>

<p>And yes! Building and installing it with this additional permission got me so far as I can display the web page&#8217;s content in a label.</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">.<span style="color: #000000; font-weight: bold;">/</span>build.py <span style="color: #660033;">--package</span> org.spoj <span style="color: #660033;">--permission</span> INTERNET <span style="color: #660033;">--name</span> <span style="color: #ff0000;">"Spoj"</span> <span style="color: #660033;">--version</span> <span style="color: #000000;">1.0</span> <span style="color: #660033;">--dir</span> <span style="color: #000000; font-weight: bold;">/</span>Users<span style="color: #000000; font-weight: bold;">/</span>hannibal<span style="color: #000000; font-weight: bold;">/</span>PythonProjects<span style="color: #000000; font-weight: bold;">/</span>spoj<span style="color: #000000; font-weight: bold;">/</span> debug</pre>
      </td>
    </tr>
  </table>
</div>

<p>There is a saying that you should end on a high note, so that is what I&#8217;m going to do here right now. Join me next time, when I&#8217;ll try to replace lxml with something else&#8230;</p>

<p>Thanks for reading!</p>

<p>Gergely.</p>
                    </div>
                </section>
                
                <h1 class="content-subhead">02 Mar 2015, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2015/03/02/sphere-judge-online-python-kivy-android-app-part-2/" class="post-title">Sphere Judge Online – Python Kivy Android app – Part 2</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-android" href="https://skarlso.github.io//categories/android">android</a><a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-Python" href="https://skarlso.github.io//categories/python">Python</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Here we are again. I will attempt to further this little journey of mine into the land of Android and Python.</p>

<p>This is the second part of the advanture you can read the first one a little bit back.</p>

<h1 style="text-align: center;">
  The Script
</h1>

<p>&nbsp;</p>

<p>We left off at a point where I successfully configured my environment and compiled my first hello world APK. At that point it took a little bit fiddling to get it to work on my phone.</p>

<p>Now, I have progressed a little bit into spoj&#8217;s page parsing. The code so far is as follows:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;">__author__ <span style="color: #66cc66;">=</span> <span style="color: #483d8b;">'hannibal'</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> requests
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">random</span> <span style="color: #ff7700;font-weight:bold;">import</span> randint
<span style="color: #ff7700;font-weight:bold;">import</span> lxml.<span style="color: black;">html</span> <span style="color: #ff7700;font-weight:bold;">as</span> lh
&nbsp;
random_page_number <span style="color: #66cc66;">=</span> randint<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">63</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># 63 being the maximum page number at spoj</span>
r <span style="color: #66cc66;">=</span> requests.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"http://www.spoj.com/problems/classical/sort=0,start=%d"</span> % <span style="color: black;">&#40;</span>random_page_number * <span style="color: #ff4500;">50</span> - <span style="color: #ff4500;">50</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
<span style="color: #808080; font-style: italic;"># Problem Div XPath =&gt; //[@class="problems"]</span>
&nbsp;
spoj_page <span style="color: #66cc66;">=</span> lh.<span style="color: black;">document_fromstring</span><span style="color: black;">&#40;</span>r.<span style="color: black;">text</span><span style="color: black;">&#41;</span>
links_to_problems <span style="color: #66cc66;">=</span> spoj_page<span style="color: black;">&#91;</span><span style="color: #ff4500;"></span><span style="color: black;">&#93;</span>.<span style="color: black;">xpath</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"//tr[@class='problemrow']/td[2]/a"</span><span style="color: black;">&#41;</span>
&nbsp;
current_link <span style="color: #66cc66;">=</span> links_to_problems<span style="color: black;">&#91;</span>randint<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> <span style="color: #008000;">len</span><span style="color: black;">&#40;</span>links_to_problems<span style="color: black;">&#41;</span><span style="color: black;">&#41;</span><span style="color: black;">&#93;</span>
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>current_link.<span style="color: black;">attrib</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'href'</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
r <span style="color: #66cc66;">=</span> requests.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"http://www.spoj.com/%s"</span> % current_link.<span style="color: black;">attrib</span><span style="color: black;">&#91;</span><span style="color: #483d8b;">'href'</span><span style="color: black;">&#93;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">print</span><span style="color: black;">&#40;</span>r.<span style="color: black;">text</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"utf-8"</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>This is pretty straight forward so far. It gets the problems page, loads in all of the links and prints it out.</p>

<p>My goal is an application which looks something like this:</p>

<p>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>___</p>

<p>|   _<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>  |</p>

<p>|  |                                                                           | |</p>

<p>|  |                                                                           | |</p>

<p>|  |                    Display Problem Description               | |</p>

<p>|  |                                                                           | |</p>

<p>|  |                                                                           | |</p>

<p>|  |                                                                           | |</p>

<p>|  |_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_____ | |</p>

<p>|                                                                                 |</p>

<p>|                                                                                 |</p>

<p>|                         Button:Finish Problem                        |</p>

<p>|                                                                                 |</p>

<p>|                         Button:Next Problem                          |</p>

<p>|_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>_<strong>_</strong>__ |</p>

<p>It&#8217;s very basic. When it loads up, it will gather and display a new problem. You have two options, either get a new one, or save / finish this item, saying you never want to see it again.</p>

<p>Let&#8217;s put the first part into an android app. Just gather data, and get it disaplyed.</p>

<p>*Queue a days worth of hacking and frustrated cussing.*</p>

<p>So, turns out it&#8217;s not as easy as I would have liked it to be. I ran into some pretty nasty problems. Some of them I&#8217;ll write down below for the record, and an attempted solution as well.</p>

<h1 style="text-align: center;">
  Problems
</h1>

<p><strong>#1:</strong> <strong>Problem:</strong> Libraries. I&#8217;m using lxml and requests. Requests is a pure python library, but lxml is partially C. Which apparently is not very well supported yet.</p>

<p><strong>Solution (Partial):</strong> I could optain request by two ways, but the most simple one, was basically just building my distribution with the optional requests module like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">.<span style="color: #000000; font-weight: bold;">/</span>distribute.sh <span style="color: #660033;">-m</span> <span style="color: #ff0000;">"openssl pil requests kivy"</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Attempting to do the same with LXML resulted in a compile issue which I tracked down to something like: &#8220;sorry, but we don&#8217;t support OSX&#8221;. But it&#8217;s okay. There are other ways to parse an html page, I just really like the xpath filter. So I soldiered on with trying to get something to work at least.</p>

<p><strong>#3: Problem:</strong> <em>Bogus compile time exception.</em> There were some exceptions on the way when I was trying to compile with buildozer. <strong>Solution:</strong> It&#8217;s interesting because previously my solution to another compile time issue was to use a specific version of Cython. But this time the solution was to actually remove that version and install the latest one. Which is 0.22 as of the time of this writing. So:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;"><span style="color: #c20cb9; font-weight: bold;">sudo</span> pip update cython</pre>
      </td>
    </tr>
  </table>
</div>

<p><strong>#2: Problem:</strong> Connection. So now, I&#8217;m down to the bare bone. At this point, I just want to see a page source in a label. My code looks like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="python" style="font-family:monospace;"><span style="color: #ff7700;font-weight:bold;">import</span> kivy
kivy.<span style="color: black;">require</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'1.8.0'</span><span style="color: black;">&#41;</span>
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">lang</span> <span style="color: #ff7700;font-weight:bold;">import</span> Builder
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">uix</span>.<span style="color: black;">gridlayout</span> <span style="color: #ff7700;font-weight:bold;">import</span> GridLayout
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">properties</span> <span style="color: #ff7700;font-weight:bold;">import</span> NumericProperty
<span style="color: #ff7700;font-weight:bold;">from</span> kivy.<span style="color: black;">app</span> <span style="color: #ff7700;font-weight:bold;">import</span> App
&nbsp;
<span style="color: #ff7700;font-weight:bold;">import</span> requests
<span style="color: #ff7700;font-weight:bold;">from</span> <span style="color: #dc143c;">random</span> <span style="color: #ff7700;font-weight:bold;">import</span> randint
<span style="color: #808080; font-style: italic;"># import lxml.html as lh</span>
&nbsp;
<span style="color: #808080; font-style: italic;"># import sys</span>
<span style="color: #808080; font-style: italic;"># sys.path.append('/sdcard/com.googlecode.pythonforandroid/extras/python/site-packages')</span>
&nbsp;
&nbsp;
Builder.<span style="color: black;">load_string</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">'''
:
    cols: 1
    Label:
        text: root.get_problem()
    Button:
        text: 'Click me! %d' % root.counter
        on_release: root.my_callback()
'''</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> SpojAppScreen<span style="color: black;">&#40;</span>GridLayout<span style="color: black;">&#41;</span>:
    counter <span style="color: #66cc66;">=</span> NumericProperty<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: black;">&#41;</span>
    <span style="color: #ff7700;font-weight:bold;">def</span> my_callback<span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">print</span> <span style="color: #483d8b;">'The button has been pushed'</span>
        <span style="color: #008000;">self</span>.<span style="color: black;">counter</span> +<span style="color: #66cc66;">=</span> <span style="color: #ff4500;">1</span>
&nbsp;
    <span style="color: #ff7700;font-weight:bold;">def</span> get_problem<span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        random_page_number <span style="color: #66cc66;">=</span> randint<span style="color: black;">&#40;</span><span style="color: #ff4500;"></span><span style="color: #66cc66;">,</span> <span style="color: #ff4500;">63</span><span style="color: black;">&#41;</span> <span style="color: #808080; font-style: italic;"># 63 being the maximum page number at spoj</span>
        r <span style="color: #66cc66;">=</span> requests.<span style="color: black;">get</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"http://www.spoj.com/problems/classical/sort=0,start=%d"</span> % <span style="color: black;">&#40;</span>random_page_number * <span style="color: #ff4500;">50</span> - <span style="color: #ff4500;">50</span><span style="color: black;">&#41;</span><span style="color: black;">&#41;</span>
&nbsp;
        <span style="color: #808080; font-style: italic;"># Problem Div XPath =&gt; //[@class="problems"]</span>
&nbsp;
        <span style="color: #808080; font-style: italic;"># spoj_page = lh.document_fromstring(r.text)</span>
        <span style="color: #808080; font-style: italic;"># links_to_problems = spoj_page[0].xpath("//tr[@class='problemrow']/td[2]/a")</span>
&nbsp;
        <span style="color: #808080; font-style: italic;"># current_link = links_to_problems[randint(0, len(links_to_problems))]</span>
        <span style="color: #808080; font-style: italic;"># print(current_link.attrib['href'])</span>
        <span style="color: #808080; font-style: italic;"># r = requests.get("http://www.spoj.com/%s" % current_link.attrib['href'])</span>
        <span style="color: #808080; font-style: italic;"># print(r.text.encode("utf-8"))</span>
        <span style="color: #ff7700;font-weight:bold;">return</span> r.<span style="color: black;">text</span>.<span style="color: black;">encode</span><span style="color: black;">&#40;</span><span style="color: #483d8b;">"utf-8"</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">class</span> SpojApp<span style="color: black;">&#40;</span>App<span style="color: black;">&#41;</span>:
    <span style="color: #ff7700;font-weight:bold;">def</span> build<span style="color: black;">&#40;</span><span style="color: #008000;">self</span><span style="color: black;">&#41;</span>:
        <span style="color: #ff7700;font-weight:bold;">return</span> SpojAppScreen<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>
&nbsp;
<span style="color: #ff7700;font-weight:bold;">if</span> __name__ <span style="color: #66cc66;">==</span> <span style="color: #483d8b;">'__main__'</span>:
    SpojApp<span style="color: black;">&#40;</span><span style="color: black;">&#41;</span>.<span style="color: black;">run</span><span style="color: black;">&#40;</span><span style="color: black;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>However, running this results in a connection error in adb logcat:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  kivy.lang.BuilderException: Parser: File <span style="color: #ff0000;">""</span>, line <span style="color: #000000;">5</span>:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">3</span>:    cols: <span style="color: #000000;">1</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">4</span>:    Label:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  <span style="color: #000000; font-weight: bold;">&</span>gt;<span style="color: #000000; font-weight: bold;">&</span>gt;    <span style="color: #000000;">5</span>:        text: root.get_problem<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">6</span>:    Button:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">7</span>:        text: <span style="color: #ff0000;">'Click me! %d'</span> <span style="color: #000000; font-weight: bold;">%</span> root.counter
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  BuilderException: Parser: File <span style="color: #ff0000;">""</span>, line <span style="color: #000000;">5</span>:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">3</span>:    cols: <span style="color: #000000;">1</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">4</span>:    Label:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  <span style="color: #000000; font-weight: bold;">&</span>gt;<span style="color: #000000; font-weight: bold;">&</span>gt;    <span style="color: #000000;">5</span>:        text: root.get_problem<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">6</span>:    Button:
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:        <span style="color: #000000;">7</span>:        text: <span style="color: #ff0000;">'Click me! %d'</span> <span style="color: #000000; font-weight: bold;">%</span> root.counter
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ...
I<span style="color: #000000; font-weight: bold;">/</span>python  <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">27610</span><span style="color: #7a0874; font-weight: bold;">&#41;</span>:  ConnectionError: <span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #ff0000;">'Connection aborted.'</span>, gaierror<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #000000;">4</span>, <span style="color: #ff0000;">'non-recoverable failure in name resolution.'</span><span style="color: #7a0874; font-weight: bold;">&#41;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p><strong>Solution:</strong> I tried simply putting out a random number at some point, which actullay worked, so I know it&#8217;s the connection. I&#8217;m guessing I need permission to access the network. Which would be this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="xml" style="font-family:monospace;">uses-permission android:name="android.permission.INTERNET"</pre>
      </td>
    </tr>
  </table>
</div>

<p>And yes! Building and installing it with this additional permission got me so far as I can display the web page&#8217;s content in a label.</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="code">
        <pre class="bash" style="font-family:monospace;">.<span style="color: #000000; font-weight: bold;">/</span>build.py <span style="color: #660033;">--package</span> org.spoj <span style="color: #660033;">--permission</span> INTERNET <span style="color: #660033;">--name</span> <span style="color: #ff0000;">"Spoj"</span> <span style="color: #660033;">--version</span> <span style="color: #000000;">1.0</span> <span style="color: #660033;">--dir</span> <span style="color: #000000; font-weight: bold;">/</span>Users<span style="color: #000000; font-weight: bold;">/</span>hannibal<span style="color: #000000; font-weight: bold;">/</span>PythonProjects<span style="color: #000000; font-weight: bold;">/</span>spoj<span style="color: #000000; font-weight: bold;">/</span> debug</pre>
      </td>
    </tr>
  </table>
</div>

<p>There is a saying that you should end on a high note, so that is what I&#8217;m going to do here right now. Join me next time, when I&#8217;ll try to replace lxml with something else&#8230;</p>

<p>Thanks for reading!</p>

<p>Gergely.</p>
                    </div>
                </section>
                
            </div>
            
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
      
      <a href="https://skarlso.github.io/categories/programming/page/2/" class="post-list-pagination-item pure-button post-list-pagination-item-prev">
        <i class="fa fa-angle-double-left"></i>&nbsp;Newer
      </a>
      
    <span class="post-list-pagination-item post-list-pagination-item-current">Page 3 of 8</span>
    
      <a href="https://skarlso.github.io/categories/programming/page/4/" class="post-list-pagination-item pure-button post-list-pagination-item-next">
        Older&nbsp;<i class="fa fa-angle-double-right"></i>
      </a>
    
  </nav>
</div>


            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="https://gohugo.io/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="https://skarlso.github.io//js/all.min.js"></script>

        </div>
    </div>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', '', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
