<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Problem Solving &middot; Ramblings of a build engineer</title>

    <meta name="description" content="">

    <meta name="generator" content="Hugo 0.31.1" />
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Problem Solving &middot; Ramblings of a build engineer">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Problem Solving &middot; Ramblings of a build engineer">
    <meta property="og:description" content="">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">

    <link rel="stylesheet" href="https://skarlso.github.io//css/all.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="Ramblings of a build engineer" href="https://skarlso.github.io//index.xml" />
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            <h1 class="brand-title"><a href="https://skarlso.github.io/">Ramblings of a build engineer</a></h1>
            <h2 class="brand-tagline"></h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/Skarlso"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/Skarlso "><i class="fa fa-github-alt"></i> github</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="https://skarlso.github.io//index.xml"><i class="fa fa-rss"></i> rss</a>
                </li>
            </ul>
        </nav>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            
            <div class="posts">
                
                <h1 class="content-subhead">09 Oct 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2012/10/09/how-to-eliminate-a-parameter-boom/" class="post-title">How to eliminate a parameter boom</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-java" href="https://skarlso.github.io//categories/java">java</a><a class="post-category post-category-knowledge" href="https://skarlso.github.io//categories/knowledge">knowledge</a><a class="post-category post-category-problem solving" href="https://skarlso.github.io//categories/problem-solving">problem solving</a><a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-Uncategorized" href="https://skarlso.github.io//categories/uncategorized">Uncategorized</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Hello folks.</p>

<p>Today I want to write about a little trick I learned.</p>

<p>If you are working with legacy code and you don&#8217;t have the chance to eliminate core design problems, you can use this little pattern to help you out.</p>

<p><strong>Problem</strong></p>

<p>Problem is that you have a class that has a gazillion collaborators and at some point in time one of the clever devs thought it would be a cool idea to do dependancy injection via the constructor. We all know that doing this makes the class immutable which is very good for a number of reasons. However it doesn&#8217;t provide a flexible solution if you want to leave out one or two collabs. For that your would have to create Adapter constructors and chain them upwards which would get very ugly very fast. While using JavaBeans getters and setters can leave your class in a harmful state like not at all or partially initialised.</p>

<p>So what&#8217;s a good solution then?</p>

<p><strong>Solution</strong></p>

<p>One possible solution would be to use some kind of initialisation framework like Springs @Autowired. But cluttering your classes with that isn&#8217;t really pretty either. But it&#8217;s A solution.</p>

<p>Another solution is the usage of a builder pattern.</p>

<p>Consider this class:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
4
5
6
7
8
9
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;">    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> VeryImportantService <span style="color: #009900;">&#123;</span>
&nbsp;
        <span style="color: #000000; font-weight: bold;">public</span> VeryImportantService<span style="color: #009900;">&#40;</span>CollabOne collabOne, CollabTwo collabTwo, CollabThree collabThree, CollabFour collabFour,
            CollabFive collabFive, CollabSix collabSix<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
            .
            .
            .
        <span style="color: #009900;">&#125;</span>
    <span style="color: #009900;">&#125;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Don&#8217;t forget that we want these to be optional. I would like to leave out two or three here and there.</p>

<p>The builder let&#8217;s you do that. It looks something like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;">    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> VeryImportantService <span style="color: #009900;">&#123;</span>
&nbsp;
        <span style="color: #000000; font-weight: bold;">private</span> CollabOne collabOne<span style="color: #339933;">;</span>
        <span style="color: #000000; font-weight: bold;">private</span> CollabTwo collabTwo<span style="color: #339933;">;</span>
        <span style="color: #000000; font-weight: bold;">private</span> CollabThree collabThree<span style="color: #339933;">;</span>
        <span style="color: #000000; font-weight: bold;">private</span> CollabFour collabFour<span style="color: #339933;">;</span>
        <span style="color: #000000; font-weight: bold;">private</span> CollabFive collabFive<span style="color: #339933;">;</span>
        <span style="color: #000000; font-weight: bold;">private</span> CollabSix collabSix<span style="color: #339933;">;</span> 
&nbsp;
&nbsp;
        <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">static</span> <span style="color: #000000; font-weight: bold;">class</span> Builder<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
            <span style="color: #000000; font-weight: bold;">private</span> CollabOne collabOne<span style="color: #339933;">;</span>
            <span style="color: #000000; font-weight: bold;">private</span> CollabTwo collabTwo<span style="color: #339933;">;</span>
            <span style="color: #000000; font-weight: bold;">private</span> CollabThree collabThree<span style="color: #339933;">;</span>
            <span style="color: #000000; font-weight: bold;">private</span> CollabFour collabFour<span style="color: #339933;">;</span>
            <span style="color: #000000; font-weight: bold;">private</span> CollabFive collabFive<span style="color: #339933;">;</span>
            <span style="color: #000000; font-weight: bold;">private</span> CollabSix collabSix<span style="color: #339933;">;</span> 
&nbsp;
            <span style="color: #000000; font-weight: bold;">public</span> Builder<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><span style="color: #009900;">&#125;</span>
&nbsp;
            <span style="color: #000000; font-weight: bold;">public</span> Builder collabOne<span style="color: #009900;">&#40;</span>CollabOne value<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
                <span style="color: #000000; font-weight: bold;">this</span>.<span style="color: #006633;">collabOne</span> <span style="color: #339933;">=</span> value<span style="color: #339933;">;</span>
                <span style="color: #000000; font-weight: bold;">return</span> <span style="color: #000000; font-weight: bold;">this</span><span style="color: #339933;">;</span>
            <span style="color: #009900;">&#125;</span>
&nbsp;
            <span style="color: #000000; font-weight: bold;">public</span> Builder collabTwo<span style="color: #009900;">&#40;</span>CollabTwo value<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
                <span style="color: #000000; font-weight: bold;">this</span>.<span style="color: #006633;">collabTwo</span> <span style="color: #339933;">=</span> value<span style="color: #339933;">;</span>
                <span style="color: #000000; font-weight: bold;">return</span> <span style="color: #000000; font-weight: bold;">this</span><span style="color: #339933;">;</span>
            <span style="color: #009900;">&#125;</span>
&nbsp;
            .
            .
            .
&nbsp;
            <span style="color: #000000; font-weight: bold;">public</span> VeryImportantService build<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
                <span style="color: #000000; font-weight: bold;">return</span> <span style="color: #000000; font-weight: bold;">new</span> VeryImportantService<span style="color: #009900;">&#40;</span><span style="color: #000000; font-weight: bold;">this</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
            <span style="color: #009900;">&#125;</span>
&nbsp;
        <span style="color: #009900;">&#125;</span>
&nbsp;
        <span style="color: #666666; font-style: italic;">//private constructor</span>
        <span style="color: #000000; font-weight: bold;">private</span> VeryImportantService<span style="color: #009900;">&#40;</span>Builder builder<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
            <span style="color: #000000; font-weight: bold;">this</span>.<span style="color: #006633;">collabOne</span> <span style="color: #339933;">=</span> builder.<span style="color: #006633;">collabOne</span><span style="color: #339933;">;</span>
            <span style="color: #000000; font-weight: bold;">this</span>.<span style="color: #006633;">collabTwo</span> <span style="color: #339933;">=</span> builder.<span style="color: #006633;">collabTwo</span><span style="color: #339933;">;</span>
            .
            .
            .
        <span style="color: #009900;">&#125;</span>
    <span style="color: #009900;">&#125;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Now&#8230; calling this would look something like this:</p>

<pre lang="JAVA" lines="1">VeryImportantService veryImportantService = new VeryImportantService.Builder().collabOne(someValueOne).collabTwo(someValueTwo).collabFive(someValueFive);
</pre>

<p>This enables you to be flexible HOWEVER!! I HATE train wrecks. So I would probably tweak it not to return things, but set them. Then you would end up calling then line by line. Which is still not the best but better then the alternative.</p>

<p><strong>End words</strong></p>

<p>So there you go. This is A solution not THE solution obviously. The best would be to NOT design such a monster at all. If you have any better ideas please feel free to share. I would gladly put them on my blog.</p>

<p>As always,</p>

<p>Thanks for reading,</p>

<p>Gergely.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">12 Jul 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2012/07/12/tdd-and-game-of-life/" class="post-title">TDD and Game of Life</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-java" href="https://skarlso.github.io//categories/java">java</a><a class="post-category post-category-knowledge" href="https://skarlso.github.io//categories/knowledge">knowledge</a><a class="post-category post-category-problem solving" href="https://skarlso.github.io//categories/problem-solving">problem solving</a><a class="post-category post-category-TDD" href="https://skarlso.github.io//categories/tdd">TDD</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>So today at 8-12PM I had a great session with two friends of mine. It was awesome. Like a mini code retreat.</p>

<p>We set down in a musky bar, drank wine and beer and cider, and decided to practice some TDD with the well known problem of <a href="http://en.wikipedia.org/wiki/Conway's_Game_of_Life" target="_blank">Conway&#8217;s Game of Life</a>. This challenge is really interesting. I never done it before, ever. So it was a really good practice for me.</p>

<p>So&#8230;</p>

<p><strong>In the beginning there was Test</strong></p>

<p>One of my friends and I started out by developing the implementation for the game while the second one was mentoring and couching us. As with any problem I&#8217;m facing now days, I started with writing a failing test first. I didn&#8217;t write any kind of production code yet. I wrote a test testing for having the class called game of life.</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
4
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;">    @Test
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> shouldHaveClassForGameOfLife<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        GameOfLife gameOfLife <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> GameOfLife<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>This wasn&#8217;t compiling of course because I didn&#8217;t have any kind of GameOfLife class. But intelliJ is so intelligent that I simply pressed Alt+Enter and created the class immediately. The class didn&#8217;t have anything in it, but I already had a passing test.</p>

<p>So this went on and on and I created one test after another while my other coding friend did the same.</p>

<p><strong>Now the amazing part</strong></p>

<p>I begun working on the Grid. A simple octagonal coordinating system. This was represented in the beginning with a simple two dimensional array with Cells in it.</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;">    Cells<span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> cells <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Cells<span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">50</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">50</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>This of course wasn&#8217;t dynamic. I didn&#8217;t care about that yet. I had my grid of cells. These cells were initially all dead.</p>

<p>Now, the interesting part is that as I developed my Grid finding out the Cells neighbours and counting them, my friend worked on the Cells themselves and getting their next state and killing them based on the rules.</p>

<p>We never talked to each other, didn&#8217;t agree on roles or directions or anything. And even so at the and&#8230; We were at a stage where we met in the middle and could merge our codes! Our little game of life evolved with a push of a button. ( Three actually. )</p>

<p>This was simply amazing. Without ever talking about the direction we want to go we created a working code base that could be merged!</p>

<p><strong>It just works</strong></p>

<p>Before TDD I would have tackled this problem much differently. And it would have taken me much more time too. This was like an hour or so.</p>

<p>TDD helped me break down the job into small, manageable tasks. I created and deleted and rewrote tests as I went on and on and developed the algorithm for my Grid and Cell. And eventually the problem slowly unfolded itself right before my eyes. I began to see the connections. I began to see the beauty. I began to understand! This is something I rarely enjoyed previously without using TDD.</p>

<p><strong>Summary</strong></p>

<p>I recommend for you guys to do the same. Just sit down, find a problem, find a coding kata and just do it with TDD. With PROPER TDD.</p>

<p>Here are some good sites for katas and problems:</p>

<p><a href="http://codekata.pragprog.com/" target="_blank"><a href="http://codekata.pragprog.com/">http://codekata.pragprog.com/</a></a></p>

<p><a href="http://www.spoj.pl/problems/classical/" target="_blank"><a href="http://www.spoj.pl/problems/classical/">http://www.spoj.pl/problems/classical/</a></a></p>

<p>Just select a problem and then start cracking on it. Do this every time you have some free time. Like a martial art trainee doing basic exercises and you will get better at problem solving and at TDD too. I promise.</p>

<p>Happy coding and good night!</p>

<p>Gergely.</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">26 Jun 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2012/06/26/solution-to-wrap-kata/" class="post-title">Solution to Wrap Kata</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-java" href="https://skarlso.github.io//categories/java">java</a><a class="post-category post-category-knowledge" href="https://skarlso.github.io//categories/knowledge">knowledge</a><a class="post-category post-category-problem solving" href="https://skarlso.github.io//categories/problem-solving">problem solving</a><a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>My solution to the String Wrap Kata. The goal is to have it wrap a text on a given column width.</p>

<p>It is not the best solution but this is my first try. I did it with TDD so there were tests first, which I&#8217;m not going to copy in..</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;">&nbsp;
<span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> WrapKata <span style="color: #009900;">&#123;</span>
&nbsp;
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #003399;">String</span> wrap<span style="color: #009900;">&#40;</span><span style="color: #003399;">String</span> input, <span style="color: #000066; font-weight: bold;">int</span> columnSize<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
&nbsp;
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>input.<span style="color: #006633;">length</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&lt;=</span> columnSize<span style="color: #009900;">&#41;</span>
            <span style="color: #000000; font-weight: bold;">return</span> input<span style="color: #339933;">;</span>
        <span style="color: #000000; font-weight: bold;">else</span> <span style="color: #009900;">&#123;</span>
            <span style="color: #000000; font-weight: bold;">return</span> wrapLines<span style="color: #009900;">&#40;</span>input, columnSize<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
    <span style="color: #000000; font-weight: bold;">private</span> <span style="color: #003399;">String</span> wrapLines<span style="color: #009900;">&#40;</span><span style="color: #003399;">String</span> input, <span style="color: #000066; font-weight: bold;">int</span> columnSize<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #000066; font-weight: bold;">int</span> breakPoint <span style="color: #339933;">=</span> getBreakPoint<span style="color: #009900;">&#40;</span>input, columnSize<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #003399;">String</span> head <span style="color: #339933;">=</span> createHead<span style="color: #009900;">&#40;</span>input, breakPoint<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #003399;">String</span> tail <span style="color: #339933;">=</span> createTail<span style="color: #009900;">&#40;</span>input, breakPoint<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #000000; font-weight: bold;">return</span> head <span style="color: #339933;">+=</span> <span style="color: #0000ff;">"<span style="color: #000099; font-weight: bold;">\n</span>"</span> <span style="color: #339933;">+</span> wrap<span style="color: #009900;">&#40;</span>tail, columnSize<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
    <span style="color: #000000; font-weight: bold;">private</span> <span style="color: #003399;">String</span> createTail<span style="color: #009900;">&#40;</span><span style="color: #003399;">String</span> input, <span style="color: #000066; font-weight: bold;">int</span> breakPoint<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #000000; font-weight: bold;">return</span> input.<span style="color: #006633;">substring</span><span style="color: #009900;">&#40;</span>breakPoint<span style="color: #009900;">&#41;</span>.<span style="color: #006633;">trim</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
    <span style="color: #000000; font-weight: bold;">private</span> <span style="color: #003399;">String</span> createHead<span style="color: #009900;">&#40;</span><span style="color: #003399;">String</span> input, <span style="color: #000066; font-weight: bold;">int</span> breakPoint<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #000000; font-weight: bold;">return</span> input.<span style="color: #006633;">substring</span><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;"></span>, breakPoint<span style="color: #009900;">&#41;</span>.<span style="color: #006633;">trim</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
    <span style="color: #000000; font-weight: bold;">private</span> <span style="color: #000066; font-weight: bold;">int</span> getBreakPoint<span style="color: #009900;">&#40;</span><span style="color: #003399;">String</span> input, <span style="color: #000066; font-weight: bold;">int</span> columnSize<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>input.<span style="color: #006633;">contains</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">" "</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
            <span style="color: #000000; font-weight: bold;">return</span> input.<span style="color: #006633;">lastIndexOf</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">' '</span>, columnSize<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span> <span style="color: #000000; font-weight: bold;">else</span> <span style="color: #009900;">&#123;</span>
            <span style="color: #000000; font-weight: bold;">return</span> columnSize<span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
    <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre>
      </td>
    </tr>
  </table>
</div>

                    </div>
                </section>
                
                <h1 class="content-subhead">04 Mar 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2012/03/04/jms-connection-setup-and-framework/" class="post-title">JMS Connection setup and Framework</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-java" href="https://skarlso.github.io//categories/java">java</a><a class="post-category post-category-knowledge" href="https://skarlso.github.io//categories/knowledge">knowledge</a><a class="post-category post-category-problem solving" href="https://skarlso.github.io//categories/problem-solving">problem solving</a><a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a><a class="post-category post-category-testing" href="https://skarlso.github.io//categories/testing">testing</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>Hello chumps.</p>

<p>Today I want to write about jms connection testing with a small framework. I wrote a small thing using a factory object model. It&#8217;s a lead, a proof of concept. You can use this to go onward.</p>

<p>First, let&#8217;s begin with the JMS connection it self.</p>

<p><strong>JMS Connection</strong></p>

<p>First rule of thumb is: &#8220;Don&#8217;t wait for a response when dealing with JMS queues.&#8221; How so? Because, a JMS queue is asynchronous so you wont get back anything. There are however two ways of checking if it was a success or not.</p>

<p>1: Check your database. The service you are trying out probably records something in the database, right? Check it&#8230; You can use a simple JDBC connection, or a Postgres connection or whatever your choice of database is.</p>

<p>2: You can monitor use the log of your choice of service provider. If there is an exception the moment you send something, you can be sure it is received. Just the format is not correct. This is of course based on how your service handles exceptions.</p>

<p>So let&#8217;s get down to business.</p>

<p>First, there is a really good article on how to create a JMS connection.</p>

<p>This is the link for it: <a href="http://www.javablogging.com/simple-guide-to-java-message-service-jms-using-activemq" title="Simple JMS How To">Simple Guide to Java message service JMS using ActiveMQ</a></p>

<p>Itt will tell you everything you need to know about creating a connection and waiting for a response.</p>

<p>I will tell you now how to use this information in a real live environment.</p>

<p>In a real environment you will be using a queue which has certain settings that will not allow you to &#8220;join&#8221; it, or creating it. And you need to get the name of the queue and certain settings, like the destination URL.</p>

<p>First, the tool you are going to use is called JConsole. JConsole is a tool to monitor applications. It&#8217;s tool to monitor the JVM. I wont go into details about it since there are numerous descriptions about it. It is part of the java installation.</p>

<p>So after firing it up and giving it a connection url which would look like this: &#8216;service:jmx:rmi:///jndi/rmi://hostName:portNum/jmxrmi&#8217;, you would go ahead and search on the TAB:<strong>Threads</strong>.</p>

<p>Look for a Thread that is labelled like this: <YourConnectionLayer> Transport Server: tcp://0.0.0.0: <port></p>

<p>This will be your destination url.</p>

<p>In the blog the guy is using ActiveMQ. It&#8217;s your best guess. It&#8217;s lightweight, it&#8217;s fast it&#8217;s easy. Go for it.</p>

<p>So your Destination would look like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
4
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;">    ConnectionFactory connectionFactory <span style="color: #339933;">=</span>
            <span style="color: #000000; font-weight: bold;">new</span> ActiveMQConnectionFactory<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">"&lt;yourserviceparameter&gt;://tcp://0.0.0.0:&lt;port&gt;"</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #003399;">Connection</span> connection <span style="color: #339933;">=</span> connectionFactory.<span style="color: #006633;">createConnection</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    connection.<span style="color: #006633;">start</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>After that you will need the queue name which you can get as easy as this. Go to the TAB <strong>MBeans</strong>. There you can see, if you are using ActiveMQ, you will see something like this : org.active.activemq. Open this up and you will see under localhost a number of queues that your server has configured. Open up one of them and copy the queue name in the createQueue.</p>

<p>Use it like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;">    Destination destination <span style="color: #339933;">=</span> session.<span style="color: #006633;">createQueue</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">"&lt;queue name&gt;"</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Of course if your service is configured properly you wont have any access to it. Use the connection like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;">    connection <span style="color: #339933;">=</span> connectionFactory.<span style="color: #006633;">createConnection</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">"username"</span>, <span style="color: #0000ff;">"password"</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>You will have now logged in with the proper user.</p>

<p>Now you can send the message. You have everything configured.</p>

<p><strong>Framework</strong></p>

<p>Let&#8217;s speak about the framework you will need to properly use this technology.</p>

<p>One of the paradigms for programming is design to interfaces. If you need a proper working framework, your ave to design with the mind set to changing pieces of code. Thinking about what would change the most. Your connection settings. You want a framework which can use any kind of connection. Not just JMS but whatever connection you would like. It could be a synchronous one. Or a database one. Or a JMS. Doesn&#8217;t matter. You are only interested in a message sent or a connection, or whatever you want.</p>

<p>So let&#8217;s get to it.</p>

<p>Interface:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;">    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">interface</span> IConnection <span style="color: #009900;">&#123;</span>
    <span style="color: #000066; font-weight: bold;">void</span> sendMessage<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>This is sample connection interface. You could have numerous templates here.</p>

<p>You will be using an object factory pattern here. Your implementer will be taken for a Java Property file. But it can be taken from whatever configuration you like. XML maybe, or a database even.</p>

<p>Let&#8217;s see you connection factory:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> ConnFactory <span style="color: #009900;">&#123;</span>
&nbsp;
    <span style="color: #000000; font-weight: bold;">static</span> Logger logger <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Logger<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">static</span> IConnection getImplementer<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #003399;">Properties</span> prop <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> <span style="color: #003399;">Properties</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #000000; font-weight: bold;">try</span>
        <span style="color: #009900;">&#123;</span>
            prop.<span style="color: #006633;">load</span><span style="color: #009900;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> <span style="color: #003399;">FileInputStream</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">"conf/implementer.property"</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
        <span style="color: #000000; font-weight: bold;">catch</span> <span style="color: #009900;">&#40;</span><span style="color: #003399;">IOException</span> io<span style="color: #009900;">&#41;</span>
        <span style="color: #009900;">&#123;</span>
            logger.<span style="color: #006633;">Log</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">"Could not find property file: "</span> <span style="color: #339933;">+</span> io.<span style="color: #006633;">getMessage</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
&nbsp;
        <span style="color: #003399;">String</span> implementerClass <span style="color: #339933;">=</span> prop.<span style="color: #006633;">getProperty</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">"implementer"</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        Class<span style="color: #339933;">&lt;?&gt;</span> iConnect <span style="color: #339933;">=</span> <span style="color: #000066; font-weight: bold;">null</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #000000; font-weight: bold;">try</span>
        <span style="color: #009900;">&#123;</span>
            iConnect <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">Class</span>.<span style="color: #006633;">forName</span><span style="color: #009900;">&#40;</span>implementerClass<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
        <span style="color: #000000; font-weight: bold;">catch</span> <span style="color: #009900;">&#40;</span><span style="color: #003399;">ClassNotFoundException</span> ce<span style="color: #009900;">&#41;</span>
        <span style="color: #009900;">&#123;</span>
            logger.<span style="color: #006633;">Log</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">"Class could not be found: "</span> <span style="color: #339933;">+</span> ce.<span style="color: #006633;">getMessage</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
&nbsp;
        IConnection connection <span style="color: #339933;">=</span> <span style="color: #000066; font-weight: bold;">null</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #000000; font-weight: bold;">try</span>
        <span style="color: #009900;">&#123;</span>
            connection <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>IConnection<span style="color: #009900;">&#41;</span> iConnect.<span style="color: #006633;">newInstance</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
        <span style="color: #000000; font-weight: bold;">catch</span> <span style="color: #009900;">&#40;</span><span style="color: #003399;">IllegalAccessException</span> ie<span style="color: #009900;">&#41;</span>
        <span style="color: #009900;">&#123;</span>
            logger.<span style="color: #006633;">Log</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">"Illegal access excpetion: "</span> <span style="color: #339933;">+</span> ie.<span style="color: #006633;">getMessage</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #009900;">&#125;</span> <span style="color: #000000; font-weight: bold;">catch</span> <span style="color: #009900;">&#40;</span><span style="color: #003399;">InstantiationException</span> e<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
&nbsp;
            logger.<span style="color: #006633;">Log</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">"Instatiation exception occured. "</span> <span style="color: #339933;">+</span> e.<span style="color: #006633;">getMessage</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
&nbsp;
        <span style="color: #000000; font-weight: bold;">return</span> connection<span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
<span style="color: #009900;">&#125;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Easy enough, right? Class.forname will instantiate the class name you have in the property file. This could be something like this: com.packagename.ClassName. Doesn&#8217;t matter to you. You can add some typeof checks, or instanceof checks, whatever you like. Or you can use <Type> generics.</p>

<p>Let&#8217;s get to the concrete implementation:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> JMSConnectionImpl <span style="color: #000000; font-weight: bold;">implements</span> IConnection <span style="color: #009900;">&#123;</span>
    Logger logger <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Logger<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> sendMessage<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
&nbsp;
    <span style="color: #003399;">Connection</span> connection <span style="color: #339933;">=</span> <span style="color: #000066; font-weight: bold;">null</span><span style="color: #339933;">;</span>
        .
        .
        .
        <span style="color: #000000; font-weight: bold;">finally</span>
        <span style="color: #009900;">&#123;</span>
            connection.<span style="color: #006633;">close</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
&nbsp;
    <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Simple enough. Here you have a concrete implementation of your collection and your sender class.</p>

<p>And the simple usage facility of this is&#8230; simple too:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;">    IConnection iConnection <span style="color: #339933;">=</span> ConnFactory.<span style="color: #006633;">getImplementer</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    iConnection.<span style="color: #006633;">sendMessage</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>Simple enough too, right? So what happens here? You have a factory that will give you back any kind of implementation you are writing in you property file. You don&#8217;t care what the implementation is in your test. You don&#8217;t care what it&#8217;s name is. You don&#8217;t care what it&#8217;s result is. Okay, you care about the result, but that&#8217;s another history since you will check that elsewhere.</p>

<p>There you go. If any question occurs, please don&#8217;t hesitate to ask.</p>

<p>Thanks for reading!</p>

                    </div>
                </section>
                
                <h1 class="content-subhead">27 Feb 2012, 00:00</h1>
                <section class="post">
                    <header class="post-header">

                        <a href="https://skarlso.github.io/2012/02/27/configuration/" class="post-title">Configuration</a>

                        <p class="post-meta">
                            
                                By <strong class="post-author">hannibal</strong>
                            
                            
                                under 
                                
                                <a class="post-category post-category-java" href="https://skarlso.github.io//categories/java">java</a><a class="post-category post-category-knowledge" href="https://skarlso.github.io//categories/knowledge">knowledge</a><a class="post-category post-category-problem solving" href="https://skarlso.github.io//categories/problem-solving">problem solving</a><a class="post-category post-category-programming" href="https://skarlso.github.io//categories/programming">programming</a>
                            
                        </p>
                    </header>

                    <div class="post-description">
                        <p>When I see something like this:</p>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
4
5
6
</pre>
      </td>
      
      <td class="code">
        <pre class="java" style="font-family:monospace;">    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> Config <span style="color: #009900;">&#123;</span>
        <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">static</span> <span style="color: #000000; font-weight: bold;">final</span> string DATABASELINK <span style="color: #339933;">=</span> <span style="color: #0000ff;">"linkhere"</span><span style="color: #339933;">;</span>
        .
        .
        .
    <span style="color: #009900;">&#125;</span></pre>
      </td>
    </tr>
  </table>
</div>

<p>It sends a small, but chilling shiver down my spine. Just&#8230; don&#8217;t. There are a lot of possibilities to use configuration in Java. Java property files. Xml. Xml serialization. CSV file. Whatever suits you best, but this? DON&#8217;T!</p>

                    </div>
                </section>
                
            </div>
            
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
      
      <a href="https://skarlso.github.io/categories/problem-solving/page/2/" class="post-list-pagination-item pure-button post-list-pagination-item-prev">
        <i class="fa fa-angle-double-left"></i>&nbsp;Newer
      </a>
      
    <span class="post-list-pagination-item post-list-pagination-item-current">Page 3 of 3</span>
    
  </nav>
</div>


            <div class="footer">
    <div class="pure-menu pure-menu-horizontal pure-menu-open">
        <ul>
            <li>Powered by <a class="hugo" href="https://gohugo.io/" target="_blank">hugo</a></li>
        </ul>
    </div>
</div>
<script src="https://skarlso.github.io//js/all.min.js"></script>

        </div>
    </div>
</div>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-69463020-2', 'auto');
ga('send', 'pageview');

</script>

</body>
</html>
