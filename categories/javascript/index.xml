<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>JavaScript on Ramblings of a cloud engineer</title>
    <link>https://skarlso.github.io/categories/javascript/</link>
    <description>Recent content in JavaScript on Ramblings of a cloud engineer</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-GB</language>
    <lastBuildDate>Sun, 01 Feb 2015 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://skarlso.github.io/categories/javascript/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Building an RPG App with Meteor – Part One – The struggle</title>
      <link>https://skarlso.github.io/2015/02/01/building-an-rpg-app-with-meteor-part-one-the-struggle/</link>
      <pubDate>Sun, 01 Feb 2015 00:00:00 +0000</pubDate>
      <guid>https://skarlso.github.io/2015/02/01/building-an-rpg-app-with-meteor-part-one-the-struggle/</guid>
      <description>&lt;p&gt;In my previous post, I was getting ready to enjoy some time with the JavaScript web framework Meteor.&lt;/p&gt;
&lt;p&gt;This time I would like to bring it to a bit of overdrive. See, how re-factoring works on a larger scale model with multiple pages. And how it can organize assets, such as, images, multiple CSS, some plugins, you know, ordinary web stuff.&lt;/p&gt;
&lt;p&gt;Let’s dive in.&lt;/p&gt;
&lt;p&gt;I’m planning this to be a series of posts as I’m going along building up my RPG app. Let’s define the rules.&lt;/p&gt;
&lt;h1 id=&#34;in-the-beginning&#34;&gt;In the beginning&lt;/h1&gt;
&lt;h3 id=&#34;heading&#34;&gt;&lt;/h3&gt;
&lt;h3 id=&#34;rules&#34;&gt;Rules&lt;/h3&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h4 id=&#34;inventory&#34;&gt;Inventory&lt;/h4&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Our main character will have a basic inventory. He will have space to carry stuff around and a body to put stuff on. One ring on each hand, one weapon in each hand, helmet, armour, legs, and a necklace. That’s it. For simplicities sake. The game mechanics will be like those old books which you could play, Fighting RPG Books, like the one Ian Livingstone was writing. This is one of my favourites; Robot commando:&lt;/p&gt;
&lt;h4 id=&#34;stats&#34;&gt;Stats&lt;/h4&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;A very basic stat system.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Strength&lt;/li&gt;
&lt;li&gt;Agility&lt;/li&gt;
&lt;li&gt;Constitution&lt;/li&gt;
&lt;li&gt;Intelligence&lt;/li&gt;
&lt;li&gt;Magic&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; &lt;/p&gt;
&lt;h4 id=&#34;fighting&#34;&gt;Fighting&lt;/h4&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;A very basic fighting system with the possibility of casting magic which, for simplicity, will count as attacks and can be dodged based on agility.&lt;/p&gt;
&lt;p&gt;Let’s say we have dice throwing with a couple of 6 sided ones. So X * 6 sided dice. Dodging will require agility, HP is defined by constitution, Intelligence will help in puzzles which require a throw against intelligence, Magic will define Mana Points.&lt;/p&gt;
&lt;p&gt;Simple, right?&lt;/p&gt;
&lt;h3 id=&#34;design&#34;&gt;Design&lt;/h3&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;I’m not much of a front-end developer, so I don’t really care about how it will look like. I’ll try to squeeze in some very basic stuff, like ordering, but that’s it.&lt;/p&gt;
&lt;h3 id=&#34;game-play&#34;&gt;Game Play&lt;/h3&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;Basically there will be a story which can be loaded threw a JSON structured file. The file will hold information about what a current page has. The probable things a page can contain at any given time:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Current location description&lt;/li&gt;
&lt;li&gt;Selectable proceed location ( page number )&lt;/li&gt;
&lt;li&gt;Enemy -&amp;gt; Fight ( Might contain an option to not to attack the beast )&lt;/li&gt;
&lt;li&gt;Riddle -&amp;gt; Solving it is determined by a throw against intelligence&lt;/li&gt;
&lt;li&gt;Trap -&amp;gt; Springing it is determined by a throw against agility&lt;/li&gt;
&lt;li&gt;Lootable items&lt;/li&gt;
&lt;li&gt;Death&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All of the above define an action that a player can, or HAS to take. If there is no ability to choose the player has to proceed as the page requests it. That might be easier to do if I just say if there is only one possible choose it’s choosen automatically for you.&lt;/p&gt;
&lt;h1 id=&#34;implementation&#34;&gt;Implementation&lt;/h1&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;I’ll be using Meteor which is based on Node and MongoDB. Hence, my stuff will be in mongoDB. I have a fair knowledge of how mongodb works, I’ll write down my progress as I go along.&lt;/p&gt;
&lt;p&gt;Everything I’ll do is of course under version control and can be followed here:&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;a href=&#34;https://github.com/Skarlso/coolrpgapp&#34;&gt;https://github.com/Skarlso/coolrpgapp&lt;/a&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h4 id=&#34;character&#34;&gt;Character&lt;/h4&gt;
&lt;p&gt; &lt;/p&gt;
&lt;p&gt;I need to be able to create a character with a name. Meaning, I need to figure out how meteor handles input. I already know that it uses templates and &lt;!-- raw HTML omitted --&gt;Spacebars Compiler&lt;!-- raw HTML omitted --&gt;. So what I want at this point is to enter a username and then click a button which will direct me to the story page. Simple, right…?&lt;/p&gt;
&lt;p&gt;For data handling we will use Meteor’s &lt;!-- raw HTML omitted --&gt;Collections&lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;
&lt;p&gt;Using a form to submit the username looks like this:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Of course there is no way to know if that actually succeeded so far unless I get a look at the DB. Navigate to the folder of your app and type in:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;This will open a console to your database where you can query it like you would normally do with a mongodb console. Hence for me it’s:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;As you can see, I already have two characters in the system. This is so far very easy but it does not redirect me to a new page displaying the beginning of my journey. Let’s try a redirect.&lt;/p&gt;
&lt;h1 id=&#34;complications&#34;&gt;Complications&lt;/h1&gt;
&lt;p&gt;Turns out it’s not that easy to get a redirect going. If I would be a beginner at this, I would give up right now and move on. The guide, or the tutorial does not contain any HINTS at least that I have to use a different method if I want a multi-layered multi-paged app. Of course Meteor provides a built in, easy to use, easy to add, answer-to-everything-you-ever-would-want-to-do, Login feature. But guys, it’s not useful. I would go as far as say it’s completely useless. Do you actually know someone who uses it? I would never use a built in something which is completely hidden from me and have no idea what it does. The ability to control what’s happening is THE most important thing in every developers life.&lt;/p&gt;
&lt;p&gt;So after I did a bit of digging and StackOverflowing ( which replaces the tutorial AND the user guide (and is a trademarked expression)), I found out that you can add &lt;!-- raw HTML omitted --&gt;Iron-Router&lt;!-- raw HTML omitted --&gt; which was built specifically for this purpose.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;So all of a sudden my Page is completely screwed up with Iron Router information. Again, there is no information on this on Meteors page or in the guide nor in the COMPLETE guide so, I’m left Googling.&lt;/p&gt;
&lt;p&gt;A very helpful StackOverflow ( again, and I’m wondering why people don’t bother with the guide in the first place just go to stackoverflow straight ) answer explains to me the following:&lt;/p&gt;
&lt;p&gt;“&lt;em&gt;You have to define a subscription handle (an object returned by Meteor.subscribe) in order to use it’s reactive ready method : we’ll reference it in the myDataIsReady helper to track data availability, and the helper will automatically rerun when the state of ready changes.&lt;/em&gt;”&lt;/p&gt;
&lt;p&gt;Okay, so subscriptions are mentioned in the SECURITY section of the guide regarding detecting specific users and private data and so on and so forth. All right so that’s used by iron routing as well which means I have to build that in, and not to mention first of all understanding how Iron Router works.&lt;/p&gt;
&lt;p&gt;I’m going to stop here now. After spending a couple of hours I can determine that this stuff is not intuitive and “easy”. I don’t know enough about JavaScript and redirecting and Iron Router to be able to use Meteor out of the box. Which means I have to educate myself a bit before returning to this stuff.&lt;/p&gt;
&lt;p&gt;Stay tuned for more.&lt;/p&gt;
&lt;p&gt;And as always,
Thanks for reading!&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>JavaScript Web Framework – Meteor</title>
      <link>https://skarlso.github.io/2015/01/29/javascript-web-framework-meteor/</link>
      <pubDate>Thu, 29 Jan 2015 00:00:00 +0000</pubDate>
      <guid>https://skarlso.github.io/2015/01/29/javascript-web-framework-meteor/</guid>
      <description>&lt;p&gt;Hi,&lt;/p&gt;
&lt;p&gt;This time I would like to write about something that interests me. I wanted to try out a pure JavaScript web framework.&lt;/p&gt;
&lt;p&gt;My choice is: &lt;!-- raw HTML omitted --&gt;Meteor&lt;!-- raw HTML omitted --&gt;. Looks interesting enough and it was recommended by a friend of mine. So, let’s dive in.&lt;/p&gt;
&lt;h4 id=&#34;installation&#34;&gt;&lt;strong&gt;Installation&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;As always, one starts with installation. The page tells us to follow this simple step:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Easy enough, when you are on Linux. Turns out, that there is no official release yet for Windows. I’m in luck then. After running the command though, I saw this popping up into my face:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;There is always something… in that case a more accurate command to use would be the following:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;This will force an insecure download. You might not face this issue, but just in case you do, use this command instead.&lt;/p&gt;
&lt;p&gt;Branching off here. For those of you whom the curl didn’t work because you are sitting behind a proxy you can specify a –proxy  protocol//username:password@proxy:port after your curl. Of course if that doesn’t work then the script won’t work either.&lt;/p&gt;
&lt;p&gt;So open the script in one of your favourite editors, for me it’s Sublime text, and find this line: “&lt;em&gt;Downloading Meteor distribution&lt;/em&gt;“. Lo, and behold; it uses curl. This is the only one in the script, so just edit it by adding in your –proxy setting as before and you should be right on track.&lt;/p&gt;
&lt;p&gt;If that still gives you problems, try this:&lt;/p&gt;
&lt;p&gt;Assuming that your browser is set up correctly with the proxy and just command line commands aren’t working, you can go to this URL defined by the variable TARBALL_URL:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Note that there are two variables in there. For me these are:&lt;/p&gt;
&lt;p&gt;RELEASE: 1.0.3.1&lt;/p&gt;
&lt;p&gt;PLATFORM: os.linux.x86_64&lt;/p&gt;
&lt;p&gt;The full URL is:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Download the latest tarball and delete the CURL AND TAR command on the following line. After that, you just have to extract the tarball and move the directory to ~/.meteor.&lt;/p&gt;
&lt;p&gt;Now you can run your sh again and you should be on the road, for sure this time.&lt;/p&gt;
&lt;p&gt;Just to make sure, these are the line which you need to comment out:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h4 id=&#34;heading&#34;&gt;&lt;/h4&gt;
&lt;h4 id=&#34;getting-started&#34;&gt;Getting started&lt;/h4&gt;
&lt;p&gt;After a nice installation process we can continue to the getting started phase.&lt;/p&gt;
&lt;p&gt;So, the documentation tells us that we have to simply execute a command.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;At this point we should get a directory structure which is written in the manual. And, behold, that’s exactly what happened. As usually, creating a skeleton is easy. Lets run the app. For that, the command is:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;I can do that, I think.&lt;/p&gt;
&lt;p&gt;And sure enough, I’ve got this little message, which I actually expected to see:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;In this world, where there are tons of applications running on your dev environment at any given time, it’s possible to have something already running on the port 3000. Luckily this is something that’s anticipated by now, and we are presented with an option to add in a proxy setting of our choice with –port &lt;!-- raw HTML omitted --&gt;.&lt;/p&gt;
&lt;p&gt;After I did that, I’ve got a nice confirm message that meteor is up and running. A quick check on the presented URL provided me with the confidence that my app is indeed reachable.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h4 id=&#34;after-getting-started8230&#34;&gt;After Getting Started…&lt;/h4&gt;
&lt;p&gt;Now that we know that it’s up and running we can continue with the tutorial. Up comes next a simple Todo list application with Templates. It’s telling us to replace the code in the default starter app. At this point I’m wondering if it can hotswap. It should, since javascript and HTML is dynamic so there should be no problems there, right?&lt;/p&gt;
&lt;p&gt;And sure enough, the moment I replaced the code and checked on my server status, I could see this:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;With a brief flash of “Rebuilding…”. So it does sort of work. It did, however, restart the server it just did it without your manual intervention. Which is nice, but on a larger scale application it might prove to be a tad bit annoying. For example, I add another item to the list, and suddenly, the server is restarted.&lt;/p&gt;
&lt;p&gt;Since, I am a tester, let’s see how it handles some problems.&lt;/p&gt;
&lt;p&gt;I modified the JavaScript so that it has a syntax error.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Note the missing “,”. And, nicely enough I’m getting an error message telling me that I messed something up:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;It even tells you where the error is and it’s waiting for you to fix it. After I’ve corrected my error it compiled fine and the application is up and running. Deleting the files did little difference as did corrupting the HTML pages or the CSS file. Nothing to see here, moving on…&lt;/p&gt;
&lt;h4 id=&#34;android-device&#34;&gt;Android Device&lt;/h4&gt;
&lt;p&gt;I’m sure everybody can read a manual and continue with collections, forms, events and such. What I’m more interested in is that Meteor promises it can run on Android devices. Now that perked my curiosity. With the rise of mobile devices, the desktop platform is slowly pushed back into a dark corner where even a &lt;!-- raw HTML omitted --&gt;Tineye &lt;!-- raw HTML omitted --&gt;would have problems seeing it.&lt;/p&gt;
&lt;p&gt;Hence, I want to see how easy it really is.&lt;/p&gt;
&lt;p&gt;Meteor gives you a set of commands to install the android sdk and droid support for your application, which is nice. You just need to run this:&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Now, if you are like me, someone who has experience with the android SDK and its emulator, you’ll know that running that thing requires more time and processing power than simulating the chances of Leonardo DiCaprio winning an Oscar. I’ll use a real device instead. For that, it appears I only have to run a simple command again.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;And sure enough the app appeared on my device.&lt;/p&gt;
&lt;p&gt;This is actually quite awesome. I only plugged in my device, enabled developer options and USB debugging and that’s it. I’m quite impressed so far with Meteor and the Power of JavaScript. The app is on my phone and the static JavaScript parts are still working even though I shut the server down.&lt;/p&gt;
&lt;p&gt;So my next burning question is… Will it Blend? I mean, Perform?&lt;/p&gt;
&lt;h4 id=&#34;benchmarking&#34;&gt;Benchmarking&lt;/h4&gt;
&lt;p&gt;So, now that I know that using, installing and getting started is pretty simple, what I also would like to know is how well it performs.&lt;/p&gt;
&lt;p&gt;I have a quad core i7 16GB RAM Samsung SSD running Linux. Let’s see 100 threads 10 second interval 10 times loop for a start. Look at how gorgeous this is.&lt;/p&gt;
&lt;p&gt;40ms on average. Now let’s crank it up and I’m performing the test on a separate machine but still on the same network. 1000 threads.&lt;/p&gt;
&lt;p&gt;This time I’ve got a bit more churn and my pc started to fan like there is no tomorrow. But the server stayed stable. Latency did not waver for a bit. Next, 10.000 for as long as my machine can handle it…. Better save my work. Hah, my JMeter died. But it clocked at an average of 1000ms response time and the server stayed absolutely stable with no package lost, or errors.&lt;/p&gt;
&lt;h4 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h4&gt;
&lt;p&gt;I can say with a full heart that I’m impressed by Meteor and I very much like it. It’s easy to use, even more easy to install and definitely can handle itself given that it’s rather lightweight. The hot swapping / server re-starting can’t be avoided, but that’s only a minor inconvenience and we got used to that already.&lt;/p&gt;
&lt;p&gt;I recommend Meteor and I’ll be playing around with it a bit more for sure.&lt;/p&gt;
&lt;p&gt;Thanks for reading!
Gergely.&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>
