<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Advent Of Code - Day 14 - Ramblings of a cloud engineer</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="hannibal" /><meta name="description" content="Advent Of Code - Day 14 Now we have to do some chemistry. Santa is pretty cool this way. They have a lot of skills mastered and read manuals like an expert. But this also means that manuals are always faulty. But Santa manages to work around these problems rather well.
Day 14 - Part 1 So, by reading the description and looking at the outcome, that a string only after 5 iterations will be this big, begs the question if we should build a primitive solution for this." />






<meta name="generator" content="Hugo 0.83.1 with theme even" />


<link rel="canonical" href="https://skarlso.github.io/2021/12/14/aoc-day14/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">



<meta property="og:title" content="Advent Of Code - Day 14" />
<meta property="og:description" content="Advent Of Code - Day 14 Now we have to do some chemistry. Santa is pretty cool this way. They have a lot of skills mastered and read manuals like an expert. But this also means that manuals are always faulty. But Santa manages to work around these problems rather well.
Day 14 - Part 1 So, by reading the description and looking at the outcome, that a string only after 5 iterations will be this big, begs the question if we should build a primitive solution for this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://skarlso.github.io/2021/12/14/aoc-day14/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2021-12-14T01:01:00&#43;01:00" />
<meta property="article:modified_time" content="2021-12-14T01:01:00&#43;01:00" />

<meta itemprop="name" content="Advent Of Code - Day 14">
<meta itemprop="description" content="Advent Of Code - Day 14 Now we have to do some chemistry. Santa is pretty cool this way. They have a lot of skills mastered and read manuals like an expert. But this also means that manuals are always faulty. But Santa manages to work around these problems rather well.
Day 14 - Part 1 So, by reading the description and looking at the outcome, that a string only after 5 iterations will be this big, begs the question if we should build a primitive solution for this."><meta itemprop="datePublished" content="2021-12-14T01:01:00&#43;01:00" />
<meta itemprop="dateModified" content="2021-12-14T01:01:00&#43;01:00" />
<meta itemprop="wordCount" content="756">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Advent Of Code - Day 14"/>
<meta name="twitter:description" content="Advent Of Code - Day 14 Now we have to do some chemistry. Santa is pretty cool this way. They have a lot of skills mastered and read manuals like an expert. But this also means that manuals are always faulty. But Santa manages to work around these problems rather well.
Day 14 - Part 1 So, by reading the description and looking at the outcome, that a string only after 5 iterations will be this big, begs the question if we should build a primitive solution for this."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Ramblings of a cloud engineer</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/blog/">
        <li class="mobile-menu-item">Archive</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Ramblings of a cloud engineer</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/blog/">Archive</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Advent Of Code - Day 14</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-12-14 </span>
        <div class="post-category">
            <a href="/categories/aoc/"> aoc </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#advent-of-code---day-14">Advent Of Code - Day 14</a>
      <ul>
        <li><a href="#day-14---part-1">Day 14 - Part 1</a></li>
        <li><a href="#day-14---part-2">Day 14 - Part 2</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="advent-of-code---day-14">Advent Of Code - Day 14</h1>
<p>Now we have to do some chemistry. Santa is pretty cool this way. They have a lot of skills mastered and read manuals
like an expert. But this also means that manuals are always faulty. But Santa manages to work around these problems
rather well.</p>
<h2 id="day-14---part-1">Day 14 - Part 1</h2>
<p>So, by reading the description and looking at the outcome, that a string only after 5 iterations will be this big, begs
the question if we should build a primitive solution for this. Well, yes, I think we should. Part 2 will most likely be
about something like, okay, now do this, but longer. I suspect this will be like the lanterfish thing. But let&rsquo;s do it
anyways.</p>
<p>A naive approach is to track the whole string and concatenate. This is done rather quickly, and earns us a good place
if you managed to either wake up early, or not go to bed at all.</p>
<p>The concatenation is done quickly:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go">	<span class="nx">steps</span> <span class="o">:=</span> <span class="mi">10</span>
	<span class="c1">// insert then skip because pairs overlap.
</span><span class="c1"></span>	<span class="k">for</span> <span class="nx">step</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">step</span> <span class="p">&lt;</span> <span class="nx">steps</span><span class="p">;</span> <span class="nx">step</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">newTemplate</span> <span class="o">:=</span> <span class="s">&#34; &#34;</span> <span class="c1">// cheeky
</span><span class="c1"></span>		<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">template</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
			<span class="nx">pair</span> <span class="o">:=</span> <span class="nb">string</span><span class="p">(</span><span class="nx">template</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">+</span> <span class="nb">string</span><span class="p">(</span><span class="nx">template</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
			<span class="nx">pair</span> <span class="p">=</span> <span class="nb">string</span><span class="p">(</span><span class="nx">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="nx">pairs</span><span class="p">[</span><span class="nx">pair</span><span class="p">]</span> <span class="o">+</span> <span class="nb">string</span><span class="p">(</span><span class="nx">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
			<span class="nx">newTemplate</span> <span class="p">=</span> <span class="nx">newTemplate</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="nx">newTemplate</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
			<span class="nx">newTemplate</span> <span class="o">+=</span> <span class="nx">pair</span>
		<span class="p">}</span>
		<span class="nx">template</span> <span class="p">=</span> <span class="nx">newTemplate</span>
	<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>And you can just see immediately how bad this would scale. But it works. And we have our star and the hull of the ship
is now a bit stronger.</p>
<h2 id="day-14---part-2">Day 14 - Part 2</h2>
<p>Of course part 2 hits us in the face again, but instead of a fishy fist, we get a chemical fist. We know that this is
similar to the lanterfish problem, right? So we got to look for some patterns again. We will have to most likely track
something other than the string. Which means there is a solution to this which involves only counting. But what do we
count and how? This is the question.</p>
<p>Let&rsquo;s look at our string. Initial string is <code>NNCB</code>. We have a couple of pairs in this one as the example suggests.
<code>NN</code>, <code>NC</code>, <code>CB</code>. That&rsquo;s fine. Let&rsquo;s look at the next iteration. <code>NCNBCHB</code>. Pairs?</p>
<p><code>NC</code>, <code>CN</code>, <code>NB</code>, <code>BC</code>, <code>CH</code>, <code>HB</code>. We can see now a tiny bit of a pattern; namely that we&rsquo;ll always end with <code>B</code> and
that we&rsquo;ll always start with <code>N</code>. Next.</p>
<p><code>NBCCNBBBCBHCB</code>. Somewhat longer now, let&rsquo;s list some pairs.</p>
<p><code>NB</code>, <code>BC</code>, <code>CC</code>, <code>CN</code>, <code>NB</code>&hellip; hmmm. These are the same pairs. And if we go further and with a greater example, we&rsquo;ll
see that there are a finite number of pairs. So we track the pairs! But! Where do we get the pairs from? We can actually
construct the pairs without having to concatenate all the strings.</p>
<p>Okay, okay, wait, what? Let&rsquo;s initialize things so we can understand better.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go">	<span class="nx">trackPairs</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">template</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">trackPairs</span><span class="p">[</span><span class="nb">string</span><span class="p">(</span><span class="nx">template</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="o">+</span><span class="nb">string</span><span class="p">(</span><span class="nx">template</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])]</span><span class="o">++</span>
	<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>We have our initial pairs from the initial template. Now, what we have to do is use our rules for each pair in that map
and construct new pairs with them. That part didn&rsquo;t change. And add those pairs to a new map and update our tracking map.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go">	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">steps</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">update</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span>
		<span class="k">for</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">trackPairs</span> <span class="p">{</span>
			<span class="nx">update</span><span class="p">[</span><span class="nb">string</span><span class="p">(</span><span class="nx">k</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="nx">rules</span><span class="p">[</span><span class="nx">k</span><span class="p">]]</span> <span class="o">+=</span> <span class="nx">v</span>
			<span class="nx">update</span><span class="p">[</span><span class="nx">rules</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span><span class="o">+</span><span class="nb">string</span><span class="p">(</span><span class="nx">k</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="o">+=</span> <span class="nx">v</span>
		<span class="p">}</span>
		<span class="nx">trackPairs</span> <span class="p">=</span> <span class="nx">update</span>
	<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>We construct a new map and add the number of encountered pairs to this new pair. And if we already have it, it increases.
Mind blown! This is all fine, but what do about counting the min and max characters? Well, all the characters are
already there. Just construct a new map with a character count for each character.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go">	<span class="nx">counts</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">{}</span>
	<span class="k">for</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">trackPairs</span> <span class="p">{</span>
		<span class="nx">counts</span><span class="p">[</span><span class="nb">string</span><span class="p">(</span><span class="nx">k</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span> <span class="o">+=</span> <span class="nx">v</span>
	<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>It&rsquo;s enough to use the first one because they repeat.</p>
<p>We do some min, max on this map and tadaam. We have our value! We submit, and there is our second star. Fantastic!</p>
<h2 id="conclusion">Conclusion</h2>
<p>Today, we learned again, that we should always look for patterns in the output. Sometimes they are well hidden. So we
write out everything and try all combinations of things until something clicks.</p>
<p>The repository for all my solutions for AOC 2021 can be found <a href="https://github.com/Skarlso/aoc2021">here</a>.</p>
<p>Thank you for reading!</p>
<p>Gergely.</p>

    </div>

    
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/2021/12/15/aoc-day15/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Advent Of Code - Day 15</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/2021/12/13/aoc-day13/">
            <span class="next-text nav-default">Advent Of Code - Day 13</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'hannibalDisqus';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://twitter.com/skarlso" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/Skarlso" class="iconfont icon-github" title="github"></a>
  <a href="https://skarlso.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
     - 
    2023<span class="heart"><i class="iconfont icon-heart"></i></span><span>Gergely Brautigam</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-69463020-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>










</body>
</html>
