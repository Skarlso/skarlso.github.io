<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Advent Of Code - Day 12 - Ramblings of a cloud engineer</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="hannibal" /><meta name="description" content="Advent Of Code - Day 12 EDIT: I revisited this problem and completely revised my solution to it: Day 12 Updated
This one is a bit different from our little BFS walk the other day. I didn&amp;rsquo;t quite remember how DFS works, so I looked at the Wikipedia a bit. Then I remembered that I implemented this previously at some point in a later year.
Disclaimer: I didn&amp;rsquo;t manage to finish part 2." />






<meta name="generator" content="Hugo 0.83.1 with theme even" />


<link rel="canonical" href="https://skarlso.github.io/2021/12/12/aoc-day12/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">



<meta property="og:title" content="Advent Of Code - Day 12" />
<meta property="og:description" content="Advent Of Code - Day 12 EDIT: I revisited this problem and completely revised my solution to it: Day 12 Updated
This one is a bit different from our little BFS walk the other day. I didn&rsquo;t quite remember how DFS works, so I looked at the Wikipedia a bit. Then I remembered that I implemented this previously at some point in a later year.
Disclaimer: I didn&rsquo;t manage to finish part 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://skarlso.github.io/2021/12/12/aoc-day12/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2021-12-12T01:01:00&#43;01:00" />
<meta property="article:modified_time" content="2021-12-12T01:01:00&#43;01:00" />

<meta itemprop="name" content="Advent Of Code - Day 12">
<meta itemprop="description" content="Advent Of Code - Day 12 EDIT: I revisited this problem and completely revised my solution to it: Day 12 Updated
This one is a bit different from our little BFS walk the other day. I didn&rsquo;t quite remember how DFS works, so I looked at the Wikipedia a bit. Then I remembered that I implemented this previously at some point in a later year.
Disclaimer: I didn&rsquo;t manage to finish part 2."><meta itemprop="datePublished" content="2021-12-12T01:01:00&#43;01:00" />
<meta itemprop="dateModified" content="2021-12-12T01:01:00&#43;01:00" />
<meta itemprop="wordCount" content="550">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Advent Of Code - Day 12"/>
<meta name="twitter:description" content="Advent Of Code - Day 12 EDIT: I revisited this problem and completely revised my solution to it: Day 12 Updated
This one is a bit different from our little BFS walk the other day. I didn&rsquo;t quite remember how DFS works, so I looked at the Wikipedia a bit. Then I remembered that I implemented this previously at some point in a later year.
Disclaimer: I didn&rsquo;t manage to finish part 2."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Ramblings of a cloud engineer</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/blog/">
        <li class="mobile-menu-item">Archive</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Ramblings of a cloud engineer</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/blog/">Archive</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Advent Of Code - Day 12</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-12-12 </span>
        <div class="post-category">
            <a href="/categories/aoc/"> aoc </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#advent-of-code---day-12">Advent Of Code - Day 12</a>
      <ul>
        <li><a href="#day-12---part-1">Day 12 - Part 1</a></li>
        <li><a href="#day-12---part-2">Day 12 - Part 2</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="advent-of-code---day-12">Advent Of Code - Day 12</h1>
<p><strong>EDIT</strong>: I revisited this problem and completely revised my solution to it: <a href="https://skarlso.github.io/2021/12/17/aoc-day12-updated/">Day 12 Updated</a></p>
<p>This one is a bit different from our little BFS walk the other day. I didn&rsquo;t quite remember how DFS works, so I looked
at the <a href="https://en.wikipedia.org/wiki/Depth-first_search">Wikipedia</a> a bit. Then I remembered that I implemented this
previously at some point in a later year.</p>
<p><em>Disclaimer</em>: I didn&rsquo;t manage to finish part 2. I&rsquo;m not sure what the bug is, but I moved on. When I&rsquo;ll have the
inspiration, I&rsquo;ll figure it out. Unless, someone has an idea what&rsquo;s going on.</p>
<h2 id="day-12---part-1">Day 12 - Part 1</h2>
<p>There isn&rsquo;t much to decipher this time. It&rsquo;s basically a graph traversal. Specifically, finding all path in a graph.
With a tiny addition that large caves can be visited as many times as we like. Which just means that we&rsquo;ll never put
them into the <code>visited</code> | <code>seen</code> map.</p>
<p>But first we&rsquo;ll have to construct our graph. That one is a bit fiddly. I wasn&rsquo;t sure if the connections are directed
or that there are on connections as in <code>a -&gt; b</code> and this doesn&rsquo;t mean that we&rsquo;ll update the connection for <code>b</code> to point
back to <code>a</code>.</p>
<p>I choose to update both connections.</p>
<p>So once, the boring part is done and we managed to parse our graph we&rsquo;ll have to do a <code>dfs</code>. We have to find ALL paths
in this graph. For that we&rsquo;ll collect the path in a global value and do some recursion with dfs. There is an iterative
approach but I find the recursive one more intuitive.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">dfs</span><span class="p">(</span><span class="nx">curr</span> <span class="o">*</span><span class="nx">node</span><span class="p">,</span> <span class="nx">path</span> <span class="p">[]</span><span class="kt">string</span><span class="p">,</span> <span class="nx">seen</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">struct</span><span class="p">{})</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nf">isLower</span><span class="p">(</span><span class="nx">curr</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">seen</span><span class="p">[</span><span class="nx">curr</span><span class="p">.</span><span class="nx">value</span><span class="p">]</span> <span class="p">=</span> <span class="kd">struct</span><span class="p">{}{}</span>
	<span class="p">}</span>
	<span class="nx">path</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">curr</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">curr</span><span class="p">.</span><span class="nx">value</span> <span class="o">==</span> <span class="s">&#34;end&#34;</span> <span class="p">{</span>
		<span class="nx">paths</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">paths</span><span class="p">,</span> <span class="nx">path</span><span class="p">)</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">next</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">curr</span><span class="p">.</span><span class="nx">connections</span> <span class="p">{</span>
			<span class="k">if</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">seen</span><span class="p">[</span><span class="nx">next</span><span class="p">.</span><span class="nx">value</span><span class="p">];</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
				<span class="nf">dfs</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">seen</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nb">delete</span><span class="p">(</span><span class="nx">seen</span><span class="p">,</span> <span class="nx">curr</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><p>What&rsquo;s happening here? We only put it into <code>seen</code> if it&rsquo;s lower case. This is where the big cave / small cave thing
comes in. Then, we append the currently visiting node to the path. If we reached <code>'end'</code> we are done with that part and
we put our path so far into the all paths gathering global value. Then, we delete the current value and return. If it&rsquo;s
done at that point, it will just unravel and be done.</p>
<p>If we didn&rsquo;t reach the path so far, we call dfs on each of the neighbors of our current node. So we identified our base
case. Which is to check if we are at the end, and save the path. That&rsquo;s it, we run this and we have our first star.</p>
<h2 id="day-12---part-2">Day 12 - Part 2</h2>
<p>This is where it gets a bit more complex. We&rsquo;ll have to now allow for a single cave to be visited twice. I&rsquo;m doing that
by looping over all of the small caves and adding them into a seenTwice map. But for some reason, I&rsquo;m not getting the
right value yet. We&rsquo;ll get back to that.</p>
<h2 id="conclusion">Conclusion</h2>
<p>The repository for all my solutions for AOC 2021 can be found <a href="https://github.com/Skarlso/aoc2021">here</a>.</p>
<p>Thank you for reading!</p>
<p>Gergely.</p>

    </div>

    
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/2021/12/13/aoc-day13/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Advent Of Code - Day 13</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/2021/12/11/aoc-day11/">
            <span class="next-text nav-default">Advent Of Code - Day 11</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'hannibalDisqus';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://twitter.com/skarlso" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/Skarlso" class="iconfont icon-github" title="github"></a>
  <a href="https://skarlso.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
     - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>Gergely Brautigam</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-69463020-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>










</body>
</html>
